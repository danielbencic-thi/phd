Quan Quan
Introduction to Multicopter Design and Control

Introduction to Multicopter Design and Control

Quan Quan
Introduction to Multicopter Design and Control
123

Quan Quan Department of Automatic Control Beihang University Beijing China

ISBN 978-981-10-3381-0

ISBN 978-981-10-3382-7 (eBook)

DOI 10.1007/978-981-10-3382-7

Library of Congress Control Number: 2017932434

© Springer Nature Singapore Pte Ltd. 2017 This work is subject to copyright. All rights are reserved by the Publisher, whether the whole or part of the material is concerned, speciﬁcally the rights of translation, reprinting, reuse of illustrations, recitation, broadcasting, reproduction on microﬁlms or in any other physical way, and transmission or information storage and retrieval, electronic adaptation, computer software, or by similar or dissimilar methodology now known or hereafter developed. The use of general descriptive names, registered names, trademarks, service marks, etc. in this publication does not imply, even in the absence of a speciﬁc statement, that such names are exempt from the relevant protective laws and regulations and therefore free for general use. The publisher, the authors and the editors are safe to assume that the advice and information in this book are believed to be true and accurate at the date of publication. Neither the publisher nor the authors or the editors give a warranty, express or implied, with respect to the material contained herein or for any errors or omissions that may have been made. The publisher remains neutral with regard to jurisdictional claims in published maps and institutional afﬁliations.

Printed on acid-free paper

This Springer imprint is published by Springer Nature The registered company is Springer Nature Singapore Pte Ltd. The registered company address is: 152 Beach Road, #21-01/04 Gateway East, Singapore 189721, Singapore

To my parents

Preface
The ﬂight is always the dream of mankind. The kite was invented in China, possibly as far back to the ﬁfth century. Beginning with the last years of the 15th century, Leonardo da Vinci wrote about and sketched many designs for ﬂying machines and mechanisms, including ornithopters, ﬁxed-wing gliders, rotorcraft, and parachutes. On December 17, 1903, the Wright brothers invented and built the world’s ﬁrst successful airplane and made the ﬁrst controlled, powered, and sustained heavier-than-air human ﬂight. Since 1903, in the following one hundred years, many types of aircraft emerged. However, not too many people tried to pilot and enjoy their ﬂying. Aircraft and pilots were still mysterious until small and micro multicopters were approaching consumers via the Radio Controlled (RC) toy market. This mainly due to the huge improvement on the user experience via their salient features: ease-of-use, high reliability, and easy maintainability. It hardly ﬁnds an aircraft as simple as multicopters. They do make more and more people really pilot and enjoy ﬂying. Besides as an RC toy, multicopters demonstrate other commercial applications as drones, including surveillance, search, and rescue missions. So far, multicopters have taken and consolidated their dominance in the market of small aircraft. No matter deﬁned as an RC toy or a drone, the multicopter is deﬁnitely an appropriate research target for students. This is because students have a chance to experience all phases from design to ﬂight testing within a short time. One more reason is that students can read and interact with the open-source code of multicopters to understand the underline principle.
As an outcome of a course developed at Beihang University (Beijing University of Aeronautics and Astronautics, BUAA), this book is intended as a textbook or introductory guide for senior undergraduate and graduate students, and as a self-study book for practicing engineers involved in multicopters. With the intention of covering most design phases on hardware and algorithms of multicopters, it has ﬁfteen chapters which is divided into ﬁve parts, including multicopter airframe and propulsion system design, modeling, perception, control, and decision. This book can also be used for a supplementary reading material for other unmanned ﬂying systems. It aims to organize the design principles adopted in engineering practice into a discipline and to emphasize the power of fundamental concepts. This book is featured with four salient characteristics.
vii

viii
(1) Basic and practical. The most contents related to multicopters are self-contained, aiming at making this book understandable to readers with the background of Electronic Engineering (EE). For such a purpose, the components are introduced starting from their functions and key parameters. The introduction to the design process starts with the principle, while the modeling section starts with the theoretical mechanics. The state estimation section starts with the measurement principle of sensors. Before talking about the control, the notions of stability and controllability are introduced. In addition, most of basic and practical methods are presented. These methods are closely related to open-source autopilots which are often used now.
(2) Comprehensive and systematic. This book hopes to give a complete picture of multicopter systems rather than a single method or technique. Very often, the role of a single method or technique is not sufﬁcient to meet the users requirements or to solve a practical complex problem. On the other hand, improving other related methods or techniques will reduce the difﬁculty in a single method. For example, the improvement of the state estimation performance or the mechanical structure can avoid dealing with delay or vibration as a control problem. Through this, some complex controller design can be avoided. For an undergraduate student, basic knowledge has been obtained, such as mathematics, aerodynamics, materials, structures, electronics, ﬁltering, and control algorithms, which correspond to numerous courses. This book is hoped to combine them together to lay foundations for full stack developers.
The preparation and writing of this book have suffered me a lot. Fortunately, the Software and Control Lab, I stayed as a student (I have been staying here as a faculty since 2010), started to support the research on multicopters since about 2007. Ruifeng Zhang and I devoted ourselves to building quadcopters then. This made me almost witness the gold development period of small multicopters. Moreover, fortunately, public documents are shared selﬂessly by developer teams of open-source autopilots, such as APM and PX4, and numerous technique dissertations and papers are contributed by scholars all over the world. More importantly, this book could never have been written without the support and assistance from my students from BUAA Reliable Flight Control Group http://rﬂy.buaa.edu.cn/, which is a part of Software and Control Lab. Deep thanks go to graduate students Jinrui Ren, Zhiyao Zhao, Guang-Xun Du, Xunhua Dai, Zibo Wei, Heng Deng, Dongjie Shi, Yangguang Cai, Jiang Yan, Hongxin Dong, Jianing Fu, Zhenglong Guo, Jing Zhang, Yao Luo, Shuaiyong Zheng, Baihui Du and Xiaowei Zhang for material preparation, chapter revision, and simulations. I would like to thank my colleague Prof. Zhiyu Xi, graduate students Usman Arif and Hanna Tereshchenko, and undergraduate student Kun Xiao for their comments and hours of tireless proof reading. I would like to thank Prof. Wei Huo, Prof. Dawei Li at Beihang University, Mr. Yun Yu at DJI-Innovations,

Preface

Preface

ix

Dr. Liang Zhu at AVIC Information Technology Co., Ltd for providing the valuable suggestions. This book has been used in manuscript form in several courses at Beihang University and National University of Defense Technology, and the feedback from students has been invaluable. Finally, I would like to thank Mr. Xiang Guo for the traditional Chinese-style illustrations at the beginning of each chapter.

Beijing, China December 2016

Quan Quan

Contents
1 Introduction. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1 1.1 Concepts . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3 1.1.1 Classification of Commonly Used Small Aircraft . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3 1.1.2 Unmanned Aerial Vehicle and Model Aircraft . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5 1.2 Remote Control and Performance Evaluation . . . . . . . . . 6 1.2.1 Remote Control of a Multicopter . . . . . . . . . . . 6 1.2.2 Performance Evaluation. . . . . . . . . . . . . . . . . . 10 1.2.3 Bottleneck . . . . . . . . . . . . . . . . . . . . . . . . . . . 12 1.3 History of Multicopters . . . . . . . . . . . . . . . . . . . . . . . . 13 1.3.1 The First Stage (Before 1990): Dormancy Period . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14 1.3.2 The Second Stage (1990–2005): Growing Period . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15 1.3.3 The Third Stage (2005–2010): Development Period . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15 1.3.4 The Fourth Stage (2010–2013): Activity Period . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17 1.3.5 The Fifth Period (2013–): Booming Period . . . . 19 1.3.6 Conclusion Remark. . . . . . . . . . . . . . . . . . . . . 21 1.4 The Objective and Structure of the Book . . . . . . . . . . . . 21 1.4.1 Objective. . . . . . . . . . . . . . . . . . . . . . . . . . . . 21 1.4.2 Structure . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25 References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
Part I Design
2 Basic Composition . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31 2.1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33 2.2 Airframe . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33 2.2.1 Fuselage . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33 2.2.2 Landing Gear . . . . . . . . . . . . . . . . . . . . . . . . . 36 2.2.3 Duct . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36 2.3 Propulsion System . . . . . . . . . . . . . . . . . . . . . . . . . . . 37 2.3.1 Propeller . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37 2.3.2 Motor . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40
xi

xii
2.3.3 Electronic Speed Controller . . . . . . . . . . . . . . . 43 2.3.4 Battery . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45 2.4 Command and Control System . . . . . . . . . . . . . . . . . . . 47 2.4.1 RC Transmitter and Receiver . . . . . . . . . . . . . . 47 2.4.2 Autopilot . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50 2.4.3 Ground Control Station . . . . . . . . . . . . . . . . . . 51 2.4.4 Radio Telemetry. . . . . . . . . . . . . . . . . . . . . . . 51 2.5 Summary. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54 References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
3 Airframe Design. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57 3.1 Configuration Design . . . . . . . . . . . . . . . . . . . . . . . . . 59 3.1.1 Airframe Configuration . . . . . . . . . . . . . . . . . . 59 3.1.2 Aerodynamic Configuration . . . . . . . . . . . . . . . 66 3.2 Structural Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . 67 3.2.1 Design Principles of Airframe . . . . . . . . . . . . . 67 3.2.2 Anti-Vibration Consideration . . . . . . . . . . . . . . 67 3.2.3 Noise Reduction Consideration. . . . . . . . . . . . . 70 3.3 Summary. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71 References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71
4 Modeling and Evaluation of Propulsion System . . . . . . . . . . 73 4.1 Problem Formulation. . . . . . . . . . . . . . . . . . . . . . . . . . 75 4.2 Propulsion System Modeling . . . . . . . . . . . . . . . . . . . . 75 4.2.1 Propeller Modeling . . . . . . . . . . . . . . . . . . . . . 75 4.2.2 Motor Modeling . . . . . . . . . . . . . . . . . . . . . . . 77 4.2.3 Electronic Speed Controller Modeling . . . . . . . . 79 4.2.4 Battery Modeling . . . . . . . . . . . . . . . . . . . . . . 80 4.3 Performance Evaluation. . . . . . . . . . . . . . . . . . . . . . . . 80 4.3.1 Solution to Problem 1 . . . . . . . . . . . . . . . . . . . 80 4.3.2 Solution to Problem 2 . . . . . . . . . . . . . . . . . . . 83 4.3.3 Solution to Problem 3 . . . . . . . . . . . . . . . . . . . 83 4.3.4 Solution to Problem 4 . . . . . . . . . . . . . . . . . . . 84 4.4 Test Case . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87 4.5 Summary. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 88 4.6 Appendix. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 89 4.6.1 Procedure to Obtain Thrust Coefficient and Torque Coefficient . . . . . . . . . . . . . . . . . . 89 4.6.2 Procedure to Obtain the Motor Equivalent Voltage and Current . . . . . . . . . . . . . . . . . . . . 91 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 94 References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95
Part II Modeling
5 Coordinate System and Attitude Representation . . . . . . . . . 99 5.1 Coordinate Frame . . . . . . . . . . . . . . . . . . . . . . . . . . . . 101 5.1.1 Right-Hand Rule . . . . . . . . . . . . . . . . . . . . . . 101

Contents

Contents

xiii
5.1.2 Earth-Fixed Coordinate Frame and Aircraft-Body Coordinate Frame. . . . . . . . . 101
5.2 Attitude Representation . . . . . . . . . . . . . . . . . . . . . . . . 102 5.2.1 Euler Angles . . . . . . . . . . . . . . . . . . . . . . . . . 102 5.2.2 Rotation Matrix . . . . . . . . . . . . . . . . . . . . . . . 105 5.2.3 Quaternions . . . . . . . . . . . . . . . . . . . . . . . . . . 109
5.3 Summary. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 119 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 119 References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 120
6 Dynamic Model and Parameter Measurement . . . . . . . . . . . 121 6.1 Multicopter Control Model . . . . . . . . . . . . . . . . . . . . . 123 6.1.1 General Description . . . . . . . . . . . . . . . . . . . . 123 6.1.2 Multicopter Flight Control Rigid Model . . . . . . 124 6.1.3 Control Effectiveness Model . . . . . . . . . . . . . . 127 6.1.4 Propulsor Model. . . . . . . . . . . . . . . . . . . . . . . 129 6.2 Multicopter Aerodynamic Drag Model . . . . . . . . . . . . . 130 6.2.1 Blade Flapping. . . . . . . . . . . . . . . . . . . . . . . . 130 6.2.2 Multicopter Aerodynamic Drag Model . . . . . . . 132 6.3 Multicopter Model Parameter Measurement . . . . . . . . . . 132 6.3.1 Position of the Center of Gravity . . . . . . . . . . . 133 6.3.2 Weight . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 134 6.3.3 Moment of Inertia. . . . . . . . . . . . . . . . . . . . . . 134 6.3.4 Propulsor Model’s Parameter Measurement . . . . 138 6.4 Summary. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 143 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 143 References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 143
Part III Perception
7 Sensor Calibration and Measurement Model . . . . . . . . . . . . 147 7.1 Three-Axis Accelerometer . . . . . . . . . . . . . . . . . . . . . . 149 7.1.1 Fundamental Principle . . . . . . . . . . . . . . . . . . . 149 7.1.2 Calibration. . . . . . . . . . . . . . . . . . . . . . . . . . . 149 7.1.3 Measurement Model . . . . . . . . . . . . . . . . . . . . 151 7.2 Three-Axis Gyroscope. . . . . . . . . . . . . . . . . . . . . . . . . 151 7.2.1 Fundamental Principle . . . . . . . . . . . . . . . . . . . 151 7.2.2 Calibration. . . . . . . . . . . . . . . . . . . . . . . . . . . 152 7.2.3 Measurement Model . . . . . . . . . . . . . . . . . . . . 154 7.3 Three-Axis Magnetometer . . . . . . . . . . . . . . . . . . . . . . 155 7.3.1 Fundamental Principle . . . . . . . . . . . . . . . . . . . 155 7.3.2 Calibration. . . . . . . . . . . . . . . . . . . . . . . . . . . 155 7.3.3 Measurement Model . . . . . . . . . . . . . . . . . . . . 157 7.4 Ultrasonic Range Finder . . . . . . . . . . . . . . . . . . . . . . . 157 7.4.1 Fundamental Principle . . . . . . . . . . . . . . . . . . . 157 7.4.2 Calibration. . . . . . . . . . . . . . . . . . . . . . . . . . . 158 7.4.3 Measurement Model . . . . . . . . . . . . . . . . . . . . 158 7.5 Barometer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 158 7.5.1 Fundamental Principle . . . . . . . . . . . . . . . . . . . 158 7.5.2 Calibration. . . . . . . . . . . . . . . . . . . . . . . . . . . 159 7.5.3 Measurement Model . . . . . . . . . . . . . . . . . . . . 159

xiv
7.6 2D Laser Range Finder . . . . . . . . . . . . . . . . . . . . . . . . 159 7.6.1 Fundamental Principle . . . . . . . . . . . . . . . . . . . 159 7.6.2 Calibration. . . . . . . . . . . . . . . . . . . . . . . . . . . 159 7.6.3 Measurement Model . . . . . . . . . . . . . . . . . . . . 159 7.6.4 Supplement: LiDAR . . . . . . . . . . . . . . . . . . . . 160
7.7 Global Positioning System . . . . . . . . . . . . . . . . . . . . . . 162 7.7.1 Fundamental Principle . . . . . . . . . . . . . . . . . . . 162 7.7.2 Calibration. . . . . . . . . . . . . . . . . . . . . . . . . . . 163 7.7.3 Measurement Model . . . . . . . . . . . . . . . . . . . . 163 7.7.4 Supplement: Latitude-and-Longitude Distance and Heading Calculation. . . . . . . . . . . 164
7.8 Camera . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 165 7.8.1 Fundamental Principle . . . . . . . . . . . . . . . . . . . 165 7.8.2 Measurement Model . . . . . . . . . . . . . . . . . . . . 166 7.8.3 Calibration. . . . . . . . . . . . . . . . . . . . . . . . . . . 168 7.8.4 Some Toolboxes. . . . . . . . . . . . . . . . . . . . . . . 170
7.9 Summary. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 170 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 171 References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 172
8 Observability and Kalman Filter. . . . . . . . . . . . . . . . . . . . . 173 8.1 Observability . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 175 8.1.1 Linear System . . . . . . . . . . . . . . . . . . . . . . . . 175 8.1.2 Continuous-Time Nonlinear System . . . . . . . . . 179 8.2 Kalman Filter. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 183 8.2.1 Objective. . . . . . . . . . . . . . . . . . . . . . . . . . . . 184 8.2.2 Preliminary . . . . . . . . . . . . . . . . . . . . . . . . . . 184 8.2.3 Theoretical Derivation . . . . . . . . . . . . . . . . . . . 185 8.2.4 Multirate Kalman Filter . . . . . . . . . . . . . . . . . . 192 8.3 Extended Kalman Filter. . . . . . . . . . . . . . . . . . . . . . . . 193 8.3.1 Basic Principle . . . . . . . . . . . . . . . . . . . . . . . . 193 8.3.2 Theoretical Derivation . . . . . . . . . . . . . . . . . . . 193 8.3.3 Implicit Extended Kalman Filter . . . . . . . . . . . . 195 8.4 Summary. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 196 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 196 References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 196
9 State Estimation. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 199 9.1 Attitude Estimation . . . . . . . . . . . . . . . . . . . . . . . . . . . 201 9.1.1 Measuring Principle . . . . . . . . . . . . . . . . . . . . 201 9.1.2 Linear Complementary Filter . . . . . . . . . . . . . . 204 9.1.3 Nonlinear Complementary Filter . . . . . . . . . . . . 207 9.1.4 Kalman Filter. . . . . . . . . . . . . . . . . . . . . . . . . 208 9.2 Position Estimation . . . . . . . . . . . . . . . . . . . . . . . . . . . 209 9.2.1 GPS-Based Position Estimation . . . . . . . . . . . . 209 9.2.2 SLAM-Based Position Estimation . . . . . . . . . . . 210 9.3 Velocity Estimation . . . . . . . . . . . . . . . . . . . . . . . . . . 214 9.3.1 Optical-Flow-Based Velocity Estimation Method . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 214

Contents

Contents

xv
9.3.2 Aerodynamic-Drag-Model-Based Velocity Estimation Method . . . . . . . . . . . . . . . . . . . . . 218
9.4 Obstacle Estimation . . . . . . . . . . . . . . . . . . . . . . . . . . 220 9.4.1 Focus of Expansion Calculation . . . . . . . . . . . . 220 9.4.2 Time to Collision Calculation. . . . . . . . . . . . . . 221
9.5 Summary. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 222 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 223 References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 224
Part IV Control
10 Stability and Controllability . . . . . . . . . . . . . . . . . . . . . . . . 227 10.1 Definition of Stability . . . . . . . . . . . . . . . . . . . . . . . . . 229 10.2 Stability Criteria . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 230 10.2.1 Stability of Multicopters . . . . . . . . . . . . . . . . . 230 10.2.2 Some Results of Stability . . . . . . . . . . . . . . . . 231 10.3 Basic Concepts of Controllability . . . . . . . . . . . . . . . . . 236 10.3.1 Classical Controllability. . . . . . . . . . . . . . . . . . 236 10.3.2 Positive Controllability . . . . . . . . . . . . . . . . . . 237 10.4 Controllability of Multicopters . . . . . . . . . . . . . . . . . . . 238 10.4.1 Multicopter System Modeling . . . . . . . . . . . . . 238 10.4.2 Classical Controllability. . . . . . . . . . . . . . . . . . 240 10.4.3 Positive Controllability . . . . . . . . . . . . . . . . . . 240 10.4.4 Controllability of Multicopter Systems . . . . . . . 243 10.4.5 Further Discussions. . . . . . . . . . . . . . . . . . . . . 247 10.5 Summary. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 247 10.6 Appendix: Proof of Lemma 10.17. . . . . . . . . . . . . . . . . 248 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 249 References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 250
11 Low-Level Flight Control . . . . . . . . . . . . . . . . . . . . . . . . . . 251 11.1 Framework of Low-Level Flight Control of Multicopters. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 253 11.2 Linear Model Simplification. . . . . . . . . . . . . . . . . . . . . 254 11.2.1 Horizontal Position Channel Model. . . . . . . . . . 255 11.2.2 Altitude Channel Model . . . . . . . . . . . . . . . . . 255 11.2.3 Attitude Model. . . . . . . . . . . . . . . . . . . . . . . . 256 11.3 Position Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 256 11.3.1 Basic Concept . . . . . . . . . . . . . . . . . . . . . . . . 256 11.3.2 Euler Angles as Output . . . . . . . . . . . . . . . . . . 257 11.3.3 Rotation Matrix as Output . . . . . . . . . . . . . . . . 262 11.4 Attitude Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 265 11.4.1 Basic Conception . . . . . . . . . . . . . . . . . . . . . . 265 11.4.2 Euler Angles Based Attitude Control. . . . . . . . . 266 11.4.3 Rotation Matrix Based Attitude Control. . . . . . . 266 11.4.4 Robust Attitude Control . . . . . . . . . . . . . . . . . 267 11.5 Control Allocation . . . . . . . . . . . . . . . . . . . . . . . . . . . 274 11.5.1 Basic Concept . . . . . . . . . . . . . . . . . . . . . . . . 274 11.5.2 Implementation of Control Allocation in Autopilots . . . . . . . . . . . . . . . . . . . . . . . . . 275

xvi
11.6 Motor Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 277 11.6.1 Closed-Loop Control. . . . . . . . . . . . . . . . . . . . 277 11.6.2 Open-Loop Control. . . . . . . . . . . . . . . . . . . . . 277
11.7 Comprehensive Simulation. . . . . . . . . . . . . . . . . . . . . . 277 11.7.1 Control Objective and System Parameter Setting . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 277 11.7.2 Euler Angles Based Attitude Control Combined with Euler Angles Based Position Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 278 11.7.3 Rotation Matrix Based Attitude Control Combined with Rotation Matrix Based Position Control . . . . . . . . . . . . . . . . . . . . . . . 280 11.7.4 Robust Attitude Control . . . . . . . . . . . . . . . . . 282
11.8 Summary. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 283 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 284 References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 285
12 Position Control Based on Semi-Autonomous Autopilots . . . 287 12.1 Problem Formulation. . . . . . . . . . . . . . . . . . . . . . . . . . 289 12.1.1 Structure of Multicopter with SAA . . . . . . . . . . 289 12.1.2 Models of Three Channels . . . . . . . . . . . . . . . . 289 12.1.3 Objective of Position Control . . . . . . . . . . . . . . 291 12.2 System Identification. . . . . . . . . . . . . . . . . . . . . . . . . . 291 12.2.1 Procedure and Toolboxes of System Identification . . . . . . . . . . . . . . . . . . . . . . . . . 291 12.2.2 Model Used in System Identification. . . . . . . . . 293 12.3 Position Controller Design . . . . . . . . . . . . . . . . . . . . . . 296 12.3.1 PID Controller . . . . . . . . . . . . . . . . . . . . . . . . 297 12.3.2 Additive-Output-Decomposition-Based Dynamic Inversion Control . . . . . . . . . . . . . . . 297 12.4 Simulation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 300 12.4.1 System Identification. . . . . . . . . . . . . . . . . . . . 300 12.4.2 Control Design. . . . . . . . . . . . . . . . . . . . . . . . 304 12.4.3 Comparison of Tracking Performance . . . . . . . . 305 12.5 Summary. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 307 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 308 References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 308
Part V Decision
13 Mission Decision-Making . . . . . . . . . . . . . . . . . . . . . . . . . . 313 13.1 Fully-Autonomous Control . . . . . . . . . . . . . . . . . . . . . 315 13.1.1 Brief Introduction . . . . . . . . . . . . . . . . . . . . . . 315 13.1.2 Mission Planning . . . . . . . . . . . . . . . . . . . . . . 316 13.1.3 Path Planning. . . . . . . . . . . . . . . . . . . . . . . . . 318 13.2 Semi-Autonomous Control. . . . . . . . . . . . . . . . . . . . . . 328 13.2.1 Three Modes of SAC . . . . . . . . . . . . . . . . . . . 329 13.2.2 Radio Control . . . . . . . . . . . . . . . . . . . . . . . . 330 13.2.3 Automatic Control . . . . . . . . . . . . . . . . . . . . . 331 13.2.4 Switching Logic Between RC and AC . . . . . . . 333

Contents

Contents

xvii
13.3 Summary. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 335 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 335 References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 336
14 Health Evaluation and Failsafe . . . . . . . . . . . . . . . . . . . . . . 337 14.1 Purpose and Significance of Decision-Making Mechanism . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 339 14.2 Safety Issues . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 339 14.2.1 Communication Breakdown . . . . . . . . . . . . . . . 339 14.2.2 Sensor Failure . . . . . . . . . . . . . . . . . . . . . . . . 340 14.2.3 Propulsion System Anomaly . . . . . . . . . . . . . . 341 14.3 Health Evaluation . . . . . . . . . . . . . . . . . . . . . . . . . . . . 341 14.3.1 Pre-Flight Health Check . . . . . . . . . . . . . . . . . 341 14.3.2 In-Flight Health Evaluation . . . . . . . . . . . . . . . 342 14.4 Failsafe Suggestions . . . . . . . . . . . . . . . . . . . . . . . . . . 345 14.4.1 Communication Failsafe . . . . . . . . . . . . . . . . . 346 14.4.2 Sensor Failsafe . . . . . . . . . . . . . . . . . . . . . . . . 346 14.4.3 Propulsion System Failsafe . . . . . . . . . . . . . . . 346 14.5 A Safe Semi-Autonomous Autopilot Logic Design . . . . . 347 14.5.1 Requirement Description . . . . . . . . . . . . . . . . . 347 14.5.2 Multicopter State and Flight Mode Definition. . . 348 14.5.3 Event Definition . . . . . . . . . . . . . . . . . . . . . . . 348 14.5.4 Autopilot Logic Design . . . . . . . . . . . . . . . . . . 350 14.5.5 Demand and Decision-Making Table. . . . . . . . . 354 14.6 Summary. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 359 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 360 References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 361
15 Outlook . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 363 15.1 Related Technology Development. . . . . . . . . . . . . . . . . 365 15.1.1 Propulsion Technology . . . . . . . . . . . . . . . . . . 365 15.1.2 Navigation Technology . . . . . . . . . . . . . . . . . . 366 15.1.3 Interactive Technology . . . . . . . . . . . . . . . . . . 367 15.1.4 Communication Technology. . . . . . . . . . . . . . . 368 15.1.5 Chip Technology . . . . . . . . . . . . . . . . . . . . . . 368 15.1.6 Software Platform Technology . . . . . . . . . . . . . 369 15.1.7 Air Traffic Control Technology . . . . . . . . . . . . 369 15.1.8 Concluding Remark . . . . . . . . . . . . . . . . . . . . 370 15.2 Demand and Technology Innovation . . . . . . . . . . . . . . . 370 15.2.1 Innovation Level . . . . . . . . . . . . . . . . . . . . . . 370 15.2.2 Application Innovation . . . . . . . . . . . . . . . . . . 370 15.2.3 Performance Innovation. . . . . . . . . . . . . . . . . . 372 15.3 Analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 375 15.3.1 Risks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 375 15.3.2 Suggestions . . . . . . . . . . . . . . . . . . . . . . . . . . 375 15.4 Opportunities and Challenges . . . . . . . . . . . . . . . . . . . . 376 15.4.1 Opportunities . . . . . . . . . . . . . . . . . . . . . . . . . 376 15.4.2 Challenges . . . . . . . . . . . . . . . . . . . . . . . . . . . 376 References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 377
Index . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 381

Acronyms

2D 3D 4D ABCF AC AC ACAI ANN AOD AOPA API APM ASD ATE BMS C/A CCF CES CF CFD CIFER CoG DC DGPS DIC DMS DoC DoF DSP EE EFCF EFSM EKF EMF ESC ESI FAC FFT

Two-dimensional Three-dimensional Four-dimensional Aircraft-Body Coordinate Frame Alternating Current Automatic Control Available Control Authority Index Artiﬁcial Neutral Network Additive Output Decomposition Aircraft Owners and Pilots Association Application Programming Interface ArduPilot Mega Additive State Decomposition Automatic Trigger Event Battery Management System Coarse/Acquisition Camera Coordinate Frame Consumer Electronics Show Carbon Fiber Computational Fluid Dynamics Comprehensive Identiﬁcation from FrEquency Response Center of Gravity Direct Current Differential Global Position System Dynamic Inversion Control Degree-Minute-Second Degree of Controllability Degree of Freedom Digital Signal Processor Electronic Engineering Earth-Fixed Coordinate Frame Extended-Finite-State-Machine Extended Kalman Filter ElectroMotive Force Electronic Speed Controller External System Independence Fully-Autonomous Control Fast Fourier Transform
xix

xx

FM FOC FoE FPV FSM GCS GNSS GNU GPS GWN IARC ICF IEKF IMU INCOSE INS IoD IRF LGPL LIDAR LiPo LQE MBSE MEMS MIE MIMO NAVSOP NED NiMH OCV-SoC PCM PCS PD PEM PI PID PPM PPM PRBS PTAM PWM PWM RC RC RC RMAH RPM RPV RTK

Frequency Modulation Field Oriented Control Focus of Expansion First-Person View Finite-State-Machine Ground Control System Global Navigation Satellite System GNU’s Not Unix Global Position System Gaussian White Noise International Aerial Robotics Competition Image Coordinate Frame Implicit Extended Kalman Filter Inertial Measurement Unit International Council On Systems Engineering Inertial Navigation System Internet of Drones Inertial Reference Frame Lesser General Public License LIght Detection And Ranging Lithium Polymer Linear Quadratic Estimate Model-Based Systems Engineering Micro-Electro-Mechanical System Manual Input Event Multi-Input Multi-Output NAVigation via Signals of OPportunity North East Down Nickel Metal Hydride Open Circuit Voltage and SoC Pulse Code Modulation PieCeS Proportional-Derivative Prediction-Error Minimization Proportional-Integral Proportional-Integral-Derivative Parts-Per-Million Pulse Position Modulation Pseudo-Random Binary Signal Parallel Tracking And Mapping Pulse Width Modulation Pulse Width Modulated Remote Control Remote Controller Radio Controlled Reserved Maximum Ampere-Hour Revolution Per Minute Remote-Person View Real-Time Kinematic

Acronyms

Acronyms

xxi

RTL SAA SAC SCM SDK SF SLAM SoC SyNAPSE
TDoA ToF TSE TTC UAS UAV UHF UTM UWB VLoS VTOL

Return-To-Launch Semi-Autonomous Autopilot Semi-Autonomous Control Single Chip Microcomputer Software Development Kit Slow Flyer Simultaneous Localization And Mapping State-of-Charge Systems of Neuromorphic Adaptive Plastic Scalable Electronics Time Difference of Arrival Time of Flight Text-Based Systems Engineering Time To Contact/Collision Unmanned Aerial System Unmanned Aerial Vehicle Ultra High Frequency Unmanned aerial system Trafﬁc Management system Ultra Wide Band Visual Line of Sight Vertical Take-Off and Landing

Symbols

¼ % $ ,
 2 ? Â  B

C D P R; Rn; RnÂm
Rþ S Z Zþ SOð3Þ e1; e2; e3

In

0nÂm

x

x

x_ ;

dx dt

^x

½xÂ

ix

Equality

Approximately equal

Same order of magnitude or probability distribution

Deﬁnition. x , y means that x is deﬁned to be another name

for y, under certain assumption

Congruence relation

Belong to

Perpendicular

Cross product

Multiplication of quaternions Bðo; dÞ , fn 2 Rmjkn À ok dg; and the notation xðtÞ ! Bðo; dÞ means min kxðtÞ À yk ! 0
y2Bðo;dÞ

SDet¼ofÈcDomDp¼lexÀdnijuÁm; dbiej r¼s

0 if

i

6¼

É j;

diagonal

matrix

set

P ¼ fPjP [ 0g; positive deﬁnite matrix set

Set of real numbers, Euclidean space of dimension n;

Euclidean space of dimension n Â m

SSet¼ofÈpSosSit¼iveSrTeÉa;l

numbers symmetric

matrix

set

Integer

Positive SOð3Þ ,

iÈnAtejgAeTr A

¼

I3;

detðAÞ

¼

1;

A

2

R3É

Unit vectors, e1 ¼ ½ 1 0 0 T; e2 ¼ ½ 0 1 0 T;

e3 ¼ ½ 0 0 1 T

Identify matrix of dimension n Â n

Zero matrix of dimension n Â m

Scale

Vector, xi represents the ith element of vector x The ﬁrst derivative with respect to time t

An esti2mate of x

3

0 Àx3 x2

½xÂ , 4 x3 0 Àx1 5 ; x 2 R3

Àx2 x1 0 Â

Vector x represented in frame i: For example, ex;bx represent

the vector x represented in frame oexeyeze and frame obxbybzb;

respectively

xxiii

xxiv
A
AT AÀT Ay detðAÞ trðAÞ
q
qÃ qÀ1 ðÁÞðkÞ r Covðx; yÞ

C ðA; BÞ

EðxÞ Lf h

LifÀh O A;

CTÁ

vexðÁÞ VarðxÞ
jÁj kÁk kÁk1 a
bam
bdbaro Bf
cM cT

Matrix, aij represents the element of matrix A at the ith row and the jth column Transpose of A Transpose of inverse A Moore-Penrose pseudoinverse of A

Determinant of A Trace of a square matrix A; trðAÞ , Pn aii; A 2 RnÂn
i¼1
Quaternion, qeb represents the rotation from the frame obxbybzb to the frame oexeyeze
Conjugate quaternion
Inverse quaternion
The kth derivative with respect to time t

gradient







Covariance, Covðx; yÞ , E ðx À EðxÞÞ y À EðyÞT ,







CovðxÞ , E ðx À EðxÞÞ x À EðxÞT

Controllability matrix of pairs ðA; BÞ;

C ðA; BÞ ¼ ½B AB Á Á Á AnÀ1B

The expectation of the random variable x

The Lie derivative of the function h with respect to the vector

ﬁeld f The ith

order

derivative

of

Lf h;

Lif h

¼

rÀLifÀ1hÁf

Observability2matrix of 3pairs ðA; CÞ;

CT

À O A;

CTÁ

¼

6664

CTA ...

7775

ÀÁ

CTAnÀ1

vex ½xÂ , x

The variance of the random variable x;

VarðxÞ , E ðx À EðxÞÞ2

Absolute value

pﬃﬃﬃﬃﬃﬃﬃ

Euclidean norm, kxk , xTx; x 2 Rn

Inﬁnity norm, kxk1¼ maxfjx1j; Á Á Á ; jxnjg; x 2 Rn

Speciﬁc force of a multicopter, a 2 R3: For example, ea;ba

represent the vector a in frame oexeyeze and frame obxbybzb; respectively. axi ; ayi ; azi represent the speciﬁc force components along axes oixi; oiyi; oizi; respectively, i ¼ e,b: (m/s2) Calibrated speciﬁc force measured accelerometer in frame

obxbybzb, i.e., bam¼ ½ axbm aybm azbm T (m/s2) Bias of the altitude estimated by a barometer (m)

Control effectiveness matrix of a multicopter with efﬁciency

parameters Lumped parameter torque coefﬁcient (N Á ms2/rad2) Lumped parameter thrust coefﬁcient (N Á s2/rad2)

Symbols

Symbols

CR
dbaro dsonar f f
g J
kdrag
m M Mi bmm
em Mnr nr N obxbybzb oexeyeze p
pGPS
ph R^ R~ Rba Rm Tm
v

xxv
Constant parameter. It can represent the slope of the linear
relationship from the throttle command to the motor speed
Height measured by a barometer (m) Distance measured by an ultrasonic range ﬁnder (m) Total thrust acting on a multicopter (N) Thrust vector acting on a multicopter, f 2 R3. For example, ef;bf represent the vector f in frame oexeyeze and frame obxbybzb; respectively. fxi ; fyi ; fzi represent the component thrusts along axes oixi; oiyi; oizi; respectively, i = e,b. Or, it represents the propeller thrust vector (N) Acceleration of gravity (m/s2) Multicopter moment of inertia, J 2 R3Â3; Jxx; Jyy; Jzz are central principal moments of inertia, Jxy; Jyz; Jxz are products of inertia (kg Á m2) Drag coefﬁcient due to blade ﬂapping, kdrag 2 R þ . It can be used to determine the drags applied to the rotating blades
Multicopter mass (kg) Propeller torque (N Á m), or a positive integer Reaction torque generated by the ith propeller (N Á m) Calibrated magnetic ﬁeld measured by a magnetometer in frame obxbybzb, i.e., bmm ¼ ½ mxb myb mzb T Magnetic ﬁeld in frame oexeyeze Control effectiveness matrix, Mnr 2 R4Ânr Number of propulsors
Motor speed (RPM), or a positive integer
Aircraft-body coordinate frame Earth-ﬁxed coordinate frame Position of the center of a multicopter, p 2 R3: For example, ep;bp represent the vector p in frame oexeyeze and frame obxbybzb; respectively. pxi ; pyi ; pzi represent the position components along axes oixi; oiyi; oizi; respectively, i = e,b. (m) Position measured by a GPS receiver, pGPS 2 R3. For example, (pxGPS; pyGPS) represents the measured 2D location by a GPS receiver (m) Horizontal position, ph ¼ ½ pxe pye T (m) Rotation matrix estimate
Error between Rm and R^ ; i.e., R~ ¼ R^ TRm Rba 2 SOð3Þ represnets the rotation matrix rotating vectors from frame a to frame b Measured rotation matrix
Time constant. It can determine the dynamic response of
motors
velocity (also called linear velocity) of the center of a multicopter, v 2 R3. For example, ev;bv represent the vector v in frame oexeyeze and frame obxbybzb; respectively. vxi ; vyi ; vzi represent the velocity components along axes oixi; oiyi; oizi; respectively, i ¼ e,b: (m/s)

xxvi
v_ xi ; v_ yi ; v_ zi W
hm H
s
r wGPS wm wmag x
bxm -b -k -ss

Acceleration components of a multicopter along axes oixi; oiyi; oizi; respectively, i ¼ e,b: (m/s2) Matrix that represents the relationship between the attitude rate and the aircraft body’s angular velocity Measured pitch angle (rad) Eular angles, H ¼½ / h w T; where h; /; w are pitch angle, roll angle, and yaw angle, respectively Torque s 2 R3; where sx; sy; sz represent the torque components along axes obxb; obyb; obzb; respectively, (N Á m) Throttle command
Yaw angle estimated by GPS (rad)
Measured yaw angle (rad)
Yaw angle estimated by a magnetometer (rad)
Angular velocity of a multicopter, x 2 R3: For example, ex;bx represent the vector x in frame oexeyeze and frame obxbybzb; respectively. xxi ; xyi ; xzi represent the angular velocity components along axes oixi; oiyi; oizi; respectively, i ¼ e,b: (rad/s) Calibrated angular velocity measured by a gyroscope in frame
obxbybzb (rad/s) Angular speed of a propeller (rad/s)
Constant parameter. It is the constant term of the linear
relationship from the throttle command to the motor speed Angular speed of the kth propeller, -k 2 R þ (rad/s) Steady-state speed of a motor (rad/s)

Symbols

Introduction

1

Commonly used small aircraft (less than 20 kg [1, pp. 4–5] or 25 kg [2]) can be classiﬁed into ﬁxedwing aircraft, helicopters, and multicopters, among which multicopters are most popular so far. Before 2010, ﬁxed-wing aircraft and helicopters took overwhelming dominance in the ﬁeld of both aerial photography and model aircraft sports. However, in the following years, due to the ease-of-use, the multicopter became a new star. During this period, since the autopilot and the other components were sold separately, multicopters were often only assembled by some professional personnel. Moreover, the parameters had to be tuned in accordance with the payload. At the end of 2012, DJI (Da-Jiang Innovations Science and Technology Co., Ltd.) released an all-in-one solution, that is, the ready-to-ﬂy1 Phantom quadcopter. Users could pilot it in a short time. Moreover, DJI’s Phantom only cost about one thousand dollars. It was a huge saving in comparison with some commercial multicopters, such as MD4-200 or MD4-1000 from Microdrones GmbH in Germany. Since the Phantom quadcopter reduced the difﬁculty and cost of aerial photography, its market share expanded rapidly and took dominance soon after. In the following 2 years, there are a lot of media released about multicopters in terms of technologies, products, applications, and investigations. Today, multicopters have consolidated its dominance in the market of small aircraft. The speed they occupy the market is similar to that of the mobile Internet defeating the traditional Internet, or the smart mobile phones defeating the traditional mobile phones. The development of multicopters is becoming increasingly popular because of several factors, i.e., stories of success, the advancement in related technologies, the promotion of open source autopilots, participation of talented professionals, popularization of multicopters, continual capital investment, and preferential policy support. This chapter aims to answer the question as below:
Why do people choose small multicopters eventually?
The answer to this question involves the introduction to multicopters, the performance evaluation of small aircraft, and the brief history of multicopters. Most contents in this chapter are the revision and extension of a magazine paper in Chinese published by the author [3].

1A ready-to-ﬂy kit is a radio controlled aircraft that is fully built with no assembly required. It includes a transmitter and a receiver.

© Springer Nature Singapore Pte Ltd. 2017

1

Q. Quan, Introduction to Multicopter Design and Control, DOI 10.1007/978-981-10-3382-7_1

2

1 Introduction

Bamboo-Copter
Long time ago, the ancient Chinese had known that rotation could produce thrust for flight. In the fourth century AD, Hong Ge, best known for his interest in Daoism, alchemy, and longevity techniques, had already talked about rotorcraft. At that time, there was a toy named bamboo-copter. This kind of toy consisted of bamboo-blades connected with one end of a stick by a thread, which was rapidly spun and released into flight by tugging the thread. The bamboo-copter had an important impact on European aeronautic pioneers. George Cayley, the inventor of modern aeronautics, made a Chinese-style bamboo-copter (which he later called “rotary wafts”) in 1809, which could fly 7–8.33 m high. He then improved the rotor of the prototype, and the bamboo-copter could fly 30 m high. In 1853, George Cayley drew down his helicopter rotors. It was to be one of the key elements in the birth of modern aeronautics in the West.

1.1 Concepts

3

1.1 Concepts

1.1.1 Classification of Commonly Used Small Aircraft

As shown in Fig. 1.1, commonly used small aircraft are classiﬁed into three types. (1) Fixed-wing aircraft. As shown in Fig. 1.1a, wings are permanently attached to the airframe of
the aircraft. Most civil aircraft and ﬁghters are ﬁxed-wing aircraft. Its propulsion system generates a forward airspeed, which produces the lift to balance the vehicle’s weight. Based on this principle, ﬁxedwing aircraft must maintain a certain forward airspeed, and therefore cannot take off and land vertically. In comparison with traditional helicopters, a ﬁxed-wing aircraft has a much simpler structure and is able to carry a heavier payload over a longer distance while consuming less power. The disadvantage of the ﬁxed-wing solution is the requirement of a runway or launcher for takeoff and landing.
(2) Single rotor blade helicopter. As shown in Fig. 1.1b, a helicopter is a type of rotorcraft in which lift is supplied by rotors directly. A single rotor helicopter has four ﬂight control inputs, which are the cyclic, the collective, the anti-torque pedals, and the throttle, respectively. The collective is used to control the rotor’s angle of attack. Although the lift of helicopter is mainly controlled by the collective and the throttle, the fast dynamic response of the lift is adjusted by the collective control. From the introduction above, it is understood that the single rotor blade helicopter has the ability of Vertical TakeOff and Landing (VTOL) since the lift is not controlled by the velocity (also called linear velocity) of the airframe. Therefore, no runway or launcher is required for takeoff and landing. Compared with a ﬁxed-wing aircraft, it does not have the advantage in terms of the time of endurance. Moreover, its complex structure incurs a high maintenance cost.
(3) Multicopter. Multicopter is also called multirotor2 or multirocopter. It can be considered as a type of helicopter, which has three or more propellers. It also has the ability of VTOL. The most popular multicopter is the quadcopter, as shown in Fig. 1.1c. A quadcopter has four control inputs, which are the four propeller angular speeds. Unlike the single rotor helicopter, the rapid lift adjustment is realized by the control of propeller angular speeds. Due to multiple-rotor structure, their anti-torque moments can be canceled out by each other. Thanks to the simple structure, a multicopter is easy-touse and features high reliability and low maintenance cost. But, its payload capacity and the time of endurance are both compromised. What are the differences between a multicopter and a quadcopter then? As shown in Fig. 1.2, a multicopter, such as a hexacopter, has multiple propellers to generate the

(a) Fixed-wing aircraft
Fig. 1.1 Commonly used small aircraft

(b) Helicopter

(c) Multicopter

2In fact, the deﬁnition of rotors are different from that of propellers. The airplane often uses propellers to produce thrust, whereas the helicopters use rotors to produce lift. Unlike the airplane propeller (often ﬁxed blade pitch angle), the blade pitch angle of the rotor of the helicopter is controlled by swashplate. From the deﬁnition, it should be said that multicopters are often mounted with propellers rather than rotors [5, pp. 79–85], because the propellers of multicopters often have ﬁxed blade pitch angles. However, the terms “quadrotor” and “multirotor” are widely used in the world. Therefore, the two terms “rotor” and “propeller” are not distinguished in this book strictly. But the term “propeller” is preferred.

4

1 Introduction

thrust, pitching moment, rolling moment, and yawing moment. On the other hand, a quadcopter only has four propellers to generate the thrust and the three-axis moments. That means there are hardly any fundamental differences but allocation of the thrust and moments to these propellers.
Besides the three types of drones introduced above, there are some combinations of them. As shown in Fig. 1.3a, a type of compound helicopter combines a tricopter and a ﬁxed-wing aircraft [4]. It has abilities of both high-speed forward ﬂight and VTOL. A compound helicopter as shown in Fig. 1.3b combines a quadcopter (bottom), a ﬁxed-wing aircraft, and a helicopter [6]. It also has abilities of both high-speed forward ﬂight and VTOL. In Fig. 1.4, a compound multicopter is shown, which combines a coaxial rotor and a quadcopter [7]. The maximum allowable payload is increased as a result.

Fig. 1.2 Thrust and moments of quadcopter and hexacopter

(a) A tilt-rotor aircraft
(b) A compound helicopter
Fig. 1.3 Transition of compound helicopters from the hover mode to the forward ﬂight mode. a Rotors tilt to achieve mode transition; b rotors are all ﬁxed to the airframe, while the airframe tilts to achieve mode transition

1.1 Concepts

5

Fig. 1.4 A compound multicopter. The middle coaxial propellers with a slow dynamic response provides the main lift, while the surrounding quadcopter can change the propeller angular speeds rapidly to improve the dynamic response of attitude

1.1.2 Unmanned Aerial Vehicle and Model Aircraft

(1) Unmanned Aerial Vehicle or Uninhabited Aerial Vehicle (UAV), i.e., an aircraft without pilots on board. The ﬂight of UAVs may be controlled either autonomously by onboard computers or by the remote control from a pilot on the ground or in another vehicle. UAVs are also called drones. In this book, small UAVs, namely small drones, are mainly considered.
(2) Model Aircraft. “An aircraft of limited dimensions, with or without a propulsion device, not able to carry a human being and to be used for aerial competition, sport or recreational purposes” is called a model aircraft [8]. It is also referred to as Radio Controlled (RC) model aircraft or RC aircraft. For the whole ﬂight, an RC model aircraft must be within the Visual Line of Sight (VLoS) of the remote pilot. The statutory parameters of a model aircraft operation are outlined in [9, 10].
As shown in Table 1.1, differences between drones and model aircraft are summarized as follows:
(1) Composition A small drone is more complex than a model aircraft in terms of its composition. A drone consists of an airframe, a propulsion system, an autopilot, a task system, a communication link system, and a Ground Control Station (GCS), etc. A model aircraft normally consists of an airframe, a propulsion system, a simple stabilizing control system, an RC transmitter and receiver system, etc.
(2) Operation Drones are controlled either autonomously by onboard computers or by remote pilots on the ground or in another vehicle, whereas model aircraft are only controlled by remote pilots.
(3) Function Drones are often used for the purpose of military or special civil applications. They are expected to carry out particular missions. Model aircraft are more like toys.
For most multicopters, they have two high-level control modes: Semi-Autonomous Control (SAC) and Fully-Autonomous Control (FAC). Many open source autopilots support both modes. The SAC mode implies that autopilots can be used to stabilize the attitude of multicopters, and also, they can help multicopters to hold the altitude and position. Taking the open source Autopilot Ardupilot Mega (APM)3 for example, under the SAC mode, users are allowed to choose one of the following modes:

Table 1.1 Differences between drones and model aircraft

Drones

Composition Operation Function

Complex Autonomous control and remote control Military or special civil applications

Model aircraft Simple Remote control Entertainment

3Refer to http://ardupilot.org for details.

6

1 Introduction

“stabilize mode,” “altitude hold mode,” or “loiter mode.” Under such a high-level mode, a multicopter will be still under the control of remote pilots. Therefore, it is more like a model aircraft. On the other hand, the FAC mode implies that the multicopter can follow a pre-programmed mission script stored in the autopilot which is made up of navigation commands, and also can take off and land automatically. Under such a mode, remote pilots on the ground only need to schedule the tasks. The multicopter is then similar to a drone. Some multicopter autopilots support both modes which are able to switch by remote pilots, with each mode corresponding to some particular applications. In this book, multirotor drones and multirotor model aircraft are both called as multicopters for simplicity.

1.2 Remote Control and Performance Evaluation
Here comes a question then: Why do people choose multicopters? In order to answer this question, the remote control has to be understood ﬁrst and then the performance evaluation of commonly used small aircraft.

1.2.1 Remote Control of a Multicopter
For simplicity, the introduction to the ﬂight principle of a multicopter is based on a quadcopter, which is propelled by four propellers. A quadcopter can control four motors to change the propeller angular speeds which further change the thrust and moments. According to the classical mechanic theory, a force can be translated on the rigid body and turn into a force and an associated moment, while the moment can be translated directly into the center axis. As a result, the thrust and moments about its center are regulated. With the changed thrust and moments, the attitude and position of a quadcopter are controlled. As shown in Fig. 1.5a, at a hover position, all propellers are spinning at the same angular speed with propellers #1 and #3 rotating counterclockwise and propellers #2 and #4 clockwise. Taking the propeller #1 as an example, as shown in Fig. 1.5b, the reaction torque of this propeller can be translated directly into the center axis, while the translation of the thrust generates a pitching and a rolling moment simultaneously. As there are four thrusts to be regulated, the associated moments can be compensated each other. In the case of hovering ﬂight, the sum of the four produced thrusts compensates for the weight of the quadcopter. The thrusts of four propellers are the same and the moments of four propellers sum to zero.4
Basically, the movement of a quadcopter falls into one of the following four basic types.5
(1) Upward-and-downward movement As shown in Fig. 1.6, the propeller angular speeds are increased by the same amount. As a result, the thrust incurred will be increased, but moments of the four propellers still sum to zero. In this case, if

4If the blades are spinning counterclockwise, then the airframe will start to rotate clockwise due to the torque reaction. This is due to Newton’s Third Law, which states that every action has an equal and opposite torque reaction. Therefore, most helicopters, namely the single rotor helicopter, have a small rotor placed vertically at the tail to compensate for the opposite reaction. Since a quadcopter has four propellers, the sum of the opposite torque reaction of four propellers can be zero, which is also used to control the yaw of a quadcopter. 5Altitude hold mode is considered. In fact, in most cases, the altitude will be held as same as possible.

1.2 Remote Control and Performance Evaluation

#4 Thrust

Rotation direction

Reaction torque

7
#1

#3 Thrust

#2 (a) A quadcopter in hovering flight

Reaction torque

Thrust

Thrust

Rolling moment

Reaction torque

Reaction torque

Pitching moment

(b) The process of Propeller #1 thrust and moments acting on the center of the quadcopter

Fig. 1.5 A quadcopter in hovering ﬂight

the quadcopter is placed on a leveled ground, it will move up once the thrust is greater than the weight of the quadcopter. Otherwise, if the propeller angular speeds are decreased by the same amount, the quadcopter will move down. Generally, the upward-and-downward movement is controlled by the RC transmitter as shown in Fig. 1.7.6

6Left stick operates upward-and-downward and yaw movements, and right stick operates forward-and-backward and leftward-and-rightward movements. This mode is commonly used in North America and other parts of the world including China. This is one RC transmitter mode, which can be changed to other modes.

8

Thrust #4

Rotation direction

Reaction torque #3

1 Introduction #1
#2

Fig. 1.6 Upward movement of a quadcopter

Fig. 1.7 Operation of an RC transmitter for the upward-and-downward movement
(2) Forward-and-backward movement As shown in Fig. 1.8, the angular speeds of propellers #1, #4 are decreased by the same amount, while the angular speeds of propellers #2, #3 are increased by the same amount. This will lead to a moment which makes the quadcopter pitch forward. Then, the thrust has a forward component. However, at this moment, the vertical component of the thrust is decreased, which will not be equal to the weight of the quadcopter. So, based on the previous change, the four propeller angular speeds should be further increased by the same amount to compensate for the weight. Similarly, the backward movement can be also achieved. Generally, the forward-and-backward movement is controlled by the RC transmitter as shown in Fig. 1.9.
(3) Leftward-and-rightward movement As shown in Fig. 1.10, the angular speeds of propellers #1, #2 are decreased by the same amount, while the angular speeds of propellers #3, #4 are increased by the same amount. This will lead to a moment

1.2 Remote Control and Performance Evaluation

#4 Thrust

Rotation direction

Reaction torque

9 #1

#3

#2

Fig. 1.8 Forward movement of a quadcopter

Fig. 1.9 Operation of an RC transmitter for the forward-and-backward movement
which makes the quadcopter roll to the right. Then, the thrust has a right component. However, the vertical component of the thrust is decreased, which will not be equal to the weight of the quadcopter. So, based on the previous change of the four propellers, the four propeller angular speeds should be further increased by the same amount to compensate for the weight. Similarly, the leftward movement can be also achieved. Generally speaking, the leftward-and-rightward movement corresponds to the operation of the RC transmitter as shown in Fig. 1.11.
(4) Yaw movement As shown in Fig. 1.12, the angular speeds of propellers #2, #4 are decreased by the same amount, while the angular speeds of propellers #1, #3 are increased by the same amount. This will lead to zero moments both in the forward-and-backward and in the leftward-and-rightward directions. Owing to Newton’s Third Law, every action has an equal and opposite torque reaction. Therefore, the clockwise yaw moment is increased because the angular speeds of propellers #1, #3 are increased in the counterclockwise direction. On the other hand, the counterclockwise yaw moment of the quadcopter is decreased because the angular speeds of propellers #2, #4 are decreased in the clockwise direction. Finally, this results in a clockwise yaw moment of the quadcopter. With this moment, the quadcopter

10

1 Introduction

Fig. 1.10 Rightward movement of a quadcopter
Fig. 1.11 Operation of an RC transmitter for the leftward-and-rightward movement
will turn clockwise and then change its orientation. Generally, the yaw movement corresponds to the operation of the RC transmitter as shown in Fig. 1.13.
1.2.2 Performance Evaluation Performance evaluation of a small aircraft can be carried out from the following ﬁve factors.
(1) Ease-of-use: the ease of learning in order to operate the remote control of a small aircraft during hover and in maneuvers.
(2) Reliability: often quantiﬁed as the mean time between failures. (3) Maintainability: the characteristic of design and assembly which determines the probability that a failed component can be restored to its normal operable state within a given time frame, following prescribed practices and procedures. Its two main components are serviceability (ease of conducting scheduled inspections and servicing) and reparability (ease of restoring service after a failure). (4) Time of endurance: the maximum ﬂight time of an aircraft with a prescribed payload and mission.

1.2 Remote Control and Performance Evaluation

11

Fig. 1.12 Clockwise yaw movement of a quadcopter
Fig. 1.13 Operation of an RC transmitter for the yaw movement
(5) Payload capacity: the maximum weight of payload which an aircraft can take under a prescribed throttle (80% of the total throttle for example) and mission.
Normally, the combination of the ﬁve performance factors in fact determines the user experience. By taking the three small aircraft mentioned in Sect. 1.1.1 for example, their user experiences are analyzed in the following.
(1) Ease-of-use. The remote control of a multicopter is the simplest because a multicopter has the ability of VTOL and can hover in the air. As shown in Sect. 1.2.1, the two sticks of an RC transmitter correspond to the forward-and-backward, leftward-and-rightward, upward-and-downward, and yaw movements, respectively. Since the four movements are decoupled from each other, the principle of the remote control of a multicopter is simple. Generally, an adult will understand and master the operation skills basically in several hours. Moreover, the controller design is easy and the controller parameters can also be tuned easily. The difﬁculty in controlling a helicopter lies in strongly coupled modes and highly nonlinear dynamics. These also make the autopilot design difﬁcult. Moreover, it is hard to tune the controller parameters. The ﬂying operation of a ﬁxed-wing aircraft needs to be

12

1 Introduction

Table 1.2 Comparisons of user experiences of three types of small aircraft (More “+” implies better)

Fixed-wing aircraft

Single rotor blade helicopters

Multicopters

Ease-of-use

++

+

+++

Reliability

++

+

+++

Maintainability

++

+

+++

Time of endurance

+++

++

+

Payload capacity

++

+++

+

performed in a large air space. Since it cannot stay still in the air, the remote pilots have to perform the control actions frequently. For model helicopters and model airplanes, both of them will cost users a long time to learn to operate and control. Based on the analysis above, the multicopter has the best ease-of-use performance.
(2) Reliability. The multicopter has a high reliability in terms of the mechanical structure. Both ﬁxed-wing aircraft and helicopters have turning joints in their airframes. As a result, there is always mechanical wear to some degree. On the contrary, there is hardly any mechanical wear in multicopters because no turning joints are involved in the airframe and brushless Direct Current (DC) motors are adopted.
(3) Maintainability. Multicopters are the easiest to maintain. They have simple structure and therefore can be assembled with little effort. For example, if motors, Electronic Speed Controllers (ESCs), batteries, propellers, or airframes fail, they can be replaced easily. Conversely, both ﬁxed-wing aircraft and helicopters have more components and complex structures. As a result, their assembly is not easy.
(4) Others issues. The energy conversion efﬁciency of multicopters is the lowest. So their ﬂight time and payload capacity do not have any advantages compared with the ﬁxed-wing aircraft and helicopters. Their overall performances are shown in Table 1.2.
From Table 1.2, multicopters have remarkable advantages in terms of ease-of-use, reliability, and maintainability, while they have disadvantages in terms of time of endurance and payload capacity. The former three performance factors are fundamental and more important, whereas the time of endurance and payload capacity are more case sensitive and sometimes can be compromised or even sacriﬁced. For example, in the ﬁeld of aerial photography, the ﬂight time can be extended by replacing the battery. On the other hand, the payload capacity can be increased by increasing the number or the radius of propellers. In practice, remote pilots will choose different multicopters for particular tasks. Therefore, it can be concluded that multicopters beat other competitors in terms of user experience. Moreover, multicopters’ user experience will continue to be updated. For the three types of small aircraft, the easeof-use characteristic is related to the ﬂight principle; meanwhile, reliability and maintainability depend on the structure. As the three performances are hard to improve, multicopters will outperform the other two at least in the consumer market for quite a long time. On the other hand, with the development in technologies of batteries, material, and motors, the time of endurance and the payload capacity will be both improved. As a consequence, multicopters will exhibit satisfactory behaviors in more aspects and will be unsurprisingly the choice of more and more customers.

1.2.3 Bottleneck
There also exist bottlenecks during the development of multicopters. The decoupled movements and simple structure depend on the rapid change of thrust and moments by the rapid change of the propeller angular speeds. Due to this principle, it is difﬁcult to extend multicopters to a larger size.

1.2 Remote Control and Performance Evaluation

13

Fig. 1.14 Volocopter VC200
(1) First, roughly, the longer the radius of a propeller is, the slower the dynamic response of rotors will be. Comparatively, helicopters increase or decrease overall lift by altering the angle of attack for all blades collectively by equal amounts at the same time, resulting in ascent and descent behavior.
(2) Secondly, the longer the radius of a propeller is, the more fatigue it is in the rotor hub due to the blade-ﬂapping effects. Blade ﬂapping is the upward-and-downward movement of a rotor blade, which will occur during ﬂight of multicopters. Results caused by blade-ﬂapping effects are similar to breaking a soft iron wire by bending it toward one direction and then the opposite repetitively. Multicopters are typically equipped with lightweight, ﬁxed-pitch plastic propellers, because propellers that are too rigid can lead to transmission of these aerodynamic forces directly through to the rotor hub. This may cause a mechanical failure to the motor mounted or to the airframe itself. Therefore, large helicopters adopt ﬂapping hinges. With ﬂapping hinges, none of the bending forces or rolling moments are transferred to the body of the helicopter. Therefore, to provide a large payload capacity, each propeller of multicopters has to be modiﬁed to have turning joints, such as ﬂapping hinges in helicopters or control vanes in ducted air vehicles [11]. This will make the modiﬁed multicopters complex and further reduce the intrinsic advantages on performance such as ease-of-use, reliability, and maintainability.
Nevertheless, there is a way to increase the payload capacity, which is to use more small propellers to replace large rotors. For example, a German company designed a multicopter VC200, as shown in Fig. 1.14, which can carry two people and achieves more than one hour ﬂight time [12]. This solution circumvents the complex mechanical structure and has a good modularization. The cost paid is that the weight of aircraft is increased, and the time of endurance is sacriﬁced. Moreover, since it has eighteen motors, the failure rate of one motor is increased. However, there is much control redundancy. By some smart control allocation algorithms, the ﬂight safety can be improved. Overall, compared with a quadcopter of a same size, VC200 does not have advantages on reliability, maintainability, time of endurance, and payload capacity, but it is a compromise as a full-scale multicopter. Therefore, it is unnecessary to have so many propellers for a small multicopter. For a manned aircraft, the design of VC200 is acceptable. However, the heavier an aircraft is, the safer it needs to be, especially for manned aircraft. This is related to the airworthiness,7 which is a time-consuming and costly process. Therefore, people would rather choose small or micro-multicopters.
1.3 History of Multicopters
In the previous section, the reason that people choose small or micro-multicopters has been discussed. However, there is another question usually asked: Why are multicopters more popular now than they were before 2005? The answer can be drawn from the history of the development of multicopter technology. Generally, the history can be divided into ﬁve periods: dormancy period (before 1990), growing
7Airworthiness is the measure of an aircraft’s suitability for safe ﬂight. Certiﬁcation of airworthiness is initially conferred by a certiﬁcate of airworthiness from a national aviation authority and is maintained by performing the required maintenance actions.

14

1 Introduction

period (1990–2005), development period (2005–2010), activity period (2010–2013), and booming period (2013–).

1.3.1 The First Stage (Before 1990): Dormancy Period [13, pp. 1–2], [14]
As early as 1907 in France, guided by Charles Richet, the Breguet Brothers built their ﬁrst human carrying helicopter—and they called it the Breguet-Richet Gyroplane No. 1, which was a quadcopter, as shown in Fig. 1.15a. The ﬁrst attempt of ﬂight was undertaken between August and September of 1907. The witnesses said they saw the quadcopter lifted 1.5 m into the air for a moments and landed soon after. This failure was caused by the impractical design. Despite ended up a failure, it might be the earliest attempt to build the multicopter [15]. Etienne Oemichen, another engineer, also began experimenting with rotating-wing designs in 1920. His ﬁrst model failed to lift from the ground. However, after some calculations and redesigns, his second aircraft, the Oemichen No. 2, as shown in Fig. 1.15b, established a world record for helicopters in 1923 by remaining airborne for up to fourteen minutes. The army also had an interest in vertical lift machines. In 1921, George De Bothezat and Ivan Jerome were hired to develop one for the US Army Air Corps. Their quadcopter, as shown in Fig. 1.15c, was designed to take a payload of three people in addition to one pilot and was supposed to reach an altitude of one hundred meters, but the result was that it only managed to lift ﬁve meters. Since these early designs suffered from poor engine performance and could only reach a couple of meters high, not much improvement was done to the quadcopter design during the following three decades. It was not until the mid-1950s the ﬁrst real quadcopter was ﬂown, which was designed by Marc Adman Kaplan. His quadcopter design, Convertawings Model “A”, as shown in Fig. 1.15d, was ﬁrst ﬂown in 1956 and proved to be a great success. The one ton heavy quadcopter was able to hover and maneuver with its two 90 horsepower engines. Controlling this quadcopter did not require additional propellers perpendicular to the main rotors, but was realized by varying the thrust of the main rotors instead. Even though this quadcopter ﬂew successfully, people saw little interest in it because they expected heavy payload and this one could not compete with the conventional aircraft in terms of performance speciﬁcations such as speed, payload, ﬂying range, and time of endurance. In the 1950s, the US Army continued to develop several VTOLs. In 1957, the Army contracted with Curtiss-Wright to develop VZ-7 as a prototype ﬂying jeep, to carry small amounts of men and machinery over rough terrain, as

“”
Fig. 1.15 Some multicopters in the dormancy period (Photograph courtesy of http://www.aviastar.org)

1.3 History of Multicopters

15

shown in Fig. 1.15e. Curtiss-Wright produced two VZ-7 prototypes in 1958. The machines were proved to be very easy to hover and maneuver. However, they were not able to meet the altitude and speed requirements speciﬁed in the Army’s contract. The VZ-7 program was canceled in the mid-1960s when it was realized that the job for which “ﬂying jeeps” were designed could be performed more easily and efﬁciently by conventional helicopters. Before 1990, since all the components of a multicopter including motors and sensors were cumbersome, the multicopter was normally designed in a full-scale one. As analyzed in Sect. 1.2.2, all full-scale multicopters in those days used turning joints to change the lift to tune the attitude. They did not have advantages over full-scale single rotor helicopters. That is why US Army canceled these projects. Since then, multicopters were nearly abandoned. During the following 30 years, there was not much improvement and this type of aircraft attracted little attention.

1.3.2 The Second Stage (1990–2005): Growing Period
(1) Research Until the 1990s, with the development of Micro-Electro-Mechanical System (MEMS), Inertial Measurement Unit (IMU) weighting several grams emerged. Although MEMS sensors have been designed, the low-cost MEMS IMUs produce big noise. Therefore, the measurement they took cannot be used directly. The research started to receive more and more attention on how to get rid of the noise in the attitude measurement of MEMS IMUs. The design of a small multicopter requires not only algorithms but also microcomputers on which these algorithms can run. At this stage, the computation speed of microcomputers such as Single Chip Microcomputers (SCMs) and Digital Signal Processor (DSP) had been improved signiﬁcantly. These provided a possibility to design small multicopters. The researchers at universities started to build models and design control algorithms. Also, some pioneers started to build their own real multicopters [16–20].
(2) Products [13, 21] As the concept of the quadcopter drifted away from military use only, it began to make its way to approach consumers via the RC toy market. During the early 1990s, a mini quadcopters, called Keyence Gyrosaucer (Fig. 1.16a), was marketed in Japan. It may be the earliest generation of mini quadcopter. Designed for indoor use, this mini quadcopter, with body and propellers made of polystyrene foam, used two gyroscopes for “posture and turning control.” The user could get about three minutes of ﬂight time with a single charge [22]. Back to the USA during the early 1990s, engineer Mike Dammar developed his own battery-powered quadcopter. Working at Spectrolutions Inc., he marketed the device called Roswell Flyer (Fig. 1.16b) in 1999, which was later adopted into a company called Draganﬂy. Under this new brand, there were a series of developments over the years [23]. In 2002, a quadcopter was invented and developed in the Jugend forscht (young researchers) competition in Germany [24]. It was called Silverlit X-UFO later (Fig. 1.16c).

1.3.3 The Third Stage (2005–2010): Development Period
(1) Research Since 2005, more and more researchers paid attention to multicopters and published a large amount of papers. Moreover, some of them were not satisﬁed with simulation and started to build their own multicopters to test corresponding algorithms, especially the attitude control algorithms [25–31]. Although the algorithms were easy to design, it was not easy for a researcher to build a real multicopter, because E-commerce then was not mature and popular like it is today. Even if some multicopters were designed,

16

1 Introduction

(a) Gyro Saucer 1

(b) Roswell Flyer

Fig. 1.16 Some multicopters in the growing period

(c) Silverlit X-UFO

(a) MD4-200
Fig. 1.17 Some products in the development period

(b) DraganflyerX6

they were often not very reliable. Most of the time was spent on ﬁnding appropriate components, designing, and testing. Skipping the arduous work of building quadcopters themselves, some researchers utilized the existing reliable commercial quadcopters and the optical motion-capture system to build testing environments, such as “real-time indoor autonomous vehicle test environment” by the team of Jonathan P. How at Massachusetts Institute of Technology [32] and “the Grasp multiple micro-UAV test bed” by the team of Vijay Kumar at the University of Pennsylvania [33]. Based on the testing environments, some complex tasks were completed indoor.
(2) Products Microdrones GmbH was founded in October 2005. The ﬁrst product generation, namely MD4-200 as shown in Fig. 1.17a, was launched in April 2006. Over 250 units were sold within a short time. In 2010, MD4-1000 joined the family, which immediately became a benchmark [34]. These products had achieved a great success in the commercial market. In October 2006, a large community of MikroKopter autopilots was created by Holger Buss and Ingo Busker. They released an open source autopilot MikroKopter. As early as mid-2007, the aircraft equipped with MikroKopter could hover steadily. In a short time, other components were added. Therefore, it became possible to perform semi-autonomous ﬂights [35]. In 2007, the two inventers of the Silverlit X-UFO teamed with other two prizewinners at Jugend forscht to start Ascending Technologies GmbH in Germany. This company designed multicopters for professional, civil, and research purposes [24]. In 2008, Draganﬂyer designed the Draganﬂyer X6 as shown in Fig. 1.17b. It featured carbon ﬁber construction, a folding airframe, autopilot technology, a wide variety of payloads, and a unique handheld controller. It was recognized as one of the “Best of What’s New” awardees by Popular Science in 2008 [23]. At that time, since the commercial multicopters were expensive, they were far out of sight of mass customers. Similarly, consumer multicopters, such as Draganﬂyer IV with a camera or X-UFO without a camera, were also a little expensive as a toy. Moreover, they nearly cannot bear any payload and were not easy to control

1.3 History of Multicopters

17

because they did not have Global Positioning System (GPS) receivers installed. More importantly, since smartphone devices8 had not been invented, it could be hardly used for entertainment purpose or taking pictures. Therefore, it was not worthwhile for consumers to buy such a toy. Meanwhile, in 2004, the Parrot Company initiated a project named “AR. Drone”, aiming at producing a micro-UAV for the mass market of video games and home entertainment. The project was publicly presented at the Consumer Electronics Show (CES) 2010. On August 18, 2010, the AR. Drone was released. This project involved engineers from Parrot company with the technical support of SYSNAV and its academic partner MINES Paris-Tech for navigation and control design [36]. Multicopters were receiving more and more attention. In 2007, in the business column of Nature, an article was published to discuss the commercialization time line of drones [37].

1.3.4 The Fourth Stage (2010–2013): Activity Period
(1) Research In February 2012, Vijay Kumar at the University of Pennsylvania made a speech at TED9 conference. Several videos demonstrated that ﬂeets of tiny ﬂying robots performed a series of intricate maneuvers, working together on tasks [38]. This talk revealed the huge potential of multicopters. In 2012, IEEE Robotics and Automation Magazine published a special issue on aerial robotics and the quadcopter platform, which summarized and demonstrated some state-of-the-art technologies [39]. At this stage, many open source autopilots about multicopters emerged, which lowered the threshold of building multicopters for beginners. Table 1.3 shows the major projects of open source autopilots and their links.
(2) Related industries The iPhone 4, released on June 24, 2010, featured full 9DoF motion sensing, including a three-axis accelerometer, three-axis gyroscope, and electronic compass (or three-axis magnetometer). These sensors facilitated much better rotational motion sensing, gaming, image stabilization, dead reckoning for GPS, gesture recognition, and other applications. With the advances in the smartphone technology, these MEMS sensors found many applications and received wide attention. The size, cost, and power consumption were reduced further. On the other hand, because of their wide applications, the companies had more motivation to make the GPS receivers minimized in its size and cheaper in price. At that time, the world’s smallest GPS receiver was smaller than a penny and weighed only 0.3 g [40]. Smart devices could control and receive video signals by Wi-ﬁ within a certain distance. Propelled by the requirement of smart devices, volumetric energy density of Lithium-ion battery was being increased. The development of related technologies in turn boosted the development of multicopters.
(3) Products As shown in Fig. 1.18a, the quadcopter, called AR. Drone, was very successful in the toy market. Its technology and ideology were also very advanced. At ﬁrst, it used a downward-looking camera to measure optical ﬂow and two ultrasonic range ﬁnders to measure the altitude. Based on these, its velocity could be obtained by using estimation algorithms. This made AR. Drone able to hover indoor and easy to pilot. Therefore, the ease-of-use was improved a lot. It is ready-to-ﬂy in minutes after unpacked. Secondly, it was light in weight and had an indoor hull made from foam. These safety considerations protected the users and also made it sturdy. Thirdly, AR. Drone could be controlled by a smartphone or a tablet by giving a point-of-view display for the drone’s onboard cameras. That
8A smartphone device is an electronic device, generally connected to other devices or networks via different wireless protocols such as Bluetooth, NFC, Wi-ﬁ, and 3G that can operate to some extent interactively and autonomously. 9TED is a nonproﬁt devoted to “ideas worth spreading”—through http://www.TED.com, the annual conferences, the annual TED Prize, and local TEDx events.

18
Table 1.3 Major open source projects
Open source projects Ardupilot Openpilot Paparazzi Pixhawk Mikrokopter KKmulticopter Multiwii Aeroquad Crazyﬂie CrazePony DR. R&D ANO Autoquad MegaPirate Erlerobot MegaPirateNG Taulabs Flexbot Dronecode (Operating System) Parrot API (SDK) 3DR DRONEKIT (SDK) DJI DEVELOPER (SDK) DJI MATRICE 100+ DJI Guidance SDKfor XMission (SDK) Ehang GHOST (SDK)

1 Introduction
Web site http://ardupilot.com http://www.openpilot.org http://paparazziuav.org https://pixhawk.ethz.ch http://www.mikrokopter.de http://www.kkmulticopter.kr http://www.multiwii.com http://www.aeroquadstore.com https://www.bitcraze.io/category/crazyﬂie http://www.crazepony.com http://www.etootle.com http://www.anotc.com http://autoquad.org http://megapiratex.com/index.php http://erlerobotics.com http://code.google.com/p/megapirateng http://forum.taulabs.org http://www.ﬂexbot.cc https://www.dronecode.org https://projects.ardrone.org/embedded/ardrone-api/index.html http://www.dronekit.io http://dev.dji.com/cn https://developer.dji.com/cn/matrice-100 http://www.xaircraft.cn/en/xmission/developer http://dev.ehang.com

(a) AR. Drone
Fig. 1.18 Some products in the activity period

(b) Phantom

means that it had strong entertainment functions. Furthermore, it offered a Software Development Kit (SDK) so that researchers could develop their own applications which meaned it was equipped with research potentials. As a result, the product spread rapidly in academia. At this stage, some companies, which only designed autopilots of multicopters before, also started to design ready-to-ﬂy multicopters inspired by the success of AR. Drone. For example, at the end of 2012, DJI released an all-in-one solution, ready-to-ﬂy “Phantom” quadcopter, as shown in Fig. 1.18b.

1.3 History of Multicopters

19

1.3.5 The Fifth Period (2013–): Booming Period

(1) Research At this stage, the research on multicopters tended to make them more autonomous and cooperative. In June 2013, Raffaello D’Andrea at ETH Zurich made a speech at TED Global 2013 about “Machine Athleticism”, i.e., the ability of machines to perform dynamic feats that fully exploit their physical capabilities, including play catch, balance and make decisions together, and a demo of Kinect-controlled quadcopter [41]. His TED talk on small aircraft later in 2016 was also impressive as well. In June 2015, a special section about Machine Intelligence of the magazine Nature published an article on “Science, technology and the future of small autonomous drones” [42]. This review paper summarized challenges in design and manufacturing, sensing and control, and future research trends in the ﬁeld of small drones. To overview the development of multicopters in academia, the papers in databases “Engineering Village10” and “Web of Science11” with “quadrotor” and “multirotor” as the keywords are reviewed. The number of annually published papers in years between January 1990 and December 2015 was recorded as shown in Fig. 1.19. It can be seen that the amount of publications reached a climax in 2013 with the delay occurred in the review process considered. These preliminary research laid a solid foundation for the development of the multicopter industry.
(2) Products At the end of 2012, DJI released an all-in-one solution, ready-to-ﬂy “Phantom” quadcopter. Like AR. Drone, Phantom can be controlled easily and can hold its position by using GPS and altitude sensors. Compared with AR. Drone, it has a certain payload capacity and can resist wind. At that time, sport cameras were popular in the area of extreme sports. As a result, Phantom mounted with sport cameras spurted into popularity in the ﬁeld of aerial photography. The enthusiasts shared their videos through the social networks or video networks. This made more people know about multicopters. By

Fig. 1.19 The trend of the number of publications about multicopters
10http://www.engineeringvillage.com. 11http://www.webofknowledge.com.

20

1 Introduction

Table 1.4 Some multicopter (Some of them are conception products) from August 2013 to September 2015

Name

Company

Released Time Country

Features

Spiri
Stingray500 AR. Drone 2.0

Patrick

2013.8

Edwards-Daugherty

Curtis Youngblood 2013.12

Parrot

2013.12

AirDog Rolling Spider

Helico Aerospace Industries Parrot

2014.6 2014.7

IRIS+ Nixie GHOST 1.0

3D Robotics Fly nexie Ehang

2014.9 2014.11 2014.11

Mind4

AirMind

2014.11

Inspire 1

DJI

2014.11

Bebop Vertex VTOL

Parrot

2014.12

ComQuestVentures 2015.1

Skydio

Skydio

2015.1

Steadidrone Flare Steadidrone

2015.1

Airborg H61500
Splash Drone Solo

Top Flight Technologies Urban Drones 3D Robotics

2015.3
2015.3 2015.4

Phantom 3 XPlanet Phenox2 CyPhy LVL1

DJI Xaircraft Hongo Aerospace CyPhy Works

2015.4 2015.4 2015.4 2015.4

Lily PhoneDrone Yeair! Tayzu Fotokite Phi
UNICORN Micro Drone 3.0 Feibot Snap

Lily

2015.5

xCraft

2015.5

Airstier

2015.6

Tayzu Robotics

2015.7

Perspective Robotics 2015.8 AG

FPV Style

2015.8

Extreme Fliers

2015.8

Feibot

2015.9

Vantage Robotics 2015.9

Flybi

Advance Robotix Corporation

2015.9

Canada

Autonomous, fully programmable

USA France
Latvia

Full collective pitch 3D quadcopter APP controlled, extreme precise control, and automatic stabilization without GPS Rotor-arms able to fold away for easy storage, auto-follow

France USA USA China China China France Puerto Rico United Sates Czech USA

Small enough to ﬁt in the palm of your hand, wheels enable the Rolling Spider to zip around the ﬂoor and up walls and ceilings The “Geofence,” auto-follow A small camera-equipped drone that can be worn as a wrist band Control is through one-one-click commands on your phone, auto-follow Precise and autonomous following and ﬁlming, Android-based smart drone Vision positioning system, transforming design, 4K camera full-featured APP, optional dual-operator control A comprehensive update based on AR. Drone 2.0 A hybrid aircraft that combines the hover and VTOL capabilities of a quadcopter Autonomously navigate around obstacles, ﬂew using intuitive gestures with a mobile device Highest quality carbon ﬁber and aluminum constructed ‘Rapid Deploy’ folding airframe A hybrid gas-electric multicopter UAV

USA USA
China China Japan USA
USA New Zealand Germany United States Switzerland

Waterproof quadcopter Powered by twin computers intelligent ﬂight and can deﬁne its own ﬂight Vision sensor for indoor ﬂight, gimbal stabilized 4K camera Agricultural UAV System, automatically set the spraying route Intelligent, interactive, and programmable drone Six-rotor design with the exact angle of each rotor and the drone can ﬂy completely horizontally even when making turns Throw-and-shoot camera, waterprooﬁng Utilizes its user’s smartphone as its brains A quadcopter powered by a combustion engine Fully-autonomous drones, large-scale data collection capability A quadcopter on a leash

China UK China USA
USA

A racer drone, with a high forward ﬂight speed Small, smart, and streams HD footage to your phone Smartphone-based drone controller Airframe can be connected to the rotors and battery by pressing together magnetic strips and a tiny gimbal and camera that are housed inside the body of the drone Drone with virtual reality head-tracker goggles a kind rapid charging system. The sensor will detect any object in its ﬂight path and re-route itself safely

1.3 History of Multicopters

21

2012, Chris Anderson, the former editor-in-chief of Wired magazine, joined 3D Robotics as CEO. Under 3D Robotics’s support, global volunteers soon created a world-class universal ﬂight code for APM [43, 44]. APM is comprised of several parts, vehicles and boards. The multicopter part of APM is headed by Randy Mackay. In July 2012, the PX4 team headed by Lorenz Meier at ETH Zurich announced availability of the PX4 autopilot platform, with hardware available immediately from 3D Robotics [45, 46]. In August 2013, the PX4 Project and 3D Robotics announced Pixhawk—an advanced open-hardware autopilot design for multicopters, ﬁxed-wing aircraft, ground rovers, and amphibious vehicles. Pixhawk is designed to improve the ease-of-use and reliability while offering unprecedented safety features compared with existing solutions [47]. At the end of 2013, a video was released that Amazon hoped to deliver small packages home in just thirty minutes by “Prime Air”—a future delivery system consisted of quadcopters [48], within 5 years. This idea further shortened the distance between multicopters and mass customers. More and more multicopters were designed at this stage. Table 1.4 lists a part of them designed from 2013 to September 2015.

1.3.6 Conclusion Remark
From the history of the development of multicopters, two conclusions are summarized in the following. (1) The multicopter is the product of the time. As stated at the beginning of this section, multicopters
have existed for 100 years and small multicopters have also existed for over 25 years. The toys such as X-UFO and Draganﬂyer did not receive so much attention as they do today. However, as the smart devices are emerging, smart multicopters like AR. Drone appeared and grew rapidly in a short term. Similarly, as sport cameras and social networks are popular, multicopters are getting known by the world rapidly. The development of multicopters is also driven by the relevant techniques, like those of the sensors, motors, chips, and materials. It is expected that multicopters will dominate the mass market in quite a long time.
(2) Compared with pure autopilots, all-in-one solution and ready-to-ﬂy multicopters are the future trend. As a package, most components are not exposed. Moreover, customers need not to consider assembling a multicopter or tuning its parameters. The performance can be tested intensively in advance. So, the ease-of-use and reliability are guaranteed. The trend is like that of autofocus cameras. The essential issue is to change the user experience—making the ﬂight as simple as possible.

1.4 The Objective and Structure of the Book
1.4.1 Objective
As far as the author understands, there are a number of books about multicopters. The related master and doctoral dissertations are beyond count. The books [49, 50] are about drones, where many types of drones are introduced. The book [51] focuses on the visual navigation of multicopters. The books [52, 53] emphasize control and simulation issues, while the book [13] is about how to build a quadcopter. In spite of all these, it is still hard for a beginner to ﬁnd an introductory book. This motivates the author to write this book. With the intention of covering most design phases on hardware and algorithms of multicopters, this book has ﬁfteen chapters which is divided into ﬁve parts, including multicopter hardware design, modeling, perception, control, and decision. It aims to organize the design principles adopted in engineering practice into a discipline and to emphasize the power of fundamental concepts. This book is featured with four salient characteristics: basic, practical, comprehensive, and systematic.
(1) Basic and practical The most contents related to multicopters are self-contained, aiming at making this book understandable to readers with the background of Electronic Engineering (EE). For such a purpose, the components

22

1 Introduction

are introduced starting from their functions and key parameters. The introduction to the design process starts with the principle, while the modeling section starts with the theoretical mechanics. The state estimation section starts with the measurement principle of sensors. Before talking about the control, the notions of stability and controllability are introduced. In addition, most of basic and practical methods are presented. These methods are closely related to open source autopilots which are often used now.
(2) Comprehensive and systematic This book aims to give a complete picture of multicopter systems rather than a single method or technique. Very often, the role of a single method or technique is often not sufﬁcient to meet the user requirements or to solve a practical complex problem. On the other hand, improving other related methods or techniques will reduce the difﬁculty in a single method. For example, the improvement of the state estimation performance or the mechanical structure can avoid dealing with delay or vibration as a control problem. Through this, some complex controller design can be avoided. For an undergraduate student, basic knowledge has been obtained, such as mathematics, aerodynamics, materials, structures, electronics, ﬁltering, and control algorithms, which correspond to numerous courses. This book is hoped to combine them together to lay foundations for full stack developers.

1.4.2 Structure
This book has ﬁve parts, ﬁfteen chapters, as shown in Fig. 1.20. Chapter 1. Introduction. It includes the basic conceptions, remote control and performance eval-
uation of a multicopter, history of technology development of multicopters, and the objective and structure of this book.
(1) Part I. Design Part Through this part, readers can have a deeper understanding about the composition of a multicopter system, the conﬁguration and structural design for the airframe, and the choice of the propulsion system. These correspond to Chaps. 2–4, respectively.
Chapter 2. Basic composition. This chapter includes three parts: the airframe, the propulsion system, and the command and control system. In the aspects of the function and key parameters, the fuselage, landing gear, duct, motor, ESC, propeller, battery, RC transmitter and receiver, autopilot, GCS, and radio telemetry are introduced.
Chapter 3. Airframe design. This chapter introduces the basic conﬁguration and the brief consideration on how to attenuate vibration and to reduce the noise.
Chapter 4. Modeling and evaluation of propulsion system. The propulsion system of a multicopter consists of propellers, motors, ESCs, and batteries. The components are modeled with respect to energy. Then, based on these, the ﬂight performance, such as the maximum ﬂight time in hover mode and the maximum payload, is evaluated.
(2) Part II. Modeling Part Through this part, readers can have a deeper understanding about the dynamic model of a multicopter, which will be further used for the state estimation and control. This part contains two chapters, including the coordinate system, attitude representation, dynamic model, and parameter measurement.
Chapter 5. Coordinate system and attitude representation. First, this chapter introduces the EarthFixed Coordinate Frame (EFCF) and Aircraft-Body Coordinate Frame (ABCF). Then, the attitude is represented in the form of three types: Euler angle, rotation matrix, and quaternion. This chapter is the basis for Chap. 6.

1.4 The Objective and Structure of the Book

23

Chapter 1: Introduction

Design Part Chapter 2: Basic composition
Chapter 3: Airframe design

Modeling Part Chapter 5: Coordinate system
and attitude representation
Chapter 6: Dynamic model and parameter measurement

Chapter 4: Modeling and evaluation of propulsion system
Perception Part Chapter 7: Sensor calibration
and measurement model Chapter 8: Observability and
Kalman filter

Control Part Chapter 10: Stability and
controllability
Chapter 11: Low-level flight control
Chapter 12: Position control based on semi-autonomous
autopilots

Chapter 9: State estimation

Decision Part Chapter 13: Mission
decision-making
Chapter 14: Health evaluation and failsafe

Chapter 15: Outlook
Fig. 1.20 Structure of this book
Chapter 6. Dynamic model and parameter measurement. First, the multicopter control model is introduced, which includes rigid body kinematics, rigid body dynamics, the control effectiveness model, and the propulsor model. Secondly, the aerodynamic drag model is further introduced, which will be used for the state estimation in Chap. 9. Finally, methods are proposed to identify the parameters of a multicopter model.
(3) Part III. Perception Part Through this part, readers can have a deeper understanding about the state estimation of a multicopter, which will be further used for control. This part contains three chapters.
Chapter 7. Sensor calibration and measurement model. A multicopter is equipped with many sensors, such as the three-axis accelerometer, three-axis gyroscope, three-axis magnetometer, barometer, ultrasonic range ﬁnder, laser range ﬁnder, GPS receiver, and camera. Low-cost inertial sensors have bias, misalignment angles, and scale factors, which are not negligible and differ from one multicopter sensor board to another. If the sensors are not calibrated, then the position and attitude estimation are inaccurate before takeoff. This may cause ﬂight accidents. In this chapter, the calibration methods are introduced ﬁrst. Then, the measurement models of sensors are given.
Chapter 8. Observability and Kalman ﬁlter. In fact, with related sensors, there still exists a question whether the state information can be estimated in theory, that is, the observability problem. If the system is unobservable, then it makes no sense to design ﬁlters. After introducing the observability, a widely used ﬁlter, namely Kalman ﬁlter, is introduced in detail.

24

1 Introduction

Chapter 9. State estimation. Sensors have noise and redundancy. Moreover, some states cannot be obtained from sensors directly. Therefore, multisensor data fusion is very important. This chapter will contain the attitude estimation, position estimation, velocity estimation, and obstacle estimation.
(4) Part IV. Control Part Through this part, readers can have a deeper understanding about control of a multicopter, where the methods introduced are commonly used. There are three chapters in this part.
Chapter 10. Stability and controllability. Before controller design, the stability of a multicopter is deﬁned and some simple stability criteria are given. Secondly, the controllability of a multicopter is also introduced. Without it, all fault-tolerant control methods are inapplicable. An interesting example of controllability analysis for hexacopter propulsor degradation and failure will be given. Controllability can be also used to evaluate the design of a multicopter or health of a multicopter.
Chapter 11. Low-level ﬂight control. This chapter will introduce how to design a motor controller that drives a multicopter to ﬂy to a desired position. The process includes the position control, attitude control, control allocation, and motor control. The methods for position control and attitude control are based on both the linear model and the nonlinear model.
Chapter 12. Position control based on Semi-Autonomous Autopilots (SAAs). In this chapter, the SAA will be considered as a “black box.” This will be very helpful in the secondary development. Not only has it avoided the trouble of modifying the low-level source code of autopilots, but also can it utilize commercial reliable autopilots to achieve the targets. This simpliﬁes the whole design. This chapter will introduce the system identiﬁcation and controller design process.
(5) Part V. Decision Part Through this part, readers can have a deeper understanding about high-level decision-making of a multicopter. Decision-making has two objectives: mission decision-making and failsafe,12 which corresponds to Chaps. 13 and 14, respectively.
Chapter 13. Mission decision-making. For FAC, it consists of the task planning and path planning, where the former informs the multicopter where to go next and latter informs the multicopter how to go there step by step. In the path planning, two problems considered are how to follow a straight-line path and how to avoid an obstacle. For SAC, a switching logic between the autonomous hover and the remote control will be introduced.
Chapter 14. Health evaluation and failsafe. For civil applications, safety is often more important than fulﬁlling tasks. During a ﬂight, the communication failure, sensor failure, and propulsion system failure all may happen. These accidents may ruin tasks. In this case, it is important to decide on the next action of multicopters. In this chapter, some failure problems are introduced ﬁrst. Then, some methods of health evaluation are given. Moreover, failsafe suggestions are listed as well. Finally, a failsafe mechanism as a case is designed by using the Extended Finite State Machine (EFSM).
Chapter 15. Outlook. This chapter summarizes the potential technologies which will propel the development of multicopters in the ﬁrst place. Secondly, innovation trends are proposed. Thirdly, potential risks are further analyzed. Finally, it provides the personal thoughts about the opportunities and challenges.
The structure shown in Fig. 1.20 has considered three types of readers. Readers who are only interested in design can read this chapter, Design Part, and Chap. 15. Readers who are only interested in perception can read the this chapter, Modeling Part, Perception Part, and Chap. 15. Readers who are only interested in control are suggested to read this chapter, Modeling Part, Control Part, Decision Part, and Chap. 15.

12A failsafe is that, in the event of a speciﬁc type of failure, responds in a way that will cause no harm, or at least a minimum of harm, to other devices or to personnel.

Exercises

25

Fig. 1.21 A special quadcopter
Exercises
1.1 As shown in Fig. 1.21, if propellers of a quadcopter are spinning with propellers #1 and #4 rotating clockwise and propellers #2 and #3 counterclockwise, analyze whether it can hover and clarify the reasons.
1.2 Besides the advantages and disadvantages mentioned in this chapter, summarize more advantages and disadvantages of multicopters.
1.3 Choose one of your favorite open source projects and clarify its features.
1.4 Choose one of your favorite multicopters and clarify the reasons.
1.5 Analyze the development stage of multicopters and the trend of multicopters now.
References
1. Austin R (2010) Unmanned aircraft systems: UAVS design, development and deployment. Wiley, NY 2. FAA overview of small UAS notice of proposed rulemaking. http://www.faa.gov/regulations_policies/rulemaking/
media/021515_sUAS_Summary.pdf. Accessed 25 Jan 2016 3. Quan Q (2015) Decryption of multirotor development. Robot Ind 2:72–83 (In Chinese) 4. Fan PH (2010) Design and control of multi-rotor aircraft. Dissertation, Beihang University (In Chinese) 5. Talay TA (1975) Introduction to the aerodynamics of ﬂight, SP-367. Scientiﬁc and Technical Information Ofﬁce,
NASA, USA 6. Zhang RF (2011) A study on quadrotor compound helicopter oriented to reliable ﬂight control. Dissertation, Beihang
University (In Chinese)

26

1 Introduction

7. Quan Q, Fu JS, Cai KY (2012) A compound multicopter. Chinese patent, ZL201220708839.7 (In Chinese) 8. F3-radio control soaring. http://www.fai.org/ciam-our-sport/f3-radio-control-soaring. Accessed 25 Jan 2016 9. Palmer D (2015) The FAA’s interpretation of the special rule for model aircraft. Surg Radiol Anat 80:567–749 10. FAA Interpretation of the special rule for model aircraft. http://www.faa.gov/uas/media/model_aircraft_spec_rule.
pdf. Accessed 25 Jan 2016 11. Lipera L, Colbourne JD, Patangui P et al (2001) The micro craft iSTAR micro air vehicle: control system design
and testing. In: American Helicopter Society 57th Annual forum, Washington, DC, USA, pp 1998–2008 12. Volocopter. http://www.e-volo.com/ongoing-developement/vc-200. Accessed 25 Jan 2016 13. Norris D (2014) Build your own quadcopter: power up your designs with the Parallax Elev-8. McGraw-Hill Edu-
cation, New York 14. All the world’s rotorcraft. http://www.aviastar.org/helicopters.html. Accessed 28 Feb 2016 15. Leishman JG (2001) The breguet-richet quad-rotor helicopter of 1907. Vertiﬂite 47(3):58–60 16. Hamel T, Mahony R, Chriette A (2002) Visual servo trajectory tracking for a four rotor VTOL aerial vehicle. In:
Proceedings of IEEE international conference on robotics and automation, Washington, DC, pp 2781–2786 17. Altug E (2003) Vision based control of unmanned aerial vehicles with applications to an autonomous four rotor
helicopter, quadcopter. Dissertation, University of Pennsylvania 18. Kroo I, Printz F (1999) Mesicopter project. http://aero.stanford.edu/mesicopter. Accessed 25 Jan 2016 19. Borenstein J (1996) The hoverbot—an electrically powered ﬂying robot. http://www-personal.umich.edu/johannb/
hoverbot.html. Accessed 25 Jan 2016 20. Bouabdallah S, Murrieri P, Siegwart R (2004) Design and control of an indoor micro quadcopter. In: Proceedings
of IEEE international conference on robotics and automation, New Orleans, USA, pp 4393–4398 21. Turi J (2014) Tracing the origins of the multicopter drone, for business and pleasure. http://www.engadget.com/
2014/11/02/tracing-the-origins-of-the-multirotor-drone/. Accessed 25 Jan 2016 22. Keyence. Gyrosaucer by Keyence. http://www.oocities.org/bourbonstreet/3220/gyrosau.html. Accessed 25 Jan 2016 23. The story behind Draganﬂy Innovations, Innovative UAV Aircraft & Aerial Video Systems. http://www.draganﬂy.
com/our-story/. Accessed 25 Jan 2016 24. Amazing Technology Company. http://www.asctec.de/en/ascending-technologies/company/. Accessed 28 Feb 2016 25. Tayebi A, Mcgilvray S (2006) Attitude stabilization of a VTOL quadrotor aircraft. IEEE Trans Control Syst T
14(3):562–571 26. Bouabdallah S, Siegwart R (2007) Full control of a quadcopter. In: Proceedings of international conference on
intelligent robots and systems (IROS). San Diego, USA, pp 691–699 27. Pounds P, Mahony R, Corke P (2010) Modelling and control of a large quadrotor robot. Control Eng Pract 18(7):691–
699 28. Huang H, Hoffmann GM, Waslanderet SL et al (2009) Aerodynamics and control of autonomous quadrotor heli-
copters in aggressive maneuvering. In: Proceedings of IEEE international conference on robotics and automation. Kobe, Japan, pp 3277–3282 29. Madani T, Benallegue A (2006) Backstepping sliding mode control applied to a miniature quadrotor ﬂying robot. In: Proceedings of 32nd IEEE international conference on industrial electronics society. France, Paris, pp 700–705 30. Zhang RF, Wang XH, Cai KY (2009) Quadcopter aircraft control without velocity measurements. In: Joint 48th IEEE conference on decision and control and 28th Chinese control conference, pp 817–822 31. Soumelidis A, Gaspar P, Regula G (2008) Control of an experimental mini quad-rotor UAV. In: 16th IEEE mediterranean international conference on control and automation, pp 1252–1257 32. How JP, Bethke B, Frank A et al (2008) Real-time indoor autonomous vehicle test environment. IEEE Control Syst Mag 28(2):51–64 33. Michael N, Mellinger D, Lindsey Q et al (2010) The grasp multiple micro-uav testbed. IEEE Robot Autom Mag 17(3):56–65 34. Microdrones proﬁle. https://www.microdrones.com/en/company/proﬁle. Accessed 25 Jan 2016 35. MikroKopter history. http://wiki.mikrokopter.de/en/starting. Accessed 25 Jan 2016 36. Bristeau PJ, Callou F, Vissire D et al (2011) The navigation and control technology inside the AR. Drone micro UAV. In: 18th IFAC world congress, Milano, Italy, pp 1477–1484 37. Stafford N (2007) Spy in the sky. Nature 445(22):808–809 38. Kumar V (2012) Robots that ﬂy and cooperate. https://www.ted.com/talks/vijay_kumar_robots_that_ﬂy_and_ cooperate. Accessed 25 Jan 2016 39. Mahony R, Kumar V (2012) Aerial robotics and the quadrotor [from the guest editors]. IEEE Robot Autom Mag 19(3):19–20 40. Mims C (2011) GPS receivers now small enough to attach to almost anything. http://www.technologyreview.com/ view/425334/gps-receivers-now-small-enough-to-attach-to-almost-anything. Accessed 25 Jan 2016 41. D’Andrea R (2013) The astounding athletic power of quadcopters. https://www.ted.com/talks/raffaello_d_andrea_ the_astounding_athletic_power_of_quadcopters. Accessed 25 Jan 2016 42. Floreano D, Wood RJ (2015) Science, technology and the future of small autonomous drones. Nature 521(7553):463– 464

References

27

43. Ardupilot, APM. https://3drobotics.com/about/. Accessed 25 Jan 2016 44. History of Ardupilot. http://dev.ardupilot.com/wiki/history-of-ardupilot. Accessed 25 Jan 2016 45. Introducing the PX4 autopilot system. http://tech-insider.org/diy-drones/research/2012/0725-a.html. Accessed 25
Jan 2016 46. Autopilot hardware. https://pixhawk.org/start. Accessed 25 Jan 2016 47. PX4 and 3D robotics announce Pixhawk. http://3drobotics.com/px4-and-3d-robotics-announce-pixhawk. Accessed
25 Jan 2016 48. Prime air. http://www.amazon.com/b?node=8037720011. Accessed 25 Jan 2016 49. Lozano R (2013) Unmanned aerial vehicles: embedded control. Wiley, Hoboken 50. Nonami K, Kendoul F, Suzuki S et al (2010) Autonomous ﬂying robots: Unmanned aerial vehicles and micro aerial
vehicles. Springer, Japan 51. Carrillo LRG, Lpez AED, Lozano R et al (2012) Quad rotorcraft control: vision-based hovering and navigation.
Springer-Verlag, London 52. Amir MY, Abbas V (2010) Modeling and neural control of quadcopter helicopter: MATLAB-SIMULINK based
modeling, simulation and neural control of quadcopter helicopter. LAP LAMBERT Academic Publishing, Germany 53. Putro IE (2011) Modeling and control simulation for autonomous quadcopter: quadcopter nonlinear modeling and
control simulation using Matlab/Simulink environment. LAP Lambert Academic Publishing

Part I Design

Basic Composition

2

The compositions of multicopter systems are both simple yet complex. The compositions are thought to be simple because a multicopter system is generally composed of several well-modularized components such as the airframe, propulsion system, command and control system. These components for a multicopter can be described as the organs for a human, where the airframe corresponds to the body, carrying other hardware; the propulsion system would be the feet and hands powered by the heart and blood vessels, providing power for the multicopter; the command and control system would be the sense organs and brain, controlling the propulsion system to achieve tasks. On the other hand, the compositions are also complex, because each component is not independent, and they connect and constrain with others in a very complex way. Though there are countless combinations for a multicopter, only a few of them can really work. If designers are unaware of the principle of components and assemble multicopters blindly, then the assembled multicopters may have poor performance, or even could not work at all. Therefore, it is necessary to know the basic principle of each component and their relationship. This chapter aims to answer the question as below:
What are the basic compositions of a multicopter system?
This chapter consists of three parts, namely the airframe, propulsion system, and command and control system. The component of each part will be introduced from the corresponding function, working principle and key parameter, etc.

© Springer Nature Singapore Pte Ltd. 2017

31

Q. Quan, Introduction to Multicopter Design and Control, DOI 10.1007/978-981-10-3382-7_2

32

2 Basic Composition

The ancient Chinese had already recognized the interdependency between the entirety and the

locality. The “Emperor’s Inner Canon” is an ancient Chinese medical literature that was treated as

the fundamental doctrinal source for Chinese traditional medicine for more than two millennia.

The work is composed of two volumes, namely “Suwen” and “Lingshu”. According to this text,

human body is composed of various organs related to each other organically. It recommends to

study the etiology as a whole. Shi Su, a Chinese poet in the Song dynasty, wrote in “Qinshi”—one

of his poe m s —“If the sound of a zither comes from the instrument itself, then why does not it

sound when placed inside a case? If the sound of a zither comes from your fingers, then why do

not we just listen to those fingers only? ( The Chinese is “

,

?

,

” , translated by Miao Guang, from http://www.hsilai.org/tc/

365/0321.php)” This poem illustrates that the fingers, instrument, skills and emotion of the player

constitute the music. These elements are interdependent, and none of them is dispensable.

2.1 Introduction

33

2.1 Introduction

To give an intuitive understanding of multicopters, Figs. 2.1 and 2.2 show the combination and connection of a multicopter system. As shown in Fig. 2.1, Radio Controlled (RC) transmitter, RC receiver, autopilot (also known as the ﬂight controller), Global Position System (GPS) receiver and Ground Control Station (GCS) belong to the command and control system. Moreover, a multicopter system includes the airframe and propulsion system. In Fig. 2.2, the relationship between the components of the propulsion system and the command and control system are shown clearly. Figure 2.3 is the structure diagram of a multicopter, and it is also the structure diagram of this chapter.

2.2 Airframe
Generally, a typical airframe only includes a fuselage and a landing gear. To cover overall types of multicopters, the duct is also taken as a part of the airframe in this chapter.

2.2.1 Fuselage
2.2.1.1 Function The fuselage acts as the platform to carry all the equipment of a multicopter. The safety, durability, usability, and the performance of a multicopter are often highly dependent on the conﬁguration of its fuselage. For a well-designed multicopter, all factors including the scale, shape, material, strength, and weight should be carefully taken into consideration.
2.2.1.2 Parameters
(1) Weight The weight of the fuselage is mainly determined by its size and material. Under the same thrust (also referred to as lift in some papers), a smaller fuselage weight means a larger remaining payload capacity.

Fig. 2.1 Basic composition of a multicopter system

Airframe

Fuselage

Arm

Landing gear Command and control system

Propulsion system

Motor ESC

Battery Propeller

GPS receiver RC transmitter RC receiver

Radio telemetry

Autopilot

Ground control station

34

Fig. 2.2 Combination and connection of a multicopter system (photo by Jethro Hazelhurst from http:// www.ardupilot.org)

Motor 4 Motor 1

Lipo Battery

Motor 3 ESC

2 Basic Composition Motor 2

Power Alarm

Radio Telemetry

Autopilot

Camera Stabilizer Camera

GPS & Compass

RC Receiver

RC Transmitter

Fig. 2.3 Structure diagram of this chapter
Multicopter

Airframe
Propulsion system
Command and control system

Fuselage (2.2.1) Landing gear (2.2.2) Duct (2.2.3)
Motor (2.3.1) Electronic Speed Controller (ESC) (2.3.2) Propeller (2.3.3) Battery (2.3.4) RC transmitter and receiver (2.4.1) Autopilot (2.4.2) Ground Control Station (GCS) (2.4.3) Radio telemetry (2.4.4)

2.2 Airframe

35

Therefore, in the premise of ensuring the performance of the fuselage, the weight is expected to be as small as possible.
(2) Conﬁguration The most common conﬁgurations include tricopter, quadcopter, hexacopter, and octocopter. Figure 2.4 shows some kinds of conﬁgurations that open source autopilots support.
(3) Diagonal size Diagonal size is the diameter (usually in mm) of the circumcircle determined by the motor axes. In general, as shown in Fig. 2.5, it is the distance of motor axes in the diagonal line and it is used to indicate the size of an airframe. The diagonal size restricts the size of propeller, which determines the maximum thrust and then the payload capacity.
(4) Material Properties of some kinds of materials are shown in Table 2.1.1 It is observed that carbon ﬁber material has small density, high rigidity, and high strength, but it is expensive and hard to process. So, the carbon ﬁber propellers are widely applied to commercial multicopters that need to carry heavy payload. As a comparison, the acrylic plastic material is light, inexpensive and easy to process, but its rigidity and strength are small. So, the acrylic plastic material is often used in toys or small model airplanes.

Fig. 2.4 Some basic conﬁgurations of multicopters

QUAD +

QUAD X

(a) Quadcopter

HEXA +

HEXA X

Y6

(b) Hexacopter

Fig. 2.5 Diagonal size of multicopters

OCTO +

OCTO X

X8

(c) Octocopter

450mm

550mm

(a) DJI F450

(b) DJI F550

1Note: (a) Rigidity. Rigidity of material is a measure of the ability to overcome deformation when applied stress. It can be measured by Young’s modulus (Msi). (b) Strength. Strength of material is measured by the maximum nominal tensile stress before the sample is broken when applied tensile force. It can be measured by tensile strength (Ksi).

36

Table 2.1 Properties of some materials [1]

Carbon ﬁber Fiberglass

Density (lb/cuin) 0.05

Young’s modulus 9.3 (Msi)

Tensile strength 120 (Ksi)

Cost (10:cheapest) 1

Producibility

3

(10:simplest)

0.07 2.7
15–50
6 7

Polycarbonate Acrylic

0.05

0.04

0.75

0.38

8–16

8–11

9

9

6

7

2 Basic Composition

Aluminium 0.1 10.3

Balsa 0.0027–0.0081 0.16–0.9

15–75

1–4.6

7

10

7

10

2.2.2 Landing Gear
Figure 2.6 shows a landing gear, functions of which include the follows:
(1) Supporting the whole multicopter when landing on the ground or taking off and keeping the level balance of the multicopter.
(2) Keeping propellers off ground at a safe distance. (3) Weakening ground effect (the downwash stream hits the ground and generates some disturbance
effect) when multicopters take off or land. (4) Consuming and absorbing impact energy when multicopters land on the ground.

2.2.3 Duct
2.2.3.1 Function In addition to protecting the blade and ensuring personal safety, the duct can also enhance the efﬁciency of thrust and reduce noise. The thrust of a multicopter with ducts is composed of two parts, i.e., the thrust of the propeller and the additional thrust induced by the duct, as shown in Fig. 2.7.
Fig. 2.6 A landing gear

2.2 Airframe

37

Fig. 2.7 Duct

Thrust induced by duct

Thrust of
propeller Inlet

Diffuser

(a) Working principle

(b) A quadcopter with ducts

2.2.3.2 Working Principle For a rotating propeller in the duct, airﬂow inside the inlet ﬂows faster than the outside, while the pressure inside is lower than the outside according to Bernoulli’s Principle, therefore an additional thrust is obtained. Beside, varying the cross section of the duct allows the designer to advantageously change the speed and pressure of the airﬂow. In addition, by adding a duct, the loss due to the tip vortex which occurs when a propeller operates in free space can be reduced. Therefore, the efﬁciency and maximum thrust can be increased, sometimes may be signiﬁcantly.
2.2.3.3 Parameters The diffuser length and propeller diameter are important parameters for the duct, and reader can refer to [2] for its detailed optimization design method. Although the duct may improve the efﬁciency to increase the hovering time, the duct itself is generally heavy which may signiﬁcantly increase the weight and reduce the time. So, the ﬁnal optimal design needs to achieve a trade-off.
2.3 Propulsion System
A propulsion system includes propellers, motors, ESCs, and often a battery. This system is the most important part of the multicopter, which determines the main performances such as the hovering time, the payload ability, and the ﬂying speed and distance. Moreover, components of the propulsion system have to be compatible with each other, otherwise they cannot work properly or even fails in some extreme cases. For example, in some conditions, an aggressive maneuver may make the current exceed the safety threshold of the ESC, then make the motors stop working in the air, which is very dangerous. Performance evaluation of a propulsion system will be introduced in Chap. 4.
2.3.1 Propeller
2.3.1.1 Function Propeller is a component that produces the thrust and torque to control a multicopter. The motor efﬁciency varies with the output torque (depends on the type, size, speed and other factors of a propeller). Therefore, a good match should make sure that the motor works in a high efﬁciency condition, which will guarantee less power consumed for the same thrust and then extend the time of endurance of the multicopter. Therefore, choosing appropriate propellers is a very direct way to improve the performance and efﬁciency of a multicopter.

38

2 Basic Composition

2.3.1.2 Parameters
(1) Type Generally, the propeller model is described by a four-digit number, such as a 1045 (or 10 × 45) propeller, among which the ﬁrst two represents the diameter of the propeller (unit: inch), and the latter two represents the propeller pitch (also referred to as screw pitch, blade pitch or simpliﬁed as pitch, unit: inch). Therefore, the APC1045 propeller implies that the propeller belongs to APC series, and the diameter and pitch of the propeller is 10 in. and 4.5 in., respectively. The propeller pitch is deﬁned as “the distance a propeller would move in one revolution if it were moving through a soft solid, like a screw through wood.” For example, a 21-inch-pitch propeller would move forward 21 in. per revolution.
(2) Chord length The deﬁnition of chord length of a propeller is shown in Fig. 2.8, which varies along the radius. Generally, the chord located at the 2/3 of the radius of the propeller is chosen as the nominal chord length.
(3) Moment of inertia Moment of inertia is a quantity expressing the tendency of a body to resist angular acceleration, which is the sum of the products of the mass of each particle in the body with the square of its distance from the rotation axis. A smaller moment of inertia of the propeller can improve the response speed of the motor, which is important for the control effect and performance.
(4) Number of blades Some typical propellers with different number of blades are shown in Fig. 2.9. Experiments indicated that the efﬁciency of two-blade propeller is better comparing with three-blade propeller [3, p. 65]. As shown in Fig. 2.10, the maximum thrust of the propeller is increased with the number of the blades (Fig. 2.10a), while the efﬁciency is decreased with the number of the blades (Fig. 2.10b). It can also be found that, to obtain the same thrust, a three-blade propeller has a less diameter compared with the corresponding two-blade propeller. Although the efﬁciency is reduced, the time of endurance may be improved to a certain extent by the reduction of the size and weight of the airframe.
(5) Safe rotation rate Generally, the materials of propellers used on the multicopters are ﬂexible. So, when rotation rate exceeds a certain value, the propellers may deform, which will reduce its efﬁciency. Therefore, when calculating the safety rotation rate limit, all the possible conditions should be considered. The APC

Fig. 2.8 Chord length of a propeller

Chord length

Fig. 2.9 Propellers with different number of blades

(a) Two-blade propeller (b) Three-blade propeller (c) Four-blade propeller

2.3 Propulsion System

39

Thrust (kg) Battery life (min)

14

T-MOTOR 29x9.5CF 3-Blade

12

T-MOTOR 30x10.5CF

T-MOTOR 32x11CF

10

8

6

4

2

50%

60%

70%

80%

90% 100%

Throttle (%)

(a) Throttle graph of T-MOTOR U12 KV90

50

T-MOTOR 29x9.5CF 3-Blade

45

T-MOTOR 30x10.5CF

40

T-MOTOR 32x11CF

35

30

25

20

15

10

5

2

4

6

8

10

12

14

Thrust (kg)

(b) Thrust graph of T-MOTOR U12 KV90

Fig. 2.10 Thrust and efﬁciency of two-blade propeller and three-blade propeller. Taking T-MOTOR 29 × 9.5CF 3-Blade for example, it indicates that the propeller has three blades, and it is made of Carbon Fiber (CF). The default number of blades is two

Web site2 gives an empirical formula for the maximum speed of multicopter propellers, which is 105000 Revolution Per Minute (RPM)/prop diameter (inches). Taking the 10-in. propeller for example, its maximum speed is 10500RPM. By contrast, the maximum speed of Slow Flyer (SF) propellers is only 65000RPM/prop diameter (inches).
(6) Propeller speciﬁc thrust Speciﬁc thrust, also referred to as efﬁciency (unit: g/W), is a very important parameter to measure the efﬁciency of energy transformation. The propeller speciﬁc thrust is deﬁned as

Mechanical power (unit: W)

= Torque (unit: N · m) × Propeller speed (unit: rad/s)

Propeller speciﬁc thrust (unit: g/W) =

Thrust (unit: g) Mechanical power (unit:

W)

.

(7) Material [4] Material includes carbon ﬁber, plastic, and wood. Though the propellers made of carbon ﬁber cost almost twice as much as those made of plastic, they are more popular because propellers made of carbon ﬁber have the following advantages: 1) less vibration and noise because of its high rigidity; 2) lighter and stronger; and 3) more suitable for the motor with high KV. However, because of the high rigidity, the motor will absorb most of the impact when a crash occurs and the ﬁber blade can be treated as a high speed rotating razor which is too dangerous to human nearby. Propellers made of wood are much heavier and more expensive, which is suitable for multicopters with large payload capacity.
2.3.1.3 Static Balance and Dynamic Balance [5, 6] The goal of static balance and dynamic balance is to reduce the vibration caused by the asymmetry centrifugal force which is further caused by the asymmetrical distribution of mass and shape. The imbalance of propeller is a major source of vibration for a multicopter. Propeller static imbalance occurs when the Center of Gravity (CoG) of the propeller does not coincide with the axis of rotation. Dynamic imbalance occurs when the CoG of the propeller does not coincide with the center of inertia.

2http://www.apcprop.com/Articles.asp?ID=255.

40
Fig. 2.11 A Du-Bro propeller balancer

2 Basic Composition

The imbalanced force not only affects the sensor measurement, but also makes the motor bearing wear down more quickly and increases the power consumption. These characteristics will shorten the lifetime of multicopters and increase the possibility of failure. Besides, an imbalanced propeller is far noisier than a balanced one. A balancer as shown in the Fig. 2.11 can be used to test the static balance of a propeller. The test of dynamic balance is often not an easy work as it needs sensors to record the data. An easy way without using sensors is introduced in a video [7]. If imbalance exists, some measures can be taken, such as pasting scotch tapes on the lighter blade or grinding the heavier one (not the edge) using sandpapers.
2.3.2 Motor [8, pp. 533–592]
2.3.2.1 Function Motors of multicopters are mainly brushless DC motors for the various advantages such as high efﬁciency, potential to downsize, and low manufacturing costs. Brushless DC motors are used to convert electrical energy (stored in battery) into mechanical energy for propeller. Concretely, based on the position of rotors, brushless DC motors can be classiﬁed into the outer rotor type and inner rotor type as shown in Fig. 2.12. Considering that the motor of a multicopter is supposed to drive larger propellers to improve efﬁciency, the outer rotor type outperforms the inner rotor type as it can provide larger torques. Besides, compared with the inner rotor type, speed of the outer rotor type is more stable. Therefore, the outer rotor type is more popular in multicopters and most other aircraft.
2.3.2.2 Working Principle As shown in Fig. 2.13, the control circuit generates a Pulse Width Modulated (PWM) signal to the ESC, where the signal is ampliﬁed by a driving circuit and sent to the power switch of the inverter. Then, it will control the motor winding to work in a certain sequence and generate a jump-type rotating magnetic ﬁeld in the air gap of the motor. Common types of main circuits of brushless DC motors include the star-type three-phase half-bridge, star-type three-phase bridge, and angle-type three-phase bridge. Among them, the star-type three-phase bridge is used most widely. Three output signals of the position detector are controlled by a logic circuit to control the on and off states of the switch. There are two control modes: two-two conduction mode and three-three conduction mode. As shown

2.3 Propulsion System

Fig. 2.12 Outer rotor type and inner rotor type (photo courtesy of www.nidec. com)

Hall IC detects rotor

Rotor

Motor case

Stator

Winding

Permanent magnet Bearing
(a) Inner rotor type

41

Hall element detects

Rotor Motor case

Stator

Winding Permanent magnet Bearing (b) Outer rotor type

Fig. 2.13 Main circuit of star-type three-phase bridge
Fig. 2.14 Counter electromotive force waveform of three-phase winding and its two-two conduction mode

+ D1

D3

D5

Um

D4

D6

D2

-

A B
C

ua D1
ub D6

D1

D4

D4

D3 D6

D3 D6

uc

D5

D5

D2

D2

0

90

210

330

450

570

690

in Fig. 2.14, every 60◦ the rotor rotates, the switches of inverters commutate one time and the ﬁeld of
the state of stator changes one time. There are six magnetic states and three phases for motors, each phase conducts 120◦.

42

2 Basic Composition

2.3.2.3 Parameters
(1) Size Size of motor is generally represented by its stator size with four-digit number, such as motor 2212 (or written as 22 × 12), among which the ﬁrst two indicates its stator diameter (mm) and the latter two indicates its stator height (mm). For example, the motor 2212 indicates that the stator diameter of the motor is 22 mm and the stator height is 12 mm. That means, the larger the former two are, the wider the motor is; the larger the latter two are, the higher the motor is. A wide and high motor has high power, which is more suitable for large multicopters.
(2) KV value for motors The KV value for brushless DC motors is the number of RPM that the motor will revolve when 1 V (Volt) is applied with no load attached to the motor. For example, 1000 KV just means that when 1 V is applied, the no-load motor speed will be 1000 RPM. A low KV motor has more windings of thinner wire, which means it will carry more power, produce a higher torque, and drive a bigger propeller. By contrast, a high KV motor can produce a low torque so that it can only drive a small propeller.
(3) No-load current and voltage In the no-load test, the current passing through the three-phase winding of stator after applying nominal voltage (generally 10 or 24 V) is deﬁned as the nominal no-load current.
(4) Maximum current/power It is the maximum current or power the motor can undertake. For example, maximum continuous current “25A/30s” represents that the motor can work safely with continuous current up to 25A, beyond which for more than 30s the motor may be burnt out. The same deﬁnition can be applied for the maximum continuous power.
(5) Resistance There is resistance in all motor armatures. It is very small but cannot be ignored because the current ﬂowing through the resistance is tremendously large and sometimes reaches tens of Amperes. The existence of the resistance generates heat during the running of the motor, which may overheat the motor and reduce the efﬁciency.
(6) Motor efﬁciency Motor efﬁciency is an important parameter to measure the performance. It is deﬁned as follows:

Electrical power (unit: W) = Input Voltage (unit: V) × Effective current (unit: A)

Motor efﬁciency

=

Mechanical power (unit: W) Electrical power (unit: W)

.

The motor efﬁciency is not a constant. In general, it varies with input voltage (throttle) and load (propeller). For the same propeller, the efﬁciency of the motor may be reduced as the input voltage (current) is increased. That is because the larger the current is, the more the heat (caused by the resistance) and other loss will be, which makes the ratio of the effective mechanical power reduced.
(7) Overall speciﬁc thrust The overall performance of the propulsion system depends largely on a well-matched combination of motor and propeller. To evaluate the efﬁciency of the motor and propeller together, the overall speciﬁc thrust is calculated as

2.3 Propulsion System

43

Motor Voltage

model

(V)

T-MOTOR MN5212 24 KV340

Propeller Model
T-MOTOR 15x5CF
T-MOTOR 18x6.1CF

Throttle
50% 55% 60% 65% 75% 85% 100% 50% 55% 60% 65% 75% 85% 100%

Current (A) 3.3 4.2 5.2 6.3 9.1 12.2 17.8 5.7 7.4 9.3 11.6 16.5 22.1 31

Power (W) 79 99.8 123.6 150.7 217.2 292.1 426.7 137.5 178.1 222 278.2 395.5 531.1 744.7

Thrust (g) 745 910 1075 1254 1681 2115 2746 1318 1612 1901 2259 2835 3477 4355

Speed (RPM) 3821 4220 4576 4925 5663 6315 7167 3596 3958 4310 4622 5226 5751 6358

Efficiency (G/W) 9.44 9.11 8.7 8.32 7.74 7.24 6.44 9.58 9.05 8.56 8.12 7.17 6.55 5.85

Torque (N·m) 0.142 0.172 0.198 0.232 0.31 0.382 0.498 0.29 0.344 0.411 0.472 0.605 0.737 0.918

Temperature 38 74

Fig. 2.15 Overall speciﬁc thrust of motor MN5212 KV420 (data from http://www.rctigermotor.com)

Overall

speciﬁc

thrust

(unit:

g/W)

=

Thrust (unit: g) Electrical power(unit: W)

= Propeller speciﬁc thrust × Motor efﬁciency.

Since both the propeller speciﬁc thrust and motor efﬁciency are not constant, the overall speciﬁc thrust changes with the working condition. The overall speciﬁc thrust is often given by the motor producers. Taking a motor for example, the overall speciﬁc thrust under different states is displayed in Fig. 2.15, where “Efﬁciency (G/W)” is in fact the overall speciﬁc thrust. This will help designers to choose combinations of a motor and a propeller according to their requirements.

2.3.3 Electronic Speed Controller
2.3.3.1 Function The basic function of ESCs is to control the speed of motors based on the PWM signal that autopilots send, which is too weak to drive brushless DC motors directly. Furthermore, some ESCs act as a dynamic brake, or a power supply (battery elimination circuit module) for RC receiver or servo motors. Unlike a general ESC, the brushless ESC has a new function, i.e., it can act as an inverter transforming an onboard DC power input into a three-phase Alternating Current (AC) power that can be applied to brushless DC motors. Undoubtedly, there are some other auxiliary functions, such as battery protection and starting protection. The Fig. 2.16 shows the Xaircraft ESC-S20A for multicopters.
2.3.3.2 Parameters
(1) Maximum continuous/peak current The most important parameter for brushless ESCs is current, which is usually represented by Ampere (A), such as 10 A, 20 A, and 30 A. Different motors need to be equipped with different ESCs. An inappropriate matching will burn ESCs or even cause motor failure. Concretely, there are two important parameters of the brushless ESC, namely the maximum continuous current and peak current. The former

44
Fig. 2.16 XAircraft ESC-S20A for multicopters

Standard J-Type plug with length of 180mm

2 Basic Composition

JST connector(male)

42mm

3mmPK-BFA(female)

24mm

18AWG silicone-line with length of 70mm

18AWG silicone-line with length of 40mm

is the maximum continuous current in the normal working condition, while the latter is the maximum instantaneous current that the ESC can withstand. Each ESC will be labeled with a speciﬁed value, such as Hobbywing XRotor 15 A which indicates the maximum continuous current allowed. When choosing the type of ESCs, attention should be paid to the maximum continuous current, which needs to be checked whether it leaves a safety margin (20% for example) so as to efﬁciently avoid burning the power tube. Taking 50A ESC for example, 10A is often left as a safety margin.
(2) Voltage range The range of voltage allowing the ESC to work properly is also an important parameter. Usually, the index like “3-4S LiPo” can be found on the ESC speciﬁcation, which means that the voltage range of this ESC is 3-4 cells of LiPo battery, i.e., 11.1–14.8 V.
(3) Resistance Since all ESCs have resistance, the heating power cannot be ignored because the current ﬂowing through them can sometimes reach tens of Amperes. Considering the heat dissipation, the resistance of ESCs with high current is always designed to be small.
(4) Refresh rate The motor response has a great relationship with the refresh rate of ESCs. Before the development of multicopters, ESCs were designed speciﬁcally for model airplanes or cars. The maximum operating frequency of servo motors was 50 Hz, therefore the refresh rate of ESCs was 50 Hz. Theoretically, the higher the refresh rate is, the faster the response will be. Since multicopters differ from other types of model airplanes in that the rapid thrust adjustment is realized by the rapid control of propeller angular speed, the refresh rate of multicopter ESCs is often faster. In order to ensure smooth outputs, low-pass ﬁltering is often applied to the input or output of ESCs at the cost of reducing their response rate. This also implies the reduced control frequency.
(5) Programmability The performance of ESCs can be optimized by tuning internal parameters. There are three ways to set the parameters of ESCs, i.e., programmable cards as shown in Fig. 2.17, computer software via the USB, and RC transmitters. The parameters that can be set up include: throttle range calibration, low voltage protection, power outage value, current limitation, brakes mode, throttle control mode, switch timing setting, starting mode, and PWM mode setting.

2.3 Propulsion System

45

Fig. 2.17 Hobbywing brushless ESC programmable cards

(6) Compatibility If the ESC and motor are incompatible, the motor is likely to be jammed, which may result in a fall and crash for a multicopter in the air. Sometimes motors may get jammed in extreme cases, such as the case that the control command for mode transitions changes sharply, generating large instantaneous current, which are not easy to be detected.
2.3.3.3 Square-Wave Driver and Sinusoidal Driver [9]
(1) Square-wave driver Square-wave driver type ESC outputs square wave. Its control elements work in the switch state, which makes it simpler, cheaper, and easier to control.
(2) Sinusoidal driver Sinusoidal driver-type ESC outputs sinusoidal wave, which uses Field Oriented Control (FOC). Therefore the sinusoidal driver performs better in the aspects of operation stability, speed range, efﬁciency, and vibration reduction of noise. Now, the optical encoder, Hall sensor and observer-based method are available to measure the angle of the rotor. For a multicopter, its motor rotors are working in a high speed state, which means the FOC can be applied based on the observation of rotor electrical angle with information including the motor model, current, and voltage. This is a good way to reduce the cost.
2.3.4 Battery
2.3.4.1 Function Battery is used to provide energy. A battery for small multicopters is shown in Fig. 2.18. A problem often concerned on present multicopters is the time of endurance , which heavily depends on the capacity of batteries. Now, there are many types of batteries, where the Lithium Polymer (LiPo) battery and Nickel Metal Hydride (NiMH) battery are the most commonly used ones because of superior performance and cheap price.
2.3.4.2 Parameters The basic parameters of the battery include voltage, discharge capacity, internal resistance, and discharge rate. The nominal voltage of a single cell of LiPo battery is 3.7 V. When it is fully charged, the

46
Fig. 2.18 GENS ACE Tattu UAV battery

2 Basic Composition

Fig. 2.19 Connection diagrams

3.7V 100mAh

3.7V 100mAh

3.7V 100mAh

(a) 3S1P (11.1V 100mAh)

3.7V 100mAh

3.7V 100mAh

3.7V 100mAh

3.7V 100mAh

(b) 2S2P (7.4V 200mAh)

voltage can reach 4.2 V. In order to ensure that the total battery capacity and voltage are enough, several cells can be assembled together. In an actual process, the remaining voltage is decreased gradually with the discharge of the battery. Most research shows that in a certain range, the remaining voltage is in a linear relationship with the battery remaining capacity. However, in the late stage of discharge, the voltage may drop sharply, which may result in rapid thrust loss of multicopter. To ensure that a multicopter has enough power or capacity to return home before the carried battery runs out, it is necessary to set a safe voltage threshold for the battery. Besides, the output voltage will drop as the current of discharge is increased because of more voltage allocated to the internal resistance. It should be noted that the battery should not be completely discharged, otherwise it may have an irreversible damage.
(1) Connection By combining battery cells in series, a higher voltage can be obtained, with capacity unchanged. On the other hand, by combining battery cells in parallel, a larger capacity can be obtained, with voltage unchanged. In some cases, there exist combinations of both series and parallel in battery packs. The letters S and P are used to represent for the series connection and parallel connection, respectively. For example, as shown in Fig. 2.19a, assuming that the voltage of one cell is 3.7 V and its capacity is 100 mAh, then 3S1P represents three cells in series connection (total voltage is 11.1 V, capacity is 100 mAh). As shown in Fig. 2.19b, for the 2S2P battery, its total voltage is 7.4 V and total capacity is 200 mAh.
(2) Capacity The milliAmpere-hour (mAh) or Ampere-hour (Ah) is a technical index that how much electrical charge a particular battery has. The capacity of 5000 mAh for a LiPo battery means that the discharge of the battery will last for an hour with the current of 5000 mA when the voltage of a single cell is decreased from 4.2 to 3.0 V. However, the discharge ability will be decreased along with the process of discharge, and its output voltage will also be decreased slowly. As a result, the remaining capacity is not a linear function of the discharge time. In practice, there are two ways to detect whether the remaining capacity of a battery can support the ﬂight. One way is to detect the voltage of the battery by sensors in real time, which is commonly used. The other way is to estimate the State of Charge (SoC) value of batteries, which will be shown in Chap. 14.

2.3 Propulsion System

47

(3) Discharge Rate Discharge rate is represented by
Discharge Rate (unit: C) = Current of Discharge (unit: mA) . Capacity (unit: mAh)
For example, the discharge rate of a battery will be 0.2 C when its nominal capacity is 100 mAh and the discharge current is 20 mA. Obviously, the discharge rate measures the rate of discharge. When the maximum discharge rate of a battery with the nominal capacity of 5000 mAh is 20C, the maximum current of discharge is calculated as 5000 mA × 20C = 100 A. The total current of a multicopter cannot exceed its maximum current limit of the battery; otherwise, the battery may be burnt out. The battery having higher discharge rate can generate more current, which can be applied to multicopters demanding higher current because of heavier bodies and more motors.
(4) Resistance Resistance of a battery is not a constant value, and it varies with the power status and service life. The resistance of a rechargeable battery is relatively small in the initial state. However, after a long period of use, because of the exhaustion of electrolyte and decrease in chemical substance activity of the battery, the internal resistance will be increased gradually until to a certain degree where the power in the battery cannot be released. Then, the battery can be regarded as being run out of.
(5) Energy Density Energy density is the amount of energy stored in a given system or region of space per unit volume or mass, and the latter is more accurately termed speciﬁc energy. In general, the units for energy density and speciﬁc energy are (Watt × hour)/kg and (Watt × hour)/L, i.e., Wh/kg and Wh/L, respectively. Batteries with higher energy density are more popular due to the contradiction between volume (weight) and endurance for a product. Lithium-ion battery as a kind of clean energy is getting more and more attentions and is widely used in many applications. The energy density of Lithium-ion batteries varies from chemistry to chemistry and the energy density can range from 240 to 300 Wh/L (double of the NiCd, 1.5 times of NiMH).

2.4 Command and Control System
2.4.1 RC Transmitter and Receiver [10]
2.4.1.1 Function An RC transmitter, as shown in Fig. 2.20a,3 is used to transmit commands from remote pilots to the corresponding receiver. Then, the receiver, as shown in Fig. 2.20b, passes the commands to the autopilot after decoding them. Finally, the multicopter ﬂies according to the commands. Some ﬂight parameters can be set on the transmitter, such as the throttle direction, stick sensitivity, neutral position of RC servo motors, function deﬁnitions of channels, record and remind setting of ﬂight time, and lever function setting. Advanced functions include battery voltage and current ﬂight data of multicopters. At present, there are several open source transmitters. Readers interested in detailed information can refer to the Web site http://www.open-tx.org or http://www.reseau.org/arduinorc, based on which transmitters can be customized.
3For a multicopter, the throttle control stick is to control the upward-and-downward movement, and the rudder control stick is to control the yaw movement, while the aileron stick is to control the roll movement, and the elevator stick is to control the pitch movement.

48
Fig. 2.20 Futaba RC transmitter and receiver

2 Basic Composition

Antenna

Handle

Knob

Status LED

Retractable landing

gear switch

Trainer/throttle

cut switch

/

Throttle/rudder control stick
Throttle trim lever
Rudder trim lever

Aileron & Elevator dual rate switch
Switches
Aileron/ ELevator control stick Elevator trim
lever Aileron trim lever

Power Neck strap hook

Touch screen
Liquid-crystal display screen

(a) RC transmitter

(b) RC receiver

2.4.1.2 Parameters
(1) Frequency The RC transmitter and the receiver communicate by radio waves, and the commonly used radio frequency is 72 MHz and 2.4 GHz. Before the utilization of 2.4 GHz, the chance of co-channel interference was very high. The phenomenon might occur when one RC transmitter controls two model aircraft. With the development of model airplane, the safety becomes a serious issue. Therefore, 2.4 GHz transmitters emerged. The 2.4 GHz radio frequency falls in the microwave range, which was used in wireless audio transmission initially. The 2.4 GHz radio communication technology has the following advantages. 1) High frequency. The technology relies on microcomputers to plan frequencies automatically instead of setting the frequency by controlling the crystal. 2) Less chance of co-channel interference. When several transmitters work together, this technology allows frequency-hopping automatically to avoid mutual interference. 3) Low power consumption. As no crystal is used as frequency control parts, the power consumption is reduced signiﬁcantly. 4) Smaller volume. Since the control wavelength is very short, transmitting and receiving antennas can be shortened greatly. 5) Rapid response and high control accuracy. Although the 2.4 GHz RC transmitter can deal with the co-channel interference, some problems still exist. For example, the 2.4 GHz microwave is of good straightness. In other words, the control signal has a bad performance when there exists an obstacle between the RC transmitter and the multicopter. As a result, the transmitting antenna and receiving antenna should be maintained line of sight; and the obstacles between them, such as houses and warehouse, should be avoided.
(2) Modulation [11, pp. 129–133], [12] Pulse Code Modulation (PCM) implies the encoding of signal pulses, and Pulse Position Modulation (PPM) refers to the modulation of high-frequency signal. By operating sticks on the transmitter, the value of potentiometer varies accordingly. By the encoding circuit, it can be read and converted into a pulse coded signal, namely PPM or PCM, which will be further modulated through a high-frequency modulation circuit and sent by high-level circuit. The advantages of PCM are not only the strong anti-interference capacity, but also the convenience to be programmed by a computer. Compared with PCM, PPM is easier to realize and cheaper, but is more susceptible to interference.

2.4 Command and Control System

49

(3) Channels One channel corresponds to one separate operation, and generally there are six-channel transmitters, eight-channel transmitters, and ten-channel (or more) transmitters to control multicopters. The operations needed include: throttle control, yaw control, pitch control, and roll control. In this way, an RC transmitter requires four channels at least. Considering the mode transition and control of camera gimbal, transmitters with at least eight channels are recommended.
(4) Mode [13] RC transmitter modes refer to the way how an RC transmitter is conﬁgured to control a multicopter, i.e., the relationship that sticks correspond to movements. For example shown in Fig. 2.21, “Mode 1”: pitch/yaw on the left stick, throttle/roll on the right (also called right-hand mode, popular in Japan, more suitable for ﬁxed-wing aircraft); “Mode 2”: throttle/yaw on the left, pitch/roll on the right (also called left-hand mode, popular in the U.S. and other parts of the world including China, more suitable for multicopters).
(5) Throttle In general, the throttle control stick in an RC transmitter is designed to be unable to recover back to its original position automatically. The direct-type RC transmitter in this book refers to the type that the total thrust has a positive correlation with the deﬂection of the throttle control stick. Furthermore, a connected motor will stop with the throttle control stick at the bottom and work at a full speed with the throttle control stick at the top. The transmitter can also be set to recover back to the midpoint automatically once it is released, which is called the increment-type RC transmitter in this book. Correspondingly, the motor speed will be increased when the stick is higher than the midpoint and decreased when lower than the midpoint. The mode transition can be realized by loosening and tightening the spring washers behind the stick and then using speciﬁed algorithms.
(6) Remote control distance The control distance of an RC transmitter is restricted by its power. For example, the effective control distance of the “Md-200” is claimed to be 1000 m. In order to extend the control distance, power ampliﬁers and antennas can be used.

Throttle Yaw

Pitch

Pitch

Roll Yaw

Throttle Roll

Mode 2

Mode 1

For multicopters

For fixed-wing aircraft

Throttle : control the upward-and-downward movement corresponding to the throttle stick

Pitch : control the forward-and-backward movement corresponding to the elevator

Yaw : control the yaw movement

corresponding to the rudder

Roll : control the leftward-and-rightward movement corresponding to the aileron

Fig. 2.21 Different control modes of an RC transmitter

50
2.4.2 Autopilot

2 Basic Composition

A multicopter autopilot is a ﬂight control system used to control the attitude, position, and trajectory of a multicopter. It can be semi-automatically (needs commands from remote pilot) or fully automatically. Autopilots have a control framework which is often based on Proportional-Integral-Derivative (PID) controllers, leaving parameters to be tuned for different multicopters.

2.4.2.1 Composition A multicopter autopilot can be divided into the software part and hardware part. The software part is the brain of a multicopter and it is used to process and send information, while the hardware part generally includes the following components:
(1) GPS receiver. It is used to obtain the location information of multicopters. (2) Inertial Measurement Unit (IMU). It includes: the three-axis accelerometer, three-axis gyroscope,
and electronic compass (or three-axis magnetometer). It is used to obtain attitude information of a multicopter. In general, a six-axis IMU is the combination of a three-axis accelerometer and a three-axis gyroscope; a nine-axis IMU is the combination of a three-axis accelerometer, a threeaxis gyroscope and a three-axis magnetometer; and a ten-axis is the combination of a nine-axis IMU and a barometer. (3) Height sensor. The barometer and ultrasonic range ﬁnder are used to obtain the absolute height (altitude) and relative height (distance to the ground), respectively. (4) Microcomputers. It acts as a platform to receive information and run algorithms to produce control command. (5) Interface. It acts as a bridge between the microcomputer and the other devices, such as the sensors, ESC, and RC receiver.

2.4.2.2 Function (1) Perception. It is used to solve the problem of “where the multicopter is.” The GPS receiver, IMU,
and height sensors all have a lot of noises, and their refresh rates are not the same. For example, the refresh rate of a GPS receiver is 5 Hz, while the refresh rate of an accelerometer may be 1000 Hz. One task of an autopilot is to fuse these information together to obtain accurate position and attitude. This mainly corresponds to Chaps. 7–9 in this book. (2) Control. Control is to solve the problem of “how the multicopter ﬂies to a desired position.” Based on the position and attitude measured and given, the low-level ﬂight control law is carried out, generating commands for ESCs to control the motors of a multicopter to achieve a desired position. This mainly corresponds to Chaps. 10–12 in this book. (3) Decision. Decision is to solve the problem of “where the multicopter will go.” The decisionmaking mainly includes the mission decision-making and failsafe. This mainly corresponds to Chaps. 13 and 14 in this book.

2.4.2.3 Open Source Autopilot Currently, there are many free open source autopilots of multicopters. The Web sites can be found from Table 1.3 in Chap. 1. Open source autopilot ﬂight control boards (hardware) are shown in Fig. 2.22. The types and performance of components of some autopilots are shown in Table 2.2.

2.4 Command and Control System

51

Fig. 2.22 Open source autopilots of multicopters

(a) APM(Ardupilot) (b) Openpilot

(c) Paparazzi

(d) Pixhawk

(e) Mikrokopter

(f) KKmulticopter

(g) Multiwii

(h) Aeroquad

(i) Crazyflie

(j) CrazePony

(k) DR.R&D

(l) Anonymous

2.4.3 Ground Control Station
2.4.3.1 Function An important part of a GCS is the software. Remote pilots can interact with the software using the mouse, keyboard, button, and joystick. So, way points can be planned by remote pilots for multicopters in advance. Furthermore, remote pilots can monitor the ﬂight status in real time and set new missions to intervene ﬂight. Besides, the software can record and playback ﬂight for analysis.
2.4.3.2 Open Source GCS Software There are a lot of free open source GCS software available for multicopters now. Figure 2.23 shows some screenshots of GCS software. Most of the GCS software can be downloaded from the corresponding autopilot Web sites, which are listed on the Table 1.3.
2.4.4 Radio Telemetry
2.4.4.1 Function Radio telemetry refers to using Digital Signal Processing (DSP) technology, digital modulation and demodulation, radio technology to transmit data with high accuracy, and it is equipped with functions

52

Table 2.2 The parameters of open source autopilot ﬂight control boards

Description

Size (mm)

Weight (g)

rocessor

Process

Gyroscope

frequency (MHz)

Accelerometer Magnetometer Barometer

Arducopter

66 × 40.5

23

ATmega2560

16

MPU-6000

MPU-6000

HMC5843

MS5611

Openpilot

36 × 36

8.5

STM32F103CB 72

ISZ/IDC-500 ADX330

HMC5843

BMP085

Paparazzi(Lisa/M) 51 × 25

10.8

STM32F105RCT6 60

MPU-6000

MPU-6000

HMC5843

MS5611

Pixhawk

40 × 30.2

8

LPC2148

60

ISZ/IDC-500 SCA3100-D04 HMC5843

BMP085

Mikrokopter

44.6 × 50

35

ATmega644

20

ADXRS610

LIS344ALH

KMZ51

MPX4115A

Kkmulticopter Multiwii Aeroquad

49 × 49 N/Aa N/Aa

11.7 N/Aa N/Aa

ATmega168 Arduinob Arduinob

20 8–20 8–20

ENC-03 ISZ/IDC-650 ITG3200

– LIS3L02AL ADXL345

– HMC5883L HMC5883L

– BMP085 BMP085

Crazyﬂie 2.0

90 × 90

19

STM32F405

168

MPU-9250

MPU-9250

MPU-9250

LPS25H

CrazePony-II(4) 38.9 × 39.55 20

STM32f103T8U6 72

MPU6050

MPU6050

HMC5883L

MS5611

Dr.R&D(2015)IV 33 × 33

300 (the whole) STM32F103

72

MPU6050

MPU6050

HMC5883L

Ultrasound HC-SR04

Anonymous(V2) 75 × 45

40

STM32F407

168

MPU6050

MPU6050

AK8975

MS5611

Note a: uncertain. Because Multiwii and Aeroquad support dynamic hardware conﬁguration, their sizes are related with construction. b: The ﬂight control board is developed based on Arduino, so the processor can be changed. Most data is cited from [14]

2 Basic Composition

2.4 Command and Control System

53

(a) MissionPlanner (Ardupilot)

(b) Openpilot

(c) Paparazzi

(d) QGroundControl(PX4) (e) Mikrokopter

(f) Multiwii

(g) Aeroquad

(h) Crazyflie

(i) CrazePony

Fig. 2.23 Screenshots of some GCS softwares

(j) D.R R&D

of forward error correction and balanced soft decision. In contrast to analog radio telemetry which is made up of analog Frequency Modulation (FM) station and modem, digital radio telemetry provides transparent RS232 interface whose transmission rate is 19.2 Kbps. It is able to send and receive data in less than 10 ms and shows some parameters such as ﬁeld intensity, temperature, voltage, state error statistics, alarm, and network management. As a medium of communication, radio telemetry has speciﬁc area of applications. In some special conditions, it can provide real-time and reliable data transmission for the monitoring signals in private network. Technology of radio telemetry is suitable for geographical environment which is scattered and complex as it features low cost, easy installation and maintenance, strong diffraction capability, ﬂexible network structure, far coverage, etc. One end of radio telemetry is connected to the GCS software, and the other end is connected to the multicopter. Communication is performed using certain protocols to maintain the two-way communication of a multicopter and the corresponding GCS.
2.4.4.2 Parameter (1) Frequency. (2) Transmission distance. (3) Transmission rate.
More parameter information on data links can be found in [15, pp. 191–246].
2.4.4.3 Communication Protocol Communication protocol is also called communication regulations, referring to as the convention of the data transmission on both sides. The convention includes uniform rules of data format, synchronous

54

2 Basic Composition

method, transmission rate, procedure, error checking, and correct on and deﬁnition of control characters, which should be recorded by both sides of communication. It is also called link control regulations. The formulation of communication protocol is advantageous to the separation of GCS and autopilot. As long as communication protocols are obeyed, the GCS software can be compatible with different autopilots.
MAVLink communication protocol is a library organization which only has the header ﬁles and it is designed for micro and small aircraft. It is on the basis of the GNU (GNU’s Not Unix) Lesser General Public License (LGPL) and MAVLink can efﬁciently encapsulate C-data structure through a serial port, and send the data packet to the GCS. This communication protocol is widely tested by PX4 , APM, and Parrot AR. Drone. There are other protocols. For example, Openpilot autopilot adopts UAVTalk protocol to communicate with GCS.

2.5 Summary
As the Chinese idiom says, “small as the sparrow is, it possesses all its internal organs (small, but complete!).” This proverb is also applicable to a multicopter. This chapter introduces each component of a multicopter mainly in the aspects of function and key parameters. The composition of a multicopter introduced above can support the fully-autonomous ﬂight of a multicopter. For the multicopter under the Semi-Autonomous Control (SAC) mode, some components can be removed, such as GCS and GPS receiver. In order to choose better components and improve the performance or ﬁnd out the causes of failure, it is necessary to have a deep and comprehensive understanding of multicopters. For example, by adjusting the ESC parameters and choosing appropriate propellers, the ﬂight performance can be improved; by considering the compatibility of ESCs and motors in advance, some crashes can be avoided.

Exercises
2.1 Find a multicopter with the airframe, propeller, ESC, motor, battery, and then explain the meaning of the key parameters of each component in detail.
2.2 Give a method of checking propeller dynamic balance.
2.3 Explain the principle of ESC with sinusoidal driver.
2.4 Choose and compare two autopilots, then clarify their advantages and disadvantages.
2.5 In order to combine the advantage of airplanes and multicopters, there are some kinds of aircraft able to take off and land vertically being available online. Find out a product and analyze its ﬂight principle, advantages and disadvantages.

References
1. Frame materials. http://aeroquad.com/showwiki.php?title=Frame-Materials. Accessed 7 Apr 2016 2. Hrishikeshavan V, Black J, Chopra I (2014) Design and performance of a quad-shrouded rotor micro air vehicle.
J Aircr 51:779–791

References

55

3. Harrington AM (2011) Optimal propulsion system design for a micro quad rotor. Dissertation, University of Maryland
4. RC airplane propellers. http://www.rc-airplanes-simpliﬁed.com/rc-airplane-propellers.html. Accessed 29 Jan 2016 5. MacCamhaoil M (2012) Static and dynamic balancing of rigid rotors. Bruel & Kjaer application notes, BO: 0276–12 6. Wijerathne C (2015) Propeller balancing. http://okigihan.blogspot.com/p/propellerbalancing-propeller-unbalance.
html. Accessed 29 Jan 2016 7. Laser balancing props. http://ﬂitetest.com/articles/Laser_Balancing_Props. Accessed 29 Jan 2016 8. Chapman SJ (2005) Electric machinery fundamentals, 4th edn. McGraw-Hill Higher Education, Boston 9. Bertoluzzo M, Buja G, Keshri RK et al (2015) Sinusoidal versus square-wave current supply of PM brushless DC
drives: a convenience analysis. IEEE Trans Ind Electron 62:7339–7349 10. Büchi R (2014) Radio control with 2.4 GHz. BoD–Books on Demand 11. Norris D (2014) Build your own quadcopter. McGraw-Hill Education, New York 12. Rother P (2000) PCM or PPM? Possibilities, performance? http://www.aerodesign.de/peter/2000/PCM/PCM_
PPM_eng.html. Accessed 29 Jan 2016 13. RC transmitter modes for airplanes. http://www.rc-airplane-world.com/rc-transmitter-modes.html. Accessed 29
Jan 2016 14. Lim H, Park J, Lee D et al (2012) Build your own quadrotor: open-source projects on unmanned aerial vehicles.
IEEE Robot Autom Mag 19:33–45 15. Fahlstrom P, Gleason T (2012) Introduction to UAV systems, 4th edn. Wiley, UK

Airframe Design

3

When given a multicopter, its conﬁguration and structure come into our sight ﬁrst, including the shape and size of the airframe, the choice of motors and propellers, and the distribution of the battery and the payload. All these designs not only inﬂuence the multicopter performance, but also help customers distinguish between different brands of multicopters. Compared with the conﬁguration design, structural design to reduce vibration and noise is more important, especially for multicopters ﬂying over residential areas. Considerable vibration will degrade the normal operation of a multicopter, consume more energy, accelerate component aging, and reduce the quality of aerial photography. Similarly, considerable noise will affect the nearby residents’ life and make the multicopters not suitable for detective works. This chapter aims to answer the question below:
What should be taken into consideration when designing the airframe of a multicopter?
The answer to this question mainly involves three aspects including conﬁguration design, anti-vibration design, and noise reduction.

© Springer Nature Singapore Pte Ltd. 2017

57

Q. Quan, Introduction to Multicopter Design and Control, DOI 10.1007/978-981-10-3382-7_3

58

3 Airframe Design

Zhaozhou Bridge
The ancient Chinese had already realized that ingenious structure design could enhance the reliability. The Anji Bridge, also known as Zhaozhou Bridge, constructed in the years 605–618 during the Sui dynasty (581–618), was designed by a craftsman named Chun Li. This bridge has a long history of 1400 years. This magnificent bridge is about 50 m long with a central span of 37 m. It stands 7.3 m tall and has a width of 9 m. The whole bridge is made of limestone slabs. Instead of piers, this bridge has a central arch and two small side arches on each side of the main arch. Normally, the river can pass through the main arch. When the bridge is submerged in a flood, these side arches allow water to pass through. This kind of design is a great innovation in the bridge construction history. This structure can not only reduce the flood impact, but also save materials, thereby reducing the total weight of the bridge.

3.1 Configuration Design

59

3.1 Configuration Design

The conﬁguration design of a multicopter includes overall design of an airframe and layout of each components.

3.1.1 Airframe Configuration
3.1.1.1 Fuselage Configuration
(1) Cross conﬁguration Take quadcopters as an example. A quadcopter uses four propellers to produce thrust. Two booms cross at the center, and the propellers are symmetrically distributed at the end of four arms. The common structures are shown in Fig. 3.1. The space in the middle of the fuselage can be used to place the autopilot and other peripheral equipment. The cross conﬁguration can be further divided into two types as shown in Fig. 3.1. Compared with plus-conﬁguration quadcopters, X-conﬁguration quadcopters have higher maneuverability (more rotors involved in pitch and roll control) and less occlusion of the forward ﬁeld of view, so the X-conﬁguration quadcopters are much more popular.
(2) Ring conﬁguration The ring conﬁguration is like that shown in Fig. 3.2. The ring conﬁguration can be treated as a whole, which is more rigid than the traditional cross fuselage and more helpful for reducing the vibration generated by motors and propellers. However, the cost is that its fuselage is heavier than the cross conﬁguration, which may reduce the maneuverability in some degree.

Fig. 3.1 Cross conﬁguration

Forward

Forward

Rightward

Rightward

Fig. 3.2 Ring conﬁguration

(a) Plus-Configuration

(b) X-Configuration
Forward

Rightward

60

3 Airframe Design

3.1.1.2 Motor-Propeller Mounted
(1) Common form and co-axis form with two propellers Usually, one motor and one propeller are attached at the end of one arm, which is called the common form, as shown in Fig. 3.3a. But sometimes, in order to increase the loading capacity (by increasing the number of propellers) without increasing the size of the multicopter, designers mount two propellers at the end of one arm (one at the top and the other at the bottom), which is called the co-axis form, as shown in Fig. 3.3b. However, due to the interference in air ﬂow, adopting this form will reduce the efﬁciency of the single propeller. The two propellers of the co-axis form are approximately equivalent to 1.6 propellers as the common form. In order to improve efﬁciency, it is necessary to further optimize the co-axis system. When combining with different motors and propellers, the co-axis efﬁciency can be improved to some extent.
Experiments have also indicated that the space between two propellers will affect the efﬁciency of the co-axis propeller system as well. According to the reference [1, p. 192], it is recommended that h/rp > 0.357, where the deﬁnitions of h and rp are shown in Fig. 3.4. In the mechanical design, for simplicity, two motors are connected together forming a co-axis system.
(2) Angle of propeller disc Most propeller discs are horizontally assembled when the multicopter is placed on a levelled surface, because this kind of design is simple and easy to control. In this design, the thrust produced by the propellers is always perpendicular to the fuselage plane. As a result, the multicopter has to change its pitch angle to achieve a forward ﬂight. At this moment, if a forward-looking camera is mounted with the multicopter, then, in order to make the optical axis of the camera point horizontal, the camera stabilizer needs to rotate as shown in Fig. 3.5a. On the other hand, there are some multicopters with non-horizontal propeller discs, forming a nonzero angle with the levelled surface when placed on it.

Fig. 3.3 Common form and co-axis form with two propellers

Fig. 3.4 A simple connection and its geometry parameters of a co-axis form with two propellers

(a) Common form

(b) Co-axis form with two propellers

rp Propeller

Motor

h

3.1 Configuration Design

Fig. 3.5 Multicopters with horizontal disc and non-horizontal disc in forward ﬂight

Flight direction Thrust

Thrust
Horizontal force

Horizontal force
ob
zb

CC

(a) The disc is horizontal

Thrust
Horizontal force

61
Flight direction Thrust
Horizontal force
ob

C

zb (b) The disc is not horizontal

This kind of design is beneﬁcial because the produced thrust has components along the three body axes and there is no need to change the pitch of the multicopter in a forward ﬂight, as shown in Fig. 3.5b. As a result, camera stabilizers can be removed. However, as a result, such a structure should have six propellers at least because there are six independent control variables. A multicopter with such a structure is shown in Fig. 3.6. Some researchers also designed the multicopter with changeable propeller discs to achieve ﬂexible control [2].
(3) Motor facing downward and upward For multicopters, there exist two ways installing motors: facing downward and facing upward. Propellers of a multicopter with motors facing downward produce push force, while propellers with motors facing upward produce pull force. Figure 3.7a shows a kind of multicopter with motors facing downward, advantages of which include:
1) Producing complete downwash, less interference from the fuselage. 2) Protecting motors against rain. 3) Ensuring a more accurate measurement of the barometer for that the downwash of air is lower than
the position where the barometer places.
Figure 3.7b–d shows some other kinds of multicopters with motors facing upward, advantages of which include:
(1) Protecting propellers against crash in landing phase. (2) Giving a wider view of the camera.

3.1.1.3 Propeller Radius and Airframe Radius The size of a multicopter is closely related to the radius of the propeller. Assuming that the angle between two arms is θ , then for a Y6-conﬁguration hexacopter (Fig. 3.8a), θ = 120◦; for a traditional quadcopter (Fig. 3.8b), θ = 90◦; for a traditional hexacopter (Fig. 3.8c), θ = 60◦. According to Fig. 3.8,
Fig. 3.6 CyPhyLVL1

62
Fig. 3.7 Multicopters with motor facing downward and upward

(a) Ehang Ghost

(c) Xaircraft Xmission

3 Airframe Design
(b) Xiro Xplorer (d) DJI Phantom

Fig. 3.8 Multicopters with different conﬁgurations and their geometry parameters

if the number of arms of multicopter is n, there is θ = 360◦/n, then the relationship between the airframe radius R and the maximum radius of a propeller rmax is

R

= rmax/ sin

θ 2

=

rmax/ sin

180◦ . n

(3.1)

In [3], numerical simulation results show that the thrust is decreased because of the aerodynamic interference between propeller ﬂow ﬁelds, and the cyclic ﬂuctuation of the thrust appears. However, this inﬂuence is negligible when the rotors are not too close to each other. Additionally, as shown in [4, p. 81], by using smoke plume to visualize airﬂow, it can be clearly observed that when the space between propellers varies from 0.1rmax to rmax, each propeller has its independent vortex without affecting propeller performance. Hence, in order to make a multicopter more compact without losing much efﬁciency by the aerodynamic interference, the following rule of thumb can be considered

rmax = 1.05rp ∼ 1.2rp

(3.2)

where the propeller radius rp is determined by the weight and the maximum payload of a multicopter. So, once the propeller radius is determined, the airframe radius is determined according to Eq. (3.1).

3.1 Configuration Design

63

3.1.1.4 Relationship Between Size and Maneuverability [5]

Maneuverability is the ability to change its own state, which is closely related to the maximum accel-

eration of a multicopter. Changing the size of a multicopter will change its weight and moment of

inertia, and ﬁnally determine the maximum acceleration of translation and rotation. In this chapter,

the acceleration model in the hover mode is built to analyze the inﬂuence of different sizes on the

multicopter performance. The propeller thrust Tp and the propeller moment Mp can be expressed as

(see Chap. 4 for detail)

Tp

=

(

1 2π

)2CTρ

2(2rp)4

Mp

=

(

1 2π

)2CMρ

2(2rp)5

(3.3)

where CT represents the thrust coefﬁcient, CM represents the torque coefﬁcient, ρ is the air density, is the angular velocity of the propeller. Since as previously analyzed rp ∼ R (here “∼” means “in the

same order of magnitude”), according to Eq. (3.3), the total force T and moment M on the multicopter

satisfy

⎧

⎨

T ∼ Tp

⎩

Mpitch, Mroll ∼ Tp Myaw ∼ Mp

·

R

⇒

T∼ M∼

2 R4 2 R5

where Mpitch, Mroll, Myaw are the moments generating pitch, roll and yaw, respectively. Moreover, for

a normal multicopter, the mass m and the moment of inertia J roughly satisfy the following relation

with R that

m ∼ R3, J ∼ R5.

As a result, the acceleration of translation (also called linear acceleration) a is determined by the thrust and the mass acceleration of rotation (also called angular acceleration) α is determined by the moment and the moment of inertia, as follows:

a

=

T m

∼

2 R4 R3

=

2R

α=

M J

∼

2 R5 R5

=

2.

(3.4)

In the following, to study the relationship between the propeller angular speed and the multicopter size, two widely used methods will be adopted.

(1) Mach scaling According to [5], Mach scaling is used for compressible ﬂows and essentially assumes that the blade tip speed is a constant, so
∼ 1/rp.

According to this assumption, one has

a

∼

1, R

α

∼

1 R2

.

(3.5)

(2) Froude scaling

The Froude number is a dimensionless number deﬁned as the ratio of the ﬂow inertia to the external

ﬁeld [6]. According to [5], Froude scaling is used for incompressible ﬂows and assumes that the Froude

number is a constant, so

vb2/Rg = 2rp2/Rg ∼ 1

where vb is the tip speed of propeller, and g is the acceleration of gravity. Since rp ∼ R,

64

3 Airframe Design

∼ 1/√rp.

According to this assumption, one has

a ∼ 1, α ∼ 1 .

(3.6)

R

From the analysis above, the body size has little relevance to the acceleration of translation (a ∼ 1)

according to the Froude number method. However, if the body size of a multicopter is small, the

acceleration

of

rotation

will be

high (both α

∼

1 R2

and α

∼

1 R

),

and

the

multicopter

will

have

a high

ability to change its attitude. Hence, the movement of micro multicopters is more ﬂexible.

In addition to the principle mentioned above, the size and rigidity of a propeller should also be

considered. The increase in propeller size (moment of inertia) will make its response slow, until the

multicopter loses its controllability. Because of this, helicopters mainly change the effective pitch of

the propeller rather than angular speed to change the thrust. Besides, the more rigid a propeller is, the

greater the fatigue the blade-ﬂapping effects bring to the rotor hub. The result is similar as bending a

soft iron wire one way then the other repetitively. Therefore, it is important to have ﬂexible propellers

with appropriate sizes.

3.1.1.5 Position of the CoG When designing a multicopter, it is necessary to put the CoG of the multicopter on the central axis, otherwise the extra moment will be caused. Another task is to determine whether the CoG should be above or below the propeller disc plane. In practice, the two structures both exist, as shown in Fig. 3.9. The commonly used way is shown in Fig. 3.9a. However, it is beneﬁcial for upward shooting when placing the camera above the propeller disc, as shown in Fig. 3.9b.
Next, how the position of CoG affects the stability of a multicopter will be analyzed from the perspectives of the forward ﬂight situation and the wind interference situation.
(1) Forward ﬂight As shown in Fig. 3.10a and b, when a multicopter ﬂies forward, the induced airﬂow will derive the drag force on the propeller. If the CoG position is low (as shown in Fig. 3.10a), the drag torque (generated by the drag force with the CoG as the pivot) will make the pitch angle turn to zero. On the other hand, according to Fig. 3.10b, if the CoG is high, the drag torque will cause the increase in the pitch angle until the multicopter is turned over. Therefore, when a multicopter is in forward ﬂight, the CoG under the propeller disc can make the multicopter stable.
(2) Wind interference In this situation, the multicopters with different position of CoG are shown in Fig. 3.10c and d. When gust blows, the induced airﬂow will give rise to the drag. If the CoG is high (Fig. 3.10d), the drag torque will make the pitch angle turn to zero. On the other hand, if the CoG of the multicopter is low (Fig. 3.10c), then the drag torque will cause the increase in the pitch angle until the multicopter is turned over. Therefore, a multicopter with high CoG can reject the wind interference.
In the two cases, no matter where the CoG is, the multicopter cannot be completely stable. According to [7, 8], if the position of the CoG is far above the propeller disc, a certain dynamic mode of the multicopter will be very unstable according to the stability analysis, then more control effort has to be made. Under the comprehensive consideration, the multicopter with a low CoG position is better than that with a high CoG in stability. In practice, the CoG should be as close to the center as possible and a little under it if necessary.

3.1 Configuration Design

65

Fig. 3.9 Two ways of camera installation of Freeﬂy quadcopter

Fig. 3.10 Forces on multicopters

(a) CoG is low

(b) CoG is high

The flight direction Thrust

Thrust

Drag

The flight direction Thrust

Drag torque Thrust

Drag

Drag

Center of gravity
Drag torque

Drag

Center of gravity

(a) Forward flight with low CoG

(b) Forward flight with high CoG

Thrust The gust direction

Thrust The gust direction

Drag

Thrust

Drag torque Drag
Thrust

Drag torque

Drag

(c) Wind interference with high CoG

Drag (d) Wind interference with low CoG

3.1.1.6 Autopilot Installation Position Since there are a lot of sensors in the autopilot, the ideal installation position of the autopilot should coincide with the geometric center of a multicopter. Owing to the centrifugal acceleration and tangential acceleration, if the autopilot is far from the center, it would produce an error in the accelerometer measurement, which is also called lever-arm effect.
(1) Standard installation position As shown in Fig. 3.11, there is a white arrow to indicate the forward direction of the autopilot. So, the autopilot is installed with the white arrow pointing toward the direction of forward ﬂight and ﬁxed by using a damping foam. The autopilot should be placed near the CoG of a multicopter with the assumption that the center of geometry and the CoG are coincident. In practice, the installation location is not so strict, but still should be as near as possible to the center of the aircraft and horizontal with motors.
(2) Substitution [9] The substitution of position can be taken into consideration if it is difﬁcult to install in the standard installation position. APM autopilot can be installed in the airframe at speciﬁc angle (such as 90◦), so that the standard installation position is retrieved by using a corresponding calibration algorithm.

66

Fig. 3.11 Installation position of an autopilot (photo adapted from http:// www.ardupilot.org)

The white arrow

Position of autopilot

3 Airframe Design

The center of multicopter

3.1.2 Aerodynamic Configuration
The aerodynamic design aims to reduce the drag of the fuselage of multicopter during ﬂight. Drag (sometimes called air resistance) is a force acting opposite to the relative motion of any object moving with respect to a surrounding air. Drag force can be distinguished as four types: frictional drag, pressure drag, induced drag, and interference drag [10].
(1) Frictional drag. Frictional drag is caused by atmosphere viscidity. The friction will be increased with stronger air stickiness, coarser surface, and larger superﬁcial area.
(2) Pressure drag. Pressure drag is the force caused by the pressure difference during ﬂight. It is related to windward area, the larger the windward area, the greater the pressure drag. Also, the vehicle shape will inﬂuence the pressure drag. The three objects in Fig. 3.12 have the same windward area. However, the structure of streamline is subject to the least drag.
(3) Induced drag. The induced drag and the lift are formed simultaneously. If a multicopter ﬂies at a high speed, the lift and the induced drag will be increased.
(4) Interference drag. The drag of a multicopter is not equal to the total drag produced by each part alone. The difference is the interference drag. If the relative position of each component is proper and the joint of components is smooth, the interference drag can be reduced.
In order to reduce the drag during ﬂight and improve the ﬂight efﬁciency, it is important to consider the aerodynamic design, especially for a multicopter with requirements of a high ﬂight speed or a far ﬂight distance. Overall, for a quadcopter, the pitch angle should be considered to decrease the maximum windward area, and a streamline body should be designed. Furthermore, the relative position of each component should be taken into account. The joint of components and the fuselage surface should
Fig. 3.12 Pressure drag of three objects

disk

low pressure area is big

sphere streamlines

low pressure area is small

3.1 Configuration Design
Fig. 3.13 Some commercial quadcopters with certain aerodynamic conﬁguration

(a) DJI Inspire 1

67
(b) Xaircraft Xmission

(c) Microdrones MD4-3000

(d) DHL Parcelcopter

be as smooth as possible. In practice, the drag coefﬁcient of a multicopter can be calculated through Computational Fluid Dynamics (CFD) software, and the aerodynamic conﬁguration can be optimized repeatedly and over until the performance is satisﬁed. Some commercial quadcopters with certain aerodynamic conﬁguration are shown in Fig. 3.13.

3.2 Structural Design
3.2.1 Design Principles of Airframe
(1) The structure of airframe is designed to support limited payloads without detrimental permanent deformation. At any payload up to limit payloads, the deformation may not interfere with safe operation. Moreover, the structure is able to support ultimate payloads1 without failure.
(2) After other necessary requirements have been achieved, the total weight is as light as possible. (3) The proportion of the length, the width, and the height of a multicopter is proper; and the structural
layout is suitable. (4) Esthetic and durable.

3.2.2 Anti-Vibration Consideration
3.2.2.1 Significance of Anti-Vibration Accelerometers are used for the estimation of the position and the attitude, which is of great importance. However, it is very sensitive to vibration. Concretely,
(1) Acceleration is directly related to the estimation of attitude angles. (2) The data of the acceleration is fused with the barometer and the GPS (Global Positioning System)
to estimate the multicopter position.

1The ultimate payload is the limit payload multiplied by prescribed factors of safety. For example, a factor of safety of 1.5 can be used.

68

3 Airframe Design

For such a purpose, preﬁlters (anti-aliasing ﬁlters) are inserted before acceleration signal sampling. Another important role of anti-vibration is to improve the quality of pictures. With perfect anti-vibration design, camera stabilizers can be removed, which is necessary for the miniaturization of multicopters.

3.2.2.2 Constraint of Vibration Strength [11] (1) Generally, the lateral vibration strength is less than 0.3g, while the longitudinal vibration strength
is less than 0.5g. (Note: g represents the acceleration of gravity here). (2) In practice, the vibration strength along all axes is better bounded less than 0.1g.

3.2.2.3 Main Source of Vibration [9] The body vibration mainly results from the airframe deformation and the asymmetry of motors and propellers.
(1) Airframe

1) The airframe deformation especially the arm deformation will result in the asynchronous vibration. So the arms should be rigid.
2) Common carbon ﬁber airframes are excellent in anti-torsion and anti-bending. 3) Compared with others, an airframe made of aluminum is heavier but more rigid.

Recently, the concept of wearable quadcopters has received more and more attention. One conceptual wearable quadcopter is shown in Fig. 3.14. However, the wearable quadcopter requires that its airframe be ﬂexible and easily transformed. These problems should be considered in the design. In this case, the airframe can be blended unidirectionally, opposite to the direction of the thrust and moments. Moreover, the airframe is anti-torsion and anti-bending in the direction of the thrust.
(2) Motor

1) Motors work smoothly. 2) The rotor holder should be coaxial with the bearing and the center of the propeller, thus getting
rid of the eccentric force produced when motor is rotating. 3) All rotors are in balance.

(3) Propeller

1) Propellers are in balance (refer to Sect. 2.3.1).
2) Propellers should be matched with the airframe size and the multicopter weight, and there are similar toughness2 when rotating both clockwise and counterclockwise.

Fig. 3.14 Nixie conceptual wearable quadcopter

(a) Flod

(b) Unfold

2The ability of a material to absorb energy and plastically deform without fracturing.

3.2 Structural Design

69

3) Carbon ﬁber propellers are highly rigid, but the hidden danger to personnel exists when propellers are in rotation.
4) The low-speed large propeller is more efﬁcient than the high-speed small one, but the large propeller will cause more vibration in amplitude.

After all factors above have been taken into account, the left problem is to consider methods for vibration damping and isolating.

3.2.2.4 Vibration Damping Between Autopilot and Airframe (1) Traditionally, the double-side foam type and the nylon button are used to ﬁx the autopilot. (2) In many cases, as the autopilot has small mass, the double-side foam type and the nylon button
are less effective. The tested feasible methods are to use the foam, the gal pad, the O-ring, and the earplug [11], as shown in Fig. 3.15.

At present, there also exist dampers specially for autopilots in market, shown in Fig. 3.16. It is made of two glass ﬁber frames, four damping balls, and two foam pads.

Fig. 3.15 Anti-vibration methods (photo adapted from http://www.ardupilot. org)

(a) Foam

(b) Gel pad

Fig. 3.16 An anti-vibration damper

(c) O-ring

(d) Earplug

70
3.2.3 Noise Reduction Consideration

3 Airframe Design

The noise of the multicopter is mainly caused by the high-speed rotation. Here, by referring to [12], the sound generation principle and noise-reducing methods are introduced.

3.2.3.1 Main Harm of Propeller Noise (1) If the body exists in the sound ﬁeld produced by propellers, some sensors may become invalid
because of the inﬂuence of noise. (2) Noise will affect the surrounding ﬂight environment, and cause pollution, especially when multi-
copters are over residential areas. (3) The body vibration and the acoustic fatigue induced by the noise may seriously inﬂuence the safety
of aircraft.

3.2.3.2 Propeller Sound Generating Principle For propellers and all kinds of turbo machines, they all generate sound by rotating blades. The highspeed rotating propeller will cause the high-frequency unsteady ﬂow of the surrounding air, and then, the energy will be released out in the form of noise. Noise of propellers can be classiﬁed into tone noise and broadband propeller noise.
(1) Tone noise Tone noise is caused by sources that repeat themselves exactly during each rotation of the propeller, which is further divided into loading noise and thickness noise. The loading noise is caused by the unsteady pressure (load) on the blade surface. In addition to unsteady loading noise, there is a contribution from the blade motion that is referred to as thickness noise.
(2) Broadband rotor noise Broadband rotor noise is a random, non-periodic, signal caused by random variations in blade loading resulting from the interaction of the blades with turbulence.

3.2.3.3 Noise Reduction Method To reduce the propeller noise, designers have to focus on reducing the blade tip speed, thickness, blade loading, unsteady ﬂow, broadband, vibration, or other elements. Parameters including propeller pitch, propeller diameter, blade thickness, blade count, blade shape, and airfoil section are important for noise reduction of propellers [13, pp. 28–36].
(1) Propeller pitch. For the same thrust requirement, reasonably increasing the blade sweep may decrease the propeller angular speed and the relative tip speed, and therefore reduce the noise radiated by propeller.
(2) Propeller diameter. For the same thrust requirement, increasing the diameter of propeller may signiﬁcantly decrease the revolving speed (according to Eq. (3.2)) and then reduce the noise in some degree. But from the compact design aspect, the propeller diameter is generally expected to be as small as possible.
(3) Blade thickness. Thickness noise is important at high tip Mach numbers. Reducing the total volume of blades can reduce the relative thickness and length of propeller blade proﬁle. Then, thickness noise can be reduced.
(4) Blade count. For the same thrust requirement, increasing the number of propeller blades can decrease the revolving speed of propeller and then reduce the noise. In practice, a propeller with odd number of blades can break the symmetry and reduce the possibility of sympathetic vibration. This makes it quieter than even blade propeller. For instance, according to experimental results, three-blade

3.2 Structural Design

71

propellers are generally more stable and quieter than two-blade propellers for multicopters. However, along with the increase in blade count, the cost and the producible difﬁculty may be increased rapidly, and a poor quality propeller without guarantee of static and dynamic balance will produce even more noise.
(5) Blade shape and airfoil section. The sound power of blade tips is highest according to the diametric distribution of sound power. It is possible to reduce noise by designing a blade to move the peak of aerodynamic loads from span distribution to internal diameter direction. In general, these parameters have a much larger effect on the aerodynamic performance of the propeller than they have on the noise.
Except for propeller design shown above, there are also other noise reduction methods. For example, an audio sensor can detect the noise generated by one propeller. By feedback, another propeller can produce anti-noise sound that cancels the noise generated by the ﬁrst one [14].

3.3 Summary
In general, after considering the basic design principles of airframe in Sect. 3.1.1, the design requirement should be further taken into consideration. For example, the hexacopter CyPhy LVL1 is quite distinctive for its non-horizontal propeller discs. Since the vibration is derived from the airframe transformation, and the asymmetry of motors and propellers, the airframe should be chosen as rigid as possible, and also high-quality motors and propellers should be chosen. In order to reduce noise, effective methods should be implemented. These can be achieved eventually by designing new propellers. In this chapter, some design principles without speciﬁc design methods are simply shown. The problems of how to design a multicopter minimizing the drag, vibration, and noise are deserved to research in the future.

Exercises
3.1 Show the reasons why X-conﬁguration performs better than plus-conﬁguration in maneuver.
3.2 In aircraft design, the Mach number and Froude number are always considered to be constant. Clarify the reasons.
3.3 Assume that the induced drag on propeller can be ignored. Based on that, build a simple model for the 2D multicopter as shown in Fig. 3.10 when it is hovering and analyze the inﬂuence on characteristic roots of open loop when CoG is high and low.
3.4 After inserting preﬁlters, the ability of anti-vibration can be improved. Clarify the reasons.
3.5 Except for the methods of anti-vibration introduced in this chapter, give some other methods.
3.6 Except for the methods of noise reduction introduced in this chapter, give some other methods.

References
1. Bohorquez F (2007) Rotor hover performance and system design of an efﬁcient coaxial rotary wing micro air vehicle. Dissertation, University of Maryland College Park
2. Ryll M, Bulthoff HH, Giordano PR (2015) A novel overactuated quadrotor unmanned aerial vehicle: modeling, control, and experimental validation. IEEE Trans Control Syst Technol 23(2):540–556

72

3 Airframe Design

3. Hwang JY, Jung MK, Kwon OJ (2014) Numerical study of aerodynamic performance of a multirotor unmannedaerial-vehicle conﬁguration. J Aircr 52(3):839–846
4. Harrington AM (2011) Optimal propulsion system design for a micro quadrotor. Dissertation, University of Maryland College Park
5. Mahony R, Kumar V, Corke P (2012) Multirotor aerial vehicles: modeling, estimation, and control of quadrotor. IEEE Robot Autom Mag 19(3):20–32
6. White FM (1999) Fluid mechanics. McGraw-Hill, New York 7. Bristeau PJ, Martin P, Salaun E et al (2009) The role of propeller aerodynamics in the model of a quadrotor UAV.
In: European control conference (ECC), Budapest, August, pp 683–688 8. Pounds P, Mahony R, Corke P (2010) Modelling and control of a large quadrotor robot. Control Eng Pract 18(7):691–
699 9. Mounting the ﬂight controller. http://ardupilot.org/copter/docs/common-mounting-the-ﬂight-controller.html.
Accessed 10 Oct 2016 10. Thomas ASW (1984) Aircraft drag reduction technology. Lockheed-Georgia Co Marietta Flight Sciences Div 11. Vibration Damping. http://ardupilot.org/copter/docs/common-vibration-damping.html. Accessed 10 Oct 2016 12. Marte JE, Kurtz DW (1970) A review of aerodynamic noise from propellers, rotors and lift fans. Technical report
32–1462, Jet Propulsion Laboratory, California Institute of Technology, USA 13. Harper-Bourne M (1972) Model turbojet exhaust noise part 2. contract report no CR72/31. Institute of sound and
vibration research, University of Southampton, Southampton 14. Beckman BC (2016) Vehicle noise control and communication. US patent 20,160,083,073

Modeling and Evaluation of Propulsion System

4

To design a multicopter, ﬁrst of all, a designer has to select proper components to assemble a multicopter to meet the performance requirements, such as hover endurance, system efﬁciency, maximum payload, maximum pitch angle, and maximum ﬂight distance. Multicopter performance is mainly determined by the chosen propulsion systems, consisting of propellers, brushless Direct Current (DC) motors, Electronic Speed Controllers (ESCs), and the batteries. Different components will lead to different ﬂight performance in a very complex way. For instance, it seems that increasing the capacity of the battery can increase endurance, but it also increases the weight and power, thus the endurance of ﬂight would probably even be decreased sometimes. As far as we know, in practice, many designers used to evaluate the performance of a multicopter through their experience or repeated experiments, which is an inefﬁcient and costly process. Moreover, the optimal choice of components related to the performance requirements remains a problem, which is hard to solve by experiments and experience [1, 2]. This chapter aims to answer the question below:
How is the ﬂight performance of a multicopter evaluated?
To answer this question, a practical modeling method is proposed for the propulsion system of multicopters to evaluate a series of performance indices. For a practical purpose, only technical speciﬁcations of components offered by manufacturers are required as the input to the proposed models. Testing examples are ﬁnally given to demonstrate the effectiveness of the proposed method. Furthermore, a Web site http://www.ﬂyeval.com is established which can provide users with the performance evaluation mentioned in this chapter.

© Springer Nature Singapore Pte Ltd. 2017

73

Q. Quan, Introduction to Multicopter Design and Control, DOI 10.1007/978-981-10-3382-7_4

74

4 Modeling and Evaluation of Propulsion System

Chinese Noria
The ancient Chinese had known how to utilize the natural sources of energy since long. The Chinese noria, for example, was recorded to be introduced into the society during the Tang dynasty. The Chinese noria consists of wheel-shaped water lifts, which were called water wheels. Water wheel is a kind of water lift installed at the riverside, with water containers, which would change direction and turn downward when emptied and would be lifted up when filled with water. This amazing machine has aroused the enthusiasm among lots of writers and poems. Enormous poetries and books have mentioned this great work, such as “Exploitation of the Works of Nature”.

4.1 Problem Formulation

75

4.1 Problem Formulation

There are two major tasks in this chapter: propulsion system modeling and performance evaluation. The propulsion system modeling is divided into four parts: propeller modeling, motor modeling, ESC modeling, and battery modeling. To ensure commonality of the method, all input parameters of these models should be the basic parameters that can be easily found on the product descriptions, as shown in Table 4.1. The outputs are a series of performance indices. For simplicity, they are formulated into the following four problems.
Problem 1 In the hover mode,1 according to the known parameters, estimate the hover endurance Thover, the throttle command σ , the ESC input current Ie, the ESC input voltage Ue, the battery current Ib, and the motor speed N .
Problem 2 In the maximum throttle mode,2 according to the known parameters, estimate the ESC input current Ie, the ESC input voltage Ue, the battery current Ib, the motor speed N , and the system efﬁciency3 η.
Problem 3 In the forward ﬂight mode, according to the known parameters, estimate the maximum load Gmaxload and the maximum pitch θmax.
Problem 4 In the forward ﬂight mode, according to the known parameters, estimate the maximum ﬂight speed Vmax, and the maximum ﬂight distance Zmax.
The modeling procedure is shown in Fig. 4.1.

4.2 Propulsion System Modeling
In the section, models for the propeller, the motor, the ESC, and the battery are established, respectively.

4.2.1 Propeller Modeling
For a multicopter, ﬁxed-pitch propellers are often used. Propeller performance depends on its thrust T (unit: N) and torque M (unit: N·m). Referring to [3, 4], they are expressed as

Table 4.1 Propulsion system parameters

Component

Parameters

Propeller Motor
ESC Battery

p = {Diameter Dp, Pitch Hp, Blade Number Bp, Propeller Weight Gp}
m = {KV Value KV0, Maximum Continuous Current ImMax, Nominal No-load Current Im0, Nominal No-load Voltage Um0, Resistance Rm, Motor Weight Gm}
e = {Maximum Current IeMax, Resistance Re, ESC Weight Ge}
b = {Capacity Cb, Resistance Rb, Total Voltage Ub, Maximum Discharge Rate Kb, Battery Weight Gb}

1The multicopter stays ﬁxed in the air, and relatively static to the ground. 2The maximum throttle case is an extreme case of a multicopter, in which motors are at full throttle state and the propellers have the maximum thrust. 3Here, system efﬁciency is the ratio of the propeller output power and the battery power at full throttle state.

76

4 Modeling and Evaluation of Propulsion System

Fig. 4.1 Modeling procedure

T = CTρ M = CMρ

N 60

2
Dp4

N 60

2
Dp5

(4.1) (4.2)

where N (unit: RPM) denotes the propeller speed, Dp (unit: m) denotes the diameter of the propeller,

CT and CM are the dimensionless thrust coefﬁcient and torque coefﬁcient, respectively. Here, the air density ρ (unit: kg/m3), which varies with respect to the local altitude h (unit: m) and the temperature

Tt (unit: ◦C ), is written as

ρ

=

273 Pa 101325(273

+

Tt) ρ0

(4.3)

where the standard air density ρ0 = 1.293 (kg/m3) (0 ◦C, 273 K). The atmospheric pressure Pa (unit: Pa) is obtained as [5, p. 5]

Pa

=

101325(1

−

0.0065

h 273 +

Tt

)5.2561.

(4.4)

The height of a multicopter varies slightly while performing a task. So, h and Tt are treated as constants in the following performance evaluation. The remaining task in propeller modeling is to ﬁnd the parameters CT and CM in Eqs. (4.1) and (4.2). To make things clearer, they are expressed as

CT = fCT( p) CM = fCM( p)

(4.5)

where p is the parameter set as in Table 4.1. The detailed procedure to obtain fCT ( p) and fCM ( p) is shown in Appendix 4.6.1, given as

CT = fCT p CM = fCM p

0.25π

3

λζ

2

Bp

K

0

ε

arctan

Hp π Dp

−α0

π A+K 0

1 8A

π

2

Cdζ

2λ

Bp2

(4.6)

4.2 Propulsion System Modeling

77

where

Cd

=

Cfd

+

π

A

K

2 0

e

ε arctan

Hp π Dp

−

α0

(π A + K 0)2

2
.

(4.7)

The parameters A, ε, λ, ζ, e, Cfd, α0, which are not reﬂected in Table 4.1, are explained in Appendix 4.6.1. According to experimental results and the relevant literature [6, p. 150, p. 151, p. 174], [7, p. 62], [8, p.43], [9], it is suggested that the range of values of these parameters in Eq. (4.6) be taken as

A = 5 − 8, ε = 0.85 − 0.95, λ = 0.7 − 0.9

ζ = 0.4 − 0.7, e = 0.7 − 0.9, Cfd = 0.015

α0

=

−

π 36

−

0,

K0

=

6.11.

(4.8)

Note that the above parameters may vary with the difference of types, material, and technology of propellers.
To verify the proposed modeling method, the experimental data provided at the Web site of APC propellers4 is used for comparison. The parameters are chosen as A = 5, ε = 0.85, λ = 0.75, ζ = 0.55, e = 0.83, Cfd = 0.015, α0 = 0, K0 = 6.11. The other parameters for propellers in Table 4.1 are used directly from the model parameters given by APC. The results are shown in Fig. 4.2. It can be clearly observed that the results of the theoretical model match well with the experimental data. After comprehensive consideration of various propellers from different manufacturers, a set of mean parameters A = 5, ε = 0.85, λ = 0.75, ζ = 0.5, e = 0.83, Cfd = 0.015, α0 = 0, K0 = 6.11 is chosen to approximately evaluate the common propellers on the market. It should be noticed that CT, CM can be obtained by experimental data directly. In this case, the method mentioned above not needed, and the experimental data CT, CM can be used for performance evaluation directly.

4.2.2 Motor Modeling

Nowadays, the electric motors used in multicopters are often brushless DC motors. A brushless DC
motor can be modeled as a permanent magnet DC motor [10]. Its equivalent circuit is shown in Fig. 4.3,
where Um (unit: V) is the equivalent motor voltage, Im (unit: A) is the equivalent motor current, Ea (unit: V) is the back-electromotive force, Rm (unit: ) is the armature resistance, and Lm (unit: H) is the armature inductance of the motor. Iˆ0 (unit: A) is the no-load current required to overcome mechanical friction and air friction in the motor, as well as magnetic hysteresis and eddy current losses in the motor, and is approximately a constant at a certain motor speed [11]. And Ia = Im − Iˆ0 helps produce the electromagnetic torque. Here, the armature inductance Lm and the transient process caused by switching elements are ignored.
The motor modeling aims to obtain Um (unit: V) and Im (unit: A) from the motor speed N (equal to the propeller speed), the motor load torque M (equal to the propeller torque), and the motor parameter
class m. For clarity, they are expressed in functions as

Um = fUm ( m, M, N ) Im = fIm ( m, M, N )

(4.9)

where N and M are determined according to Eqs. (4.1) and (4.2) in the above section, and m is shown in Table 4.1. The detailed procedure to obtain fUm ( m, M, N ) and fIm ( m, M, N ) is shown

4The data is from https://www.apcprop.com/.

78

4 Modeling and Evaluation of Propulsion System

Fig. 4.2 Lift characteristics and torque characteristics model veriﬁcation
Fig. 4.3 Equivalent motor model

in Appendix 4.6.2, given as

Um = fUm ( m, M, N ) Im = fIm ( m, M, N )

M KV0Um0 9.55(Um0−Im0 Rm)

+

Im0

M KV0Um0 9.55(Um0−Im0 Rm)

+

Im0.

Rm

+

Um0−Im0 Rm KV0Um0

N

(4.10)

4.2 Propulsion System Modeling

79

4.2.3 Electronic Speed Controller Modeling

An Electronic Speed Controller (ESC) is a device external to the motor that electronically performs the commutation achieved mechanically in brushed motors. The ESC converts the DC voltage of the battery to a three-phase alternating signal which is synchronized with the rotation of the rotor and applied to armature windings. ESCs regulate motor speed within a range depending on the motor load torque and battery voltage. An ESC equivalent circuit is shown in Fig. 4.4.
Given the motor modeling results Um and Im, the ESC parameter set e and the battery parameter set b (see Table 4.1 for detail), the ESC modeling aims to obtain the input throttle command σ (scale value, range from 0 to 1, no unit), the input voltage Ue (unit: V), and the input current Ie (unit: A). For clarity, they are expressed in functions as

σ = fσ ( e, Um, Im, Ub) Ie = f Ie (σ, Im) Ue = fUe ( b, Ie) .

(4.11)

As shown in Fig. 4.4, Ueo is the equivalent DC voltage, given by

Ueo = Um + Im Re.

(4.12)

Based on Eq. (4.12), the throttle command σ is obtained as [12]

σ = Ueo ≈ Ueo . Ue Ub

(4.13)

Furthermore, since the input power of ESC is equal to the output power, the ESC input current is [12]

Ie = σ Im

(4.14)

which is limited by

Ie ≤ IeMax.

(4.15)

where IeMax (unit: A, from e) is the maximum current of ESC. The ESC voltage Ue is supplied by the battery voltage Ub (unit: V, from b), given by

Ue = Ub − Ib Rb

(4.16)

where Ib (unit: A) is the battery current and Rb (unit: , from b). For a multicopter, the number of ESCs is equal to the number of propulsors nr, so

Fig. 4.4 ESC model

80

4 Modeling and Evaluation of Propulsion System

Ib = nr Ie + I other

(4.17)

where Iother (unit: A) includes the current from other devices (like autopilot and camera) and other current loss, usually, Iother ≈ 1 A. From above, the functions in Eq. (4.11) are expressed as

σ = fσ ( e, Um, Im, Ub)

Um + Im Re Ub

Ie = f Ie (σ, Im) σ Im

Ue = fUe ( b, Ib) Ub − Ib Rb.

(4.18) (4.19) (4.20)

4.2.4 Battery Modeling

The battery model mainly aims to obtain the time of endurance Tb (unit: min) by using Ib, b, where

Ib is expressed in Eq. (4.17) and b is shown in Table 4.1. For clarity, the model is expressed in an

abstract function as

Tb = fTb ( b, Ib) .

(4.21)

The battery discharge process is simpliﬁed so that the battery voltage remains constant and the battery capacity is decreased linearly.5 Thus, the model fTb ( b, Ib) is

Tb = fTb ( b, Ib)

Cb − Cmin · 60

Ib

1000

(4.22)

where Cmin (unit: mAh) is the battery minimum capacity set according to the safety margin. Generally,

it can be chosen from 0.15Cb − 0.2Cb. Finally, the battery current Ib cannot exceed the maximum

current that the battery can withstand, which is expressed by the maximum discharge rate Kb (no unit,

from b), so

Ib

≤

CbKb . 1000

(4.23)

4.3 Performance Evaluation
So far, the propulsion system modeling is completed. In this section, Problems 1–4 are going to be investigated. Before evaluating the performance, a virtual multicopter is deﬁned here. Its weight is G (unit: N) and it has nr propulsors. This implies that nr motors, ESCs, and propellers are required. The attitude of the multicopter is h, and the temperature is Tt. The parameters related to its propulsion system have the same notations shown in Table 4.1 for simplicity.

4.3.1 Solution to Problem 1
In the hover mode, the sum of thrust provided by nr propellers should be equal to the weight of the multicopter G (unit: N). Thus, the thrust T (unit: N) provided by a single propeller is

5A more accurate model can be referred to [13, 14], which is nonlinear.

4.3 Performance Evaluation

81

T = G. nr

(4.24)

Then, according to Eqs. (4.1) and (4.2), the motor speed N and the propeller torque M can be obtained as

N = 60

T ρ Dp4CT

M = ρ Dp5CM

N2 60

(4.25)

where CT and CM are treated as the propeller parameters here, which should be estimated according

to Eq. (4.6), or measured based on experiments. Then, substituting M, N into Eq. (4.10), Um and Im

can be obtained

Um = fUm ( m, M, N ) Im = fIm ( m, M,N ) .

(4.26)

On the next stage, by using the given parameters of the ESC and the battery in Table 4.1, the throttle

command σ , the input current Ie, and the voltage Ue of ESC are obtained according to Eqs. (4.18),

(4.19) and (4.20) as

σ = fσ ( e, Um, Im, Ub)

Ie = f Ie (σ , Im) Ue = fUe ( b, Ib) .

(4.27)

Consequently, according to Eq. (4.17), the battery current is

Ib = nr Ie + Iother.

(4.28)

Finally, the hover endurance Thover (unit: min) is calculated by Eq. (4.22) as

Thover = fTb ( b, Ib) .

(4.29)

A ﬂow chart providing the details of Problem 1 is plotted in Fig. 4.5. An example for Problem 1 is given in Table 4.2, where the adopted parameters and evaluation results are shown.

Table 4.2 Example for Problem 1 Environment Basic parameters Components
Other parameters
Results

h=10 m, Tt = 25 ◦C
G = 14.7 N, nr = 4
p = {Dp = 10 in, Hp = 4.5 in, Bp = 2, Gp} m = {KV0 = 890 RPM/V, ImMax = 19 A, Im0 = 0.5 A, Um0 e = {IeMax = 30 A, Re = 0.008 , Ge} b = {Cb = 5000 mAh, Rb = 0.01 , Ub = 12 V, Kb = 45 C, Gb}
A = 5, ε = 0.85, λ = 0.75, ζ = 0.5, e = 0.83, Cfd = 0.015, α0 = 0, K0 = 6.11, C1 = 3, C2 = 1.5, Cmin = 0.2 Cb
Tloiter = 15.8 min, σ = 54.6%, Ie = 3.6 A, Ue = 11.8 V, Ib = 15.2 A, N = 5223 RPM

