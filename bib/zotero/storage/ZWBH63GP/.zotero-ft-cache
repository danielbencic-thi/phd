IEEE websites place cookies on your device to give you the best user experience. By using our websites, you agree to the placement of these cookies. To learn more, read our Privacy Policy.
Accept & Close
Loading [MathJax]/jax/output/HTML-CSS/fonts/TeX/AMS/Regular/MiscTechnical.js

Skip to Main Content

    IEEE.org
    IEEE Xplore
    IEEE SA
    IEEE Spectrum
    More Sites 

SUBSCRIBE

    Cart 
    Create Account
    Personal Sign In

IEEE Xplore logo - Link to home

    Browse
    My Settings
    Help

Institutional Sign In
IEEE logo - Link to IEEE main site homepage
ADVANCED SEARCH
Journals & Magazines > IEEE Robotics & Automation Ma... > Volume: 19 Issue: 3
Multirotor Aerial Vehicles: Modeling, Estimation, and Control of Quadrotor
Publisher: IEEE
Cite This
PDF
Robert Mahony ; Vijay Kumar ; Peter Corke
All Authors
854
Paper
Citations
1
Patent
Citation
30363
Full
Text Views
Free

    Alerts

Abstract
Document Sections

    Modeling of Multirotor Vehicles
    Estimating the Vehicle State
    Control
    Conclusions

Authors
Figures
References
Citations
Keywords
Metrics
Abstract:
This article provides a tutorial introduction to modeling, estimation, and control formultirotor aerial vehicles that includes the common four-rotor or quadrotor case.
Published in: IEEE Robotics & Automation Magazine ( Volume: 19 , Issue: 3 , Sept. 2012 )
Page(s): 20 - 32
Date of Publication: 28 August 2012
ISSN Information:
INSPEC Accession Number: 12981881
DOI: 10.1109/MRA.2012.2206474
Publisher: IEEE
null
©ISTOCK PHOTO.COM/© ANDREJS ZAVADSKIS

This article provides a tutorial introduction to modeling, estimation, and control for multirotor aerial vehicles that includes the common four-rotor or quad-rotor case.

Aerial robotics is a fast-growing field of robotics and multirotor aircraft, such as the quadrotor ( Figure 1 ), are rapidly growing in popularity. In fact, quadrotor aerial robotic vehicles have become a standard platform for robotics research worldwide. They already have sufficient payload and flight endurance to support a number of indoor and outdoor applications, and the improvements of battery and other technology is rapidly increasing the scope for commercial opportunities. They are highly maneuverable and enable safe and low-cost experimentation in mapping, navigation, and control strategies for robots that move in three-dimensional (3-D) space. This ability to move in 3-D space brings new research challenges compared with the wheeled mobile robots that have driven mobile robotics research over the last decade. Small quadrotors have been demonstrated for exploring and mapping 3-D environments; transporting, manipulating, and assembling objects; and acrobatic tricks such as juggling, balancing, and flips. Additional rotors can be added, leading to generalized N-rotor vehicles, to improve payload and reliability.

This tutorial describes the fundamentals of the dynamics, estimation, and control for this class of vehicle, with a bias toward electrically powered micro (less than 1 kg)-scale vehicles. The word helicopter is derived from the Greek words for spiral (screw) and wing. From a linguistic perspective, since the prefix quad is Latin, the term quadrotor is more correct than quadcopter and more common than tetracopter; hence, we use the term quadrotor throughout.
Modeling of Multirotor Vehicles

The most common multirotor aerial platform, the quadrotor vehicle, is a very simple machine. It consists of four individual rotors attached to a rigid cross airframe, as shown in Figure 1 . Control of a quadrotor is achieved by differential control of the thrust generated by each rotor. Pitch, roll, and heave (total thrust) control is straightforward to conceptualize. As shown in Figure 2 , rotor i rotates anticlockwise (positive about the z axis) if i is even and clockwise if i is odd. Yaw control is obtained by adjusting the average speed of the clockwise and anticlockwise rotating rotors. The system is underactuated, and the remaining degrees of freedom (DoF) corresponding to the translational velocity in the x-y plane must be controlled through the system dynamics.
Rigid-Body Dynamics of the Airframe

Let { x ⃗  , y ⃗  , z ⃗  } be the three coordinate axis unit vectors without a frame of reference. Let { A } denote aright-hand inertial frame with unit vectors along the axes denoted by { a ⃗  1 , a ⃗  2 , a ⃗  3 } expressed in { A } . One has algebraically that a ⃗  1 = x ⃗  , a ⃗  2 = y ⃗  , a ⃗  3 = z ⃗  in { A } . The vector r = ( x , y , z ) ∈ { A } denotes the position of the center of mass of the vehicle. Let { B } be a (right-hand) body fixed frame for the airframe with unit vectors { b ⃗  1 , b ⃗  2 , b ⃗  3 } , where these vectors are the axes of frame { B ] with respect to frame { A ] . The orientation of the rigid body is given by a rotation matrix A R B = R = [ b ⃗  1 , b ⃗  2 , b ⃗  3 ] ∈ SO(3) in the special orthogonal group. One has b ⃗  1 = R x ⃗  , b ⃗  2 = R y ⃗  , b ⃗  3 = R z ⃗  by construction.

We will use Z − X − Y Euler angles to model this rotation, as shown in Figure 3 . To get from { A } to { B } , we first rotate about a 3 by the the yaw angle, ψ , and we will call this intermediary frame { E } with a basis { e ⃗  1 , e ⃗  2 , v e c e 3 } where e ⃗  i is expressed with respect to frame { A } . This is followed by a rotation about the x axis in the rotated frame through the roll angle, ϕ , followed by a third pitch rotation about the new y axis through the pitch angle θ that results in the body- fixed triad { b ⃗  1 , b ⃗  2 , b ⃗  3 }
R = ⎛ ⎝ ⎜ c ψ c θ − s ϕ s ψ s θ c θ s ψ + c ψ s ϕ s θ − c ϕ s θ − c ϕ s ψ c ϕ c ψ s ϕ c ψ s θ + c θ s ϕ s ψ s ψ s θ − c ψ c θ s ϕ c ϕ c θ ⎞ ⎠ ⎟ ,
View Source Right-click on figure for MathML and additional features. R=\left(\matrix{ c\psi c\theta-s\phi s\psi s\theta & -c\phi s\psi & c\psi s\theta+c\theta s\phi s\psi\cr c\theta s\psi+c\psi s\phi s\theta & c\phi c\psi & s\psi s\theta-c\psi c\theta s\phi\cr -c\phi s\theta & s\phi & c\phi c\theta }\right), where c and s are shorthand forms for cosine and sine, respectively.

Let v ∈ { A } denote the linear velocity of { B } with respect to { A } expressed in { A } . Let Ω ∈ { B } denote the angular velocity of { B } with respect to { A } ; this time expressed in { B } . Let m denote the mass of the rigid object, and I ∈ R 3 × 3 denote the constant inertia matrix (expressed in the body fixed frame { B } . The rigid body equations of motion of the airframe are [2] and [3]
ξ ˙ m v ˙ R ˙ I Ω ˙ = v , = m g a ⃗  3 + R F , = R Ω × , = − Ω × I Ω + τ . (1a) (1b) (1c) (1d)
View Source Right-click on figure for MathML and additional features. \eqalignno{ \dot{\xi}&=v, &\hbox{(1a)}\cr m\dot{v} & =mg\vec{{\bf a}}_{3}+RF,&\hbox{(1b)}\cr \dot{R}&= R\Omega_{\times},&\hbox{(1c)}\cr {\bf I}\dot{\Omega}&=-\Omega\times {\bf I}\Omega+\tau. &\hbox{(1d)}} The notation Ω × denotes the skew-symmetric matrix, such that Ω × v = Ω × v for the vector cross product X and any vector v ∈ R 3 . The vectors F , τ ∈ { B } combine the principal nonconservative forces and moments applied to the quadrotor airframe by the aerodynamics of the rotors.

Figure 1. - A quadrotor made by Ascending Technologies with VICON markers for state estimation.
Figure 1.

A quadrotor made by Ascending Technologies with VICON markers for state estimation.

Show All

Dominant Aerodynamics

The aerodynamics of rotors was extensively studied during the mid 1900s with the development of manned helicopters, and detailed models of rotor aerodynamics are available in the literature [4] , [5] . Much of the detail about these aerodynamic models is useful for the design of rotor systems, where the whole range of parameters (rotor geometry, profile, hinge mechanism, and much more) are fundamental to the design problem. For a typical robotic quadrotor vehicle, the rotor design is a question for choosing one among five or six available rotors from the hobby shop, and most of the complexity of aerodynamic modeling is best ignored. Nevertheless, a basic level of aerodynamic modeling is required.
Figure 2. - Notation for quadrotor equations of motion. $N=4,\Phi_{i}$ is a multiple of $\pi/4$ (adapted with permission from [1]).
Figure 2.

Notation for quadrotor equations of motion. N=4,\Phi_{i} is a multiple of \pi/4 (adapted with permission from [1] ).

Show All
Figure 3. - The vehicle model. The position and orientation of the robot in the global frame are denoted by $\xi$ and $R$ respectively.
Figure 3.

The vehicle model. The position and orientation of the robot in the global frame are denoted by \xi and R respectively.

Show All

The steady-state thrust generated by a hovering rotor (i.e., a rotor that is not translating horizontally or vertically) in free air may be modeled using momentum theory [5, Sec. 2.26] as T_{i}:=C_{T} \rho A_{r_{i}}r_{i}^{2}\varpi_{i}^{2}, \eqno{\hbox{(2)}}
View Source Right-click on figure for MathML and additional features. T_{i}:=C_{T} \rho A_{r_{i}}r_{i}^{2}\varpi_{i}^{2}, \eqno{\hbox{(2)}} where, for rotor i, A_{r_{i}} is the rotor disk area, r_{i} is the radius, \varpi_{i} is the angular velocity, C_{T} is the thrust coefficient that depends on rotor geometry and profile, and \rho is the density of air. In practice, a simple lumped parameter model T_{i}=c_{T}\varpi_{i}^{2} \eqno{\hbox{(3)}}
View Source Right-click on figure for MathML and additional features. T_{i}=c_{T}\varpi_{i}^{2} \eqno{\hbox{(3)}} is used, where c_{T} > 0 is modeled as a constant that can be easily determined from static thrust tests. Identifying the thrust constant experimentally has the advantage that it will also naturally incorporate the effect of drag on the airframe induced by the rotor flow.

The reaction torque (due to rotor drag) acting on the airframe generated by a hovering rotor in free air may be modeled as [5, Sec. 2.30] Q_{i}:=c_{Q}\varpi_{i}^{2}, \eqno{\hbox{(4)}}
View Source Right-click on figure for MathML and additional features. Q_{i}:=c_{Q}\varpi_{i}^{2}, \eqno{\hbox{(4)}} where the coefficient c_{Q} (which also depends on A_{r_{i}}, r_{i} , and \rho ) can be determined by static thrust tests.

As a first approximation, assume that each rotor thrust is oriented in the z -axis of the vehicle, although we note that this assumption does not exactly hold once the rotor begins to rotate and translate through the air, an effect that is discussed in “Rotor Flapping.” For an N -rotor airframe, we label the rotors i\in\{1\cdots N\} in an anticlockwise direction with rotor 1 lying on the positive x axis of the vehicle (the front), as shown in Figure 2 . Each rotor has associated an angle \Phi_{i} between its airframe support arm and the body-fixed frame x axis, and it is the distance d from the central axis of the vehicle. In addition, \sigma_{i}\in\{-1, +1\} denotes the direction of rotation of the ith rotor: +1 corresponding to clockwise and −1 to anticlockwise. The simplest configuration is for N even and the rotors distributed symmetrically around the vehicle axis with adjacent rotors counter rotating.

The total thrust at hover (T_{\Sigma}) applied to the airframe is the sum of the thrusts from each individual rotor T_{\Sigma}=\sum_{i=1}^{N} \left\vert T_{i}\right\vert =c_{T}\left(\sum_{i=1}^{N}\varpi_{i}^{2}\right). \eqno{\hbox{(5)}}
View Source Right-click on figure for MathML and additional features. T_{\Sigma}=\sum_{i=1}^{N} \left\vert T_{i}\right\vert =c_{T}\left(\sum_{i=1}^{N}\varpi_{i}^{2}\right). \eqno{\hbox{(5)}} The hover thrust is the primary component of the exogenous force F=T_{\Sigma}\vec{{\bf z}}+\Delta \eqno{\hbox{(6)}}
View Source Right-click on figure for MathML and additional features. F=T_{\Sigma}\vec{{\bf z}}+\Delta \eqno{\hbox{(6)}} in (1b) , where \Delta comprises secondary aerodynamic forces that are induced when the assumption that the rotor is in hover is violated. Since F is defined in \{B\} , the direction of application is written \vec{{\bf z}} , although in the frame \{A\} this direction is \vec{{\bf b}}_{3}=R\vec{{\bf z}} .

The net moment arising from the aerodynamics (the combination of the produced rotor forces and air resistances) applied to the N-rotor vehicle use are \tau=(\tau_{1}, \tau_{2},\tau_{3}) . \eqalignno{ &\tau_{1}=c_{T}\sum_{i=1}^{N}d_{i}\sin(\Phi_{i})\varpi_{i}^{2},\cr &\tau_{2}=-c_{T}\sum_{i=1}^{N}d_{i}\cos(\Phi_{i})\varpi_{i}^{2},\cr &\tau_{3}=c_{Q} \sum_{i=1}^{N}\sigma_{i}\varpi_{i}^{2}.&\hbox{(7)}}
View Source Right-click on figure for MathML and additional features. \eqalignno{ &\tau_{1}=c_{T}\sum_{i=1}^{N}d_{i}\sin(\Phi_{i})\varpi_{i}^{2},\cr &\tau_{2}=-c_{T}\sum_{i=1}^{N}d_{i}\cos(\Phi_{i})\varpi_{i}^{2},\cr &\tau_{3}=c_{Q} \sum_{i=1}^{N}\sigma_{i}\varpi_{i}^{2}.&\hbox{(7)}} For a quadrotor, we can write this in matrix form \left(\matrix{ T_{\Sigma}\cr \tau_{1}\cr \tau_{2}\cr \tau_{3} }\right) \underbrace{\left(\matrix{ c_{T} &c_{T} &c_{T} &c_{T}\cr 0 & dc_{T} & 0 & -dc_{T}\cr -dc_{T} & 0 & dc_{T} & 0\cr -c_{Q} & c_{Q} & -c_{Q} & c_{Q} }\right)}_{\Gamma}\left(\matrix{ \varpi_{1}^{2}\cr \varpi_{2}^{2}\cr \varpi_{3}^{2}\cr \varpi_{4}^{2}}\right), \eqno{\hbox{(8)}}
View Source Right-click on figure for MathML and additional features. \left(\matrix{ T_{\Sigma}\cr \tau_{1}\cr \tau_{2}\cr \tau_{3} }\right) \underbrace{\left(\matrix{ c_{T} &c_{T} &c_{T} &c_{T}\cr 0 & dc_{T} & 0 & -dc_{T}\cr -dc_{T} & 0 & dc_{T} & 0\cr -c_{Q} & c_{Q} & -c_{Q} & c_{Q} }\right)}_{\Gamma}\left(\matrix{ \varpi_{1}^{2}\cr \varpi_{2}^{2}\cr \varpi_{3}^{2}\cr \varpi_{4}^{2}}\right), \eqno{\hbox{(8)}} and given the desired thrust and moments, we can solve for the required rotor speeds using the inverse of the constant matrix \Gamma . In order for the vehicle to hover, one must choose suitable \varpi_{i} by inverting \Gamma , such that \tau=0 and T_{\Sigma}=mg .

Blade Flapping and Induced Drag

There are many aerodynamic and gyroscopic effects associated with any rotor craft that modify the simple force model introduced above. Most of these effects cause only minor perturbations and do not warrant consideration for a robotic system, although they are important for the design of a full-sized rotor craft. Blade flapping and induced drag, however, are fundamental effects that are of significant importance in understanding the natural stability of quadrotors and how state observers operate. These effects are particularly relevant since they induce forces in the {x-y} rotor plane of the quadrotor, the underactuated directions in the dynamics, that cannot be easily dominated by high gain control. In this section, we consider a single rotor and we will drop the subscript i used in the “Dominant Aerodynamics” section to refer to particular rotors.

Quadrotor vehicles are typically equipped with light-weight, fixed-pitch plastic rotors. Such rotors are not rigid, and the aerodynamic and inertial forces applied to a rotor during flight are quite significant and can cause the rotor to flex. In fact, allowing the rotor to bend is an important property of the mechanical design of a quadrotor and fitting rotors that are too rigid can lead to transmission of these aerodynamic forces directly through to the rotor hub and may result in a mechanical failure of the motor mounting or the airframe itself. Having said this, rotors on small vehicles are significantly more rigid relative to the applied aerodynamic forces than rotors on a full-scale rotor craft. Blade-flapping effects are due to the flexing of rotors, while induced drag is associated primarily with the rigidity of the rotor, and a typical quadrotor will experience both. Luckily, their mathematical expression is equivalent and a single term is sufficient to represent both effects in a lumped parameter dynamic model.

When a rotor translates laterally through the air it displays an effect known as rotor flapping (see “Rotor Flapping”). A detailed derivation of rotor flapping involves a mechanical model of the bending of the rotor subject to aerodynamic and centripetal forces as it is swept through a full rotation [5, Sec. 4.5] . The resulting equations of motion are a nonlinear second-order dynamical system with a dominant highly damped oscillatory response at the forced frequency corresponding to the angular velocity of the rotor. For a typical rotor, the flapping dynamics converge to steady state with one cycle of the rotor [5, p. 137] , and for the purposes of modeling, only the steady-state response of the flapping dynamics need be considered.

Assuming that the velocity of the vehicle is directly aligned with the X axis in the inertial frame, v=(v_{x},0,0) , a simplified solution is given by \beta:=-{\mu A_{1c} \over (1-{1\over 2}\mu^{2})},\ \ \beta^{\perp}:=-{\mu A_{1s} \over (1+{1\over 2}\mu^{2})} \eqno{\hbox{(9)}}
View Source Right-click on figure for MathML and additional features. \beta:=-{\mu A_{1c} \over (1-{1\over 2}\mu^{2})},\ \ \beta^{\perp}:=-{\mu A_{1s} \over (1+{1\over 2}\mu^{2})} \eqno{\hbox{(9)}} for positive constants A_{1c} and A_{1c} ) and where \mu:=\vert v_{x}\vert /\varpi r is the advance ratio , i.e., the ratio of magnitude of the horizontal velocity of the rotor to the linear velocity of rotor tip. The flapping angle \beta is the steady-state tilt of the rotor away from the incoming apparent wind and \beta^{\perp} is the tilt orthogonal to the incident wind. Here, we use equations (4.46) and (4.47) from [5, p. 138] , noting that adding the effects of a virtual rotor hinge model [5, Sec. 4.7] results in additional phase lag between the sine and cosine components of the flapping angles [5, Question 4.7, p. 157] that are absorbed into the constants A_{1c} and A_{1s} in (9) .

Rotor flapping is important because the thrust generated by the rotor is perpendicular to the rotor plane and not to the hub of the rotor. Thus, when the rotor disk tilts the rotor thrust is inclined with respect to the airframe and contains a component in the x and y directions of the body-fixed frame.

In practice the rotors are stiff and oppose the aerodynamic force which is lifting the advancing blade so that its increased thrust due to tip velocity is not fully counteracted by a lower angle of attack and lower lift coefficient-the thrust is increased. Conversely for the retreating blade the thrust is reduced. For any airfoil that generates lift (in our case the rotor blade) there is an associated induced drag due to the backward inclination of aerodynamic force with respect to the airfoil motion. The induced drag is proportional to the lift generated by the airfoil. In normal hover conditions for a rotor, this force is equally distributed in all directions around the circumference of the rotor and is responsible for the torque Q (4) . However, when there is a thrust imbalance, then the sector of the rotor travel with high thrust (for the advancing rotor) will generate more induced drag than the sector where the rotor generates less thrust (for the retreating blade). The net result will be an induced drag that opposes the direction of apparent wind as seen by the rotor, and that is proportional to the velocity of the apparent wind. This effect is often negligible for full scale rotor craft, however, it may be quite significant for small quadrotor vehicles with relatively rigid blades. The consequence of blade flapping and induced drag taken together ensures that there is always a noticeable horizontal drag experienced by a quadrotor even when maneuvering at relatively slow speeds.
Rotor Flapping

When a rotor translates horizontally through the air, the advancing blade has a higher absolute tip velocity and will generate more lift than the retreating blade. Thinking of the rotor as a spinning disk, the mismatch in lift generates an overall moment on the rotor disk in the direction of the apparent wind (Figure S 1). The high angular momentum of the rotor disk makes it act like a gyroscope, which causes the rotor disk to tilt around the axis given by the cross product of rotor hub axis and the torque axis, i.e., an axis that is offset from the apparent wind by 90 0 in the horizontal plane of the rotor. Since the motor shaft is vertical, the blade flaps up as it advances into the wind and back down again as it retreats from the apparent wind. Equilibrium is established because the advancing blade rises and decreases its angle of attack, which reduces its lift coefficient, thereby countering the additional lift that would have been generated due to its increased tip velocity. Conversely for the retreating blade, the reduced lift due to decreased tip velocity is countered by the increased angle of attack and increased thrust coefficient. In this state, the rotor will have a stable constant tilt away from the apparent wind caused by a translational motion of the rotor. This effect is known as rotor flapping and is ubiquitous in rotor vehicles [6] .
-

Show All

We will now use the insight from the discussion above to develop a lumped parameter model for exogenous force generation (6) . We assume that all four rotors are identical and rotate at similar speeds so that, at least to a first approximation, the flapping responses of the rotors and the unbalanced aerodynamic forces are the same. It follows that the reactive torques on the airframe transmitted by the rotor masts due to rotor stiffness cancel. For general motion of the vehicle, the apparent wind results in the advance ratio \mu=\sqrt{v_{x}^{\prime 2}+v_{y}^{\prime 2}}/\varpi r,
View Source Right-click on figure for MathML and additional features. \mu=\sqrt{v_{x}^{\prime 2}+v_{y}^{\prime 2}}/\varpi r, where v^{\prime}=R^{\top}v is the linear velocity of the vehicle expressed in the body- fixed frame, with v_{x}^{\prime} and v_{y}^{\prime} being the components in the body-fixed x-y plane. Define A_{\rm flap}={1\over \varpi R}\left(\matrix{ A_{1c} & -A_{1s} & 0\cr A_{1s} & A_{1c} & 0\cr 0 & 0 & 0 }\right),
View Source Right-click on figure for MathML and additional features. A_{\rm flap}={1\over \varpi R}\left(\matrix{ A_{1c} & -A_{1s} & 0\cr A_{1s} & A_{1c} & 0\cr 0 & 0 & 0 }\right), where \varpi is the set point for the rotor angular velocity. This matrix describes the sensitivities of the flapping angle to the apparent wind in the body-fixed frame, given that \mu is small and \mu^{2} is negligible in the denominators of (9) . The first row encodes (9) for the velocity along the body-fixed frame x axis. The second row of A_{\rm flap} is a \pi/2 rotation of this response to account for the case where a component of the wind is incoming from the y axis, while the third row projects out velocity in the z axis of the body-fixed frame.

We model the stiffness of the rotor as a simple torsional spring so that the induced drag is directly proportional to this angle and is scaled by the total thrust. The flapping angle is negligible with regard to the orientation of the induced drag, and in the body-fixed frame the induced drag is D_{{\rm ind}.}v^{\prime}\approx {\rm diag}(d_{x}, d_{y},0)v^{\prime},
View Source Right-click on figure for MathML and additional features. D_{{\rm ind}.}v^{\prime}\approx {\rm diag}(d_{x}, d_{y},0)v^{\prime}, where d_{x}=d_{y} is the induced drag coefficient.

The exogenous force applied to the rotor can now be modeled by F:=T_{\Sigma}\vec{{\bf z}}-T_{\Sigma}Dv^{\prime}, \eqno{\hbox{(10)}}
View Source Right-click on figure for MathML and additional features. F:=T_{\Sigma}\vec{{\bf z}}-T_{\Sigma}Dv^{\prime}, \eqno{\hbox{(10)}} where D=A_{\rm flap} + diag (d_{x}, d_{y}, 0) , and T_{\Sigma} is the nominal thrust (5) .

An important consequence of blade flapping and induced drag is a natural stability of the horizontal dynamics of the quadrotor [7] . Define {\BBP}_{h};=\left(\matrix{ 1 & 0 & 0\cr 0 & 1 & 0}\right) \eqno{\hbox{(11)}}
View Source Right-click on figure for MathML and additional features. {\BBP}_{h};=\left(\matrix{ 1 & 0 & 0\cr 0 & 1 & 0}\right) \eqno{\hbox{(11)}} to be the projection matrix onto the x-y plane. The horizontal component of a velocity expressed in \{A\} is v_{h}:={\BBP}_{h}v=(v_{x}, \nu_{y})^{\top} \in {\BBR}^{2}. \eqno{\hbox{(12)}}
View Source Right-click on figure for MathML and additional features. v_{h}:={\BBP}_{h}v=(v_{x}, \nu_{y})^{\top} \in {\BBR}^{2}. \eqno{\hbox{(12)}} Recalling (1b) and projecting onto the horizontal component of velocity, one has m\dot{v}_{h}=-T_{\Sigma}{\BBP}_{h} (\vec{\bf z} + RDv^{\prime}).
View Source Right-click on figure for MathML and additional features. m\dot{v}_{h}=-T_{\Sigma}{\BBP}_{h} (\vec{\bf z} + RDv^{\prime}). If the vehicle is flying horizontally, i.e., v_{z}=0 , then v={\BBP}_{h}^{\top}v_{h} and one can write m\dot{v}_{h}=-T_{\Sigma}{\BBP}_{h}\vec{{\bf z}}-{\BBP}_{h}RDR^{\top} {\BBP}_{h}^{\top}v_{h}, \eqno{\hbox{(13)}}
View Source Right-click on figure for MathML and additional features. m\dot{v}_{h}=-T_{\Sigma}{\BBP}_{h}\vec{{\bf z}}-{\BBP}_{h}RDR^{\top} {\BBP}_{h}^{\top}v_{h}, \eqno{\hbox{(13)}} where the last term introduces damping since, for a typical system, the matrix D is a positive semidefinite.

A detailed dynamic model of the quadrotor, including flapping and induced drag, is included in the robotics toolbox for MAT LAB [8] . This is provided in the form of Simulink library blocks along with a set of inertial and aerodynamic parameters for a particular quadrotor. The graphical output of the animation block is shown in Figure 4 . Simulink models, based on these blocks, that illustrate path following and vision-based stabilization are described in detail in [1] .

The discussion provided above does not consider several additional aerodynamic effects that are important for high-speed and highly dynamic maneuvers for a quadrotor. In particular, we do not consider translational lift and drag that will effect thrust generation at high speed, axial flow modeling and vortex states that may effect thrust during axial motion, and ground effect that will affect a vehicle flying close to the ground. It should be noted that high gain control can dominate all secondary aerodynamic effects, and high performance control of quadrotor vehicles has been demonstrated using the simple static thrust model [23] , [24] . The detailed modeling of the blade flapping and induced drag is provided due to its importance in understanding the state estimation algorithms introduced later the tutorial.
Figure 4. - Frame from the Simulink animation of quadrotor dynamics.
Figure 4.

Frame from the Simulink animation of quadrotor dynamics.

Show All

Size, Weight, and Power (SWAP) Constraints and Scaling Laws

Reducing the scale of the quadrotor has an interesting effect on the inertia, payload, and ultimately the maximum achievable angular and linear acceleration. To gain insight into scaling, it is useful to develop a simple physics model to analyze a quadrotor's ability to produce linear and angular accelerations from a hover state.

If the characteristic length is d , the rotor radius r scales linearly with d . The mass scales as d^{3} and the moments of inertia as d^{5} . On the other hand, from (3) and (4) , it is clear that the lift or thrust, T , and drag, {Q} , from the rotors scale with the square of the rotor speed, \varpi^{2} . In other words, T\sim\varpi^{2}d^{4} and Q \sim\varpi^{2}d^{4} , the linear acceleration a=\dot{v} , which depends on the thrust and mass, and the angular acceleration \alpha=\dot{\Omega} , which depends on thrust, drag, the moment arm, and the moments of inertia, scale as a\sim {\varpi^{2}d^{4}\over d^{3}}=\varpi^{2}d,\quad \alpha \sim {\varpi^{2}d^{5}\over d^{5}}=\varpi^{2}.
View Source Right-click on figure for MathML and additional features. a\sim {\varpi^{2}d^{4}\over d^{3}}=\varpi^{2}d,\quad \alpha \sim {\varpi^{2}d^{5}\over d^{5}}=\varpi^{2}.

To explore the scaling of rotor speed with length, it is useful to adopt the two commonly accepted approaches to study scaling in aerial vehicles [9] . Mach scaling is used for compressible flows and essentially assumes that the blade tip speed, v_{b} , is a constant leading to \varpi\sim(1/r) . Froude scaling is used for incompressible flows and assumes that, for similar aircraft configurations, the Froude number, (v_{b}^{2}/dg)=(\varpi^{2}r^{2}/dg) , is constant. Here, g is the acceleration due to gravity. Assuming r\sim d , we get \varpi\sim (1/\sqrt{r}) . Thus, Mach scaling predicts a\sim {1 \over d},\quad \alpha \sim {1\over d^{2}}, \eqno{\hbox{(14)}}
View Source Right-click on figure for MathML and additional features. a\sim {1 \over d},\quad \alpha \sim {1\over d^{2}}, \eqno{\hbox{(14)}} while Froude scaling leads to the conclusion a\sim 1, \alpha\sim{1\over d}. \eqno{\hbox{(15)}}
View Source Right-click on figure for MathML and additional features. a\sim 1, \alpha\sim{1\over d}. \eqno{\hbox{(15)}} Of course, Froude or Mach number similitudes take neither motor characteristics nor battery properties into account. While motor torque increases with length, the operating speed for the rotors is determined by matching the torque-speed characteristics of the motor to the drag versus speed characteristics of the rotors. Further, the motor torque depends on the ability of the battery to source the required current. All these variables are tightly coupled for smaller designs since there are fewer choices available at smaller length scales. Finally, as discussed in the previous subsection, the assumption that rotor blades are rigid may be wrong. Further, the aerodynamics of the blades may be different for blade designs optimized for smaller helicopters and the quadratic scaling of the lift with speed may not be accurate.

In spite of the simplifications in the above similitude analysis, the key insight from both Froude and Mach number similitudes is that smaller quadrotors can produce faster angular accelerations while the linear acceleration is at worst unaffected by scaling. Thus, smaller quadrotors are more agile, a fact that is easily validated from experiments conducted with the Ascending Technologies Pelican quadrotor [10] (approximately 2 kg gross weight when equipped with sensors, 0.75 m diameter, and 5,400 r/min nominal rotor speed at hover), the Ascending Technologies Hummingbird quadrotor [11] (approximately 500 g gross weight, 0.5 m diameter, and 5,000 r/min nominal rotor speed at hover), and laboratory experimental prototypes developed at GRASP laboratory at the University of Pennsylvania (approx. 75 g gross weight, 0.21 m diameter, and approximately 9,000 r/min nominal rotor speed).
Estimating the Vehicle State

The key state estimates required for the control of a quadrotor are its height, attitude, angular velocity, and linear velocity. Of these states, the attitude and angular velocity are the most important as they are the primary variables used in attitude control of the vehicle. The most basic instrumentation carried by any quadrotor is an inertial measurement unit (IMU) often augmented by some form of height measurement, either acoustic, infrared, barometric, or laser based. Many robotics applications require more sophisticated sensor suites such as VICON systems, global positioning system (GPS), camera, Kinect, or scanning laser rangefinder.
Estimating Attitude

A typical IMU includes a three-axis rate gyro, three-axis accelerometer, and three-axis magnetometer. The rate gyro measures the angular velocity of \{B\} relative to \{A\} expressed in the body-fixed frame of reference \{B\} \Omega_{\rm IMU}=\Omega+b_{\Omega}+\eta\in\{B\},
View Source Right-click on figure for MathML and additional features. \Omega_{\rm IMU}=\Omega+b_{\Omega}+\eta\in\{B\}, where \eta denotes the additive measurement noise and b_{\Omega} denotes a constant (or slowly time-varying) gyro bias. Generally, the gyroscopes installed on quadrotor vehicles are lightweight microelectromechanical systems (MEMS) devices that are reasonably robust to noise and quite reliable.

The accelerometers (in a strap down IMU configuration) measure the instantaneous linear acceleration of {B} due to exogenous force a_{\rm IMU}=R^{\top}(\dot{v}-g\vec{{\bf z}})+b_{a}+\eta_{a}\in\{B\},
View Source Right-click on figure for MathML and additional features. a_{\rm IMU}=R^{\top}(\dot{v}-g\vec{{\bf z}})+b_{a}+\eta_{a}\in\{B\}, where b_{a} is a bias term, \eta_{a} denotes additive measurement noise, and \dot{v} is in the inertial frame. Here, we use the notation \vec{{\bf z}}=\vec{{\bf a}}_{3} since we will need to deal with the algebraic expressions of the coordinate axes throughout this section. Accelerometers are highly susceptible to vibration and, mounted on a quadrotor, they require significant low-pass mechanical and/or electrical filtering to be usable. Most quadrotor avionics will incorporate an analogue antialiasing filter on a MEMS accelerometer before the signal is sampled.

A commonly used technique to estimate the bias: b_{\Omega} and b_{a} is to average the output of these sensors for a few seconds while the quadrotor is on the ground and the motors are not yet active. The bias is then assumed constant for the duration of the flight.

The magnetometers provide measurements of the ambient magnetic field m_{\rm IMU}=R^{\top A}m+B_{m}+\eta_{b}\in\{B\},
View Source Right-click on figure for MathML and additional features. m_{\rm IMU}=R^{\top A}m+B_{m}+\eta_{b}\in\{B\}, where {}^{A}m is the Earth's magnetic field vector (expressed in the inertial frame), B_{m} is a body-fixed frame expression for the local magnetic disturbance, and \eta_{b} denotes the measurement noise. The noise \eta_{b} is usually low for magnetometer readings; however, the local magnetic disturbance B_{m} can be significant, especially if the sensor is placed near the power wires to the motors.

The accelerometers and magnetometers can be used to provide absolute attitude information on the vehicle while the rate gyroscope provides complementary angular velocity measurements. The attitude information in the magnetometer signal is straightforward to understand; in the absence of noise and bias, m_{{\rm IMU}} provides a body-fixed frame measurement of R^{\top A}m and, consequently, constrains two DoF in the rotation R .

The case for using the accelerometer signal for attitude estimation is far more subtle. Using the simplest model (6) with \Delta \equiv 0, a_{\rm IMU}=R^{\top}(\dot{v}-g\vec{{\bf z}}) =(\tau_{\Sigma}/m) \vec{{\bf z}} \approx g\vec{{\bf z}} . This shows that the measured acceleration, for this simple model, would always point in the body-fixed frame direction \vec{{\bf z}} and provides no attitude information. In practice, it is the blade-flapping component of the thrust that contributes attitude information to the accelerometer signal [7] . Recalling (10) and ignoring bias and noise terms, the model for a_{\rm IMU} can be written as a_{\rm IMU}=-{T_{\Sigma} \over m}\vec{{\bf z}} - {T_{\Sigma}\over m}DR^{\top}v. \eqno{\hbox{(16)}}
View Source Right-click on figure for MathML and additional features. a_{\rm IMU}=-{T_{\Sigma} \over m}\vec{{\bf z}} - {T_{\Sigma}\over m}DR^{\top}v. \eqno{\hbox{(16)}} As we show later in the section, only the low-frequency information from the accelerometer signal will be used in the observer construction. Thus, it is only the low-frequency or approximate steady-state response \bar{v} of the velocity v that we need to estimate to build a model for the low-frequency component of a_{{\rm IMU}} . Setting \dot{v}=0 in (1b) , substituting for force (10) , and rearranging, we obtain an estimate of the low-frequency component of the velocity signal DR^{\top} \bar{v} \approx R^{\top}\vec{{\bf z}}-\vec{{\bf z}}.
View Source Right-click on figure for MathML and additional features. DR^{\top} \bar{v} \approx R^{\top}\vec{{\bf z}}-\vec{{\bf z}}. Substituting DR^{\top}\bar{v} for DR^{\top}v in (16) , we obtain \bar{a}_{\rm IMU}\approx-{T_{\Sigma}\over m}R^{\top}\vec{{\bf z}}, \eqno{\hbox{(17)}}
View Source Right-click on figure for MathML and additional features. \bar{a}_{\rm IMU}\approx-{T_{\Sigma}\over m}R^{\top}\vec{{\bf z}}, \eqno{\hbox{(17)}} where \bar{a}_{{\rm IMU}} denotes the low-frequency component of the accelerometer signal. That is, the low-frequency content of a_{{\rm IMU}} when the vehicle is near hover is the body-fixed frame expression for the supporting force that is the negative gravitational vector expressed in the body-fixed frame. Most robotics applications involve a quadrotor spending significant periods of time in hover, or slow forward flight, with \dot{v}\approx 0 , and using the accelerometer reading as an attitude reference during this flight regime has been shown to work well in practice.

The attitude kinematics of the quadrotor are given by (1c) . Let \hat{R} denote an estimate for attitude R of the quadrotor vehicle. The following observer [12] fuses accelerometer, magnetometer, and gyroscope data as well as other direct attitude estimates R_{{\rm E}} (such as provided by a VICON or other external measurement system) should they be available: \eqalignno{ \dot{\hat{R}}:= & \hat{R} \left(\Omega_{\rm IMU}-\hat{b}\right)_{\times}-\alpha,\cr \dot{\hat{b}}:=& k_{b}\alpha,\cr \alpha:= &\left({k_a \over g^{2}}((\hat{R}^{\top} \vec{{\bf z}}) \times\bar{a}_{\rm IMU}) + {k_m \over \vert {}^{A} m\vert^{2}} ((\hat{R}^{\top} {}^{A}m) \times m_{\rm IMU})\right)_{\times}\cr &+k_{E}{\BBP}_{{\Fraktur s}{\Fraktur o}(3)} \left(\hat{R}R_{{\rm E}}^{\top}\right), &\hbox{(18)}}
View Source Right-click on figure for MathML and additional features. \eqalignno{ \dot{\hat{R}}:= & \hat{R} \left(\Omega_{\rm IMU}-\hat{b}\right)_{\times}-\alpha,\cr \dot{\hat{b}}:=& k_{b}\alpha,\cr \alpha:= &\left({k_a \over g^{2}}((\hat{R}^{\top} \vec{{\bf z}}) \times\bar{a}_{\rm IMU}) + {k_m \over \vert {}^{A} m\vert^{2}} ((\hat{R}^{\top} {}^{A}m) \times m_{\rm IMU})\right)_{\times}\cr &+k_{E}{\BBP}_{{\Fraktur s}{\Fraktur o}(3)} \left(\hat{R}R_{{\rm E}}^{\top}\right), &\hbox{(18)}} where k_{a}, k_{m}, k_{E} ) and k_{b} are arbitrary nonnegative observer gains and {\BBP}_{{\Fraktur s}{\Fraktur o}(3)}(M)=(M-M^{\top})/2 is the Euclidean matrix projection onto skew-symmetric matrices. If any one of the measurements in the innovation \alpha are not available or unreliable, then the corresponding gain should be set to zero in the observer. Note that both the attitude \hat{R} and the bias corrected angular velocity \hat{\Omega}=\Omega_{{\rm IMU}}-\hat{b} are estimated by this observer. The observer (18) has been extensively studied in the literature [12] , [13] and shown to converge exponentially (both theoretically and experimentally) to the desired attitude estimate of attitude with \hat{b} converging to the gyroscope bias b . The filter has a complementary nature, using the high-frequency part of the gyroscope signal and the low-frequency parts of the magnetometer, accelerometer, and external attitude measurements [12] . The roll-off frequencies associated with each of these signals is given by the gains k_{a}, k_{m} , and k_{E} in rad. s-1 and good performance of the observer depends on how these gains are tuned. In particular, the accelerometer gains must be tuned to a frequency below the normal bandwidth of the vehicle motion, less than 5 rad {\rm s}^{-1} for a typical quadrotor. The magnetometer gain and external gain can be tuned for a higher roll-off frequency depending on the reliability of the signals. The bias gain k_{b} is typically chosen an order of magnitude slower than the innovation gains k_{b} < k_{a}/10 , leading to a rise time of the bias estimate as slow as 30 s or more. This dynamic response is necessary to track slowly varying bias and decouples the bias estimate from the attitude response; however, it is necessary to initialize the observer with a bias estimate at take off to avoid a long transient in the filter response.

A particular advantage of this observer formulation is that the gains can be adjusted in real time as long as care is taken that the bias gain is small. Adjusting the gains in real time allows one to use the accelerometer during a period when the vehicle is in hover and then set the gain k_{a}=0 during acrobatic maneuvers when the low-frequency assumptions on \bar{a}_{{\rm IMU}} no longer hold. The nonlinear robustness, guaranteed asymptotic stability, and flexibility in gain tuning make this observer a preferred candidate for quadrotor attitude estimation compared with classical filters such as the extended Kalman filter (EKF), multiplicative EKF, or more sophisticated stochastic filters.
Estimating Translational Velocity

The blade-flapping response provides a way to build an observer for the horizontal velocity of the vehicle based on the IMU sensors [7] , at least while the vehicle is flying in the horizontal plane. Assume that a good estimate of the vehicle attitude R is available and that the vehicle is flying at constant height.

Recalling the projector (11) , the horizontal component of the inertial acceleration can be measured by {}^{A} a_{h}:={\BBP}_{h}{}^{A} a={\BBP}_{h}Ra \approx {\BBP}_{h}\hat{R}a, \eqno{\hbox{(19)}}
View Source Right-click on figure for MathML and additional features. {}^{A} a_{h}:={\BBP}_{h}{}^{A} a={\BBP}_{h}Ra \approx {\BBP}_{h}\hat{R}a, \eqno{\hbox{(19)}} where the signals a and \hat{R} are available. Since we assume that the vehicle is flying at a constant height, one has v_{z}\approx 0 , and recalling (12) , {\BBP}_{h}^{\top}v_{h}\approx v . Further, the thrust T_{\Sigma}\approx mg must compensate the weight of the vehicle. Recalling (16) and taking the horizontal component, one has {}^{A} a_{h}\approx-g{\BBP}_{h}R \vec{{\bf z}}-g{\BBP}_{h}\hat{R}DR^{\top}{\BBP}_{h}^{\top}v_{h}. \eqno{\hbox{(20)}}
View Source Right-click on figure for MathML and additional features. {}^{A} a_{h}\approx-g{\BBP}_{h}R \vec{{\bf z}}-g{\BBP}_{h}\hat{R}DR^{\top}{\BBP}_{h}^{\top}v_{h}. \eqno{\hbox{(20)}} Assuming that the attitude filter estimate is good, i.e., \hat{R}=R , then (19) and (20) can be solved for an estimate of v_{h} v_{h}\approx-{1\over g} \left[{\BBP}_{h}\hat{R}D\hat{R}^{\top}{\BBP}_{h}^{\top}\right]^{-1}\left({}^{A}a_{h}+g{\BBP}_{h} \hat{R}\vec{{\bf z}}\right). \eqno{\hbox{(21)}}
View Source Right-click on figure for MathML and additional features. v_{h}\approx-{1\over g} \left[{\BBP}_{h}\hat{R}D\hat{R}^{\top}{\BBP}_{h}^{\top}\right]^{-1}\left({}^{A}a_{h}+g{\BBP}_{h} \hat{R}\vec{{\bf z}}\right). \eqno{\hbox{(21)}} This estimate of v_{h} will be well defined as long as the 2\times 2 matrix {\BBP}_{h}\hat{R}D \hat{R}^{\top}{\BBP}_{h}^{\top} is invertible, a condition that will hold as long as the vehicle pitches or rolls by less than 90° during flight.

Equation (21) provides a measurement of the horizontal velocity; however, since it directly incorporates the unfiltered accelerometer readings, it is generally too noisy to be of much use. Its low-frequency content can, however, be used to drive a velocity complementary observer that uses the attitude estimate and the system model (1b) along with the thrust model (10) for its high-frequency component. Let \hat{v}_{h} be an estimate of the horizontal component of the inertial velocity of the vehicle. Recalling (1b) , we propose the following observer \dot{\hat{v}}_{h} = -g{\BBP}_{h}^{\top} \left(\hat{R}\vec{{\bf z}} + \hat{R}D\hat{R}^{\top}{\BBP}_{h}^{\top}\hat{v}_{h}\right)-k_{w}(\hat{v}_{h}-v_{h}), \eqno{\hbox{(22)}}
View Source Right-click on figure for MathML and additional features. \dot{\hat{v}}_{h} = -g{\BBP}_{h}^{\top} \left(\hat{R}\vec{{\bf z}} + \hat{R}D\hat{R}^{\top}{\BBP}_{h}^{\top}\hat{v}_{h}\right)-k_{w}(\hat{v}_{h}-v_{h}), \eqno{\hbox{(22)}} where v_{h} is given by (21) . The gain k_{w} > 0 provides a tuning parameter that adjusts the roll-off frequency for the information from \hat{v}_{h} that is used in the filter. It also uses an estimated velocity \hat{v}_{h} to provide an approximation of the more correct R^{\top}{\BBP}_{h}^{\top} v_{h} term in the feedforward velocity estimate; however, since the underlying dynamics associated with this term are stable, the observer is stable even with this approximation.

Estimating Position

The final part of state that must be estimated is position, which is typically considered separately as position in the plane and height. Considering the height first, there are in fact two separate heights that are of importance: the first is the absolute height of the vehicle and the second is the relative height over the terrain at a given time. Unfortunately, there is no effective way to use the IMU to estimate absolute height; at best, some low-frequency information from the z axis of the accelerometer provides limited information about vertical motion. Most quadrotors include a barometric sensor that can resolve absolute height to a few centimeters. Absolute height can also be estimated using GPS, VICON, or a full SLAM system. Relative height can be estimated using acoustic, laser-ranging or infrared sensors. Once a sufficiently accurate height measurement is available, it is better to use this directly in the control than add additional levels of complexity in designing a height observer, especially since, for a typical system, the only feedforward information available is the noisy accelerometer readings.

Position in the plane can also be determined in a relative or absolute way. Absolute position can be obtained from a GPS (few-centimeter accuracy at up to 10 Hz [6] ) or an external localization device such as a VICON motion capture system (50μ m accuracy at 375 Hz). However, a GPS does not work indoors and motion-capture systems are expensive, and their sensor array has a limited spatial extent that is impractical to scale up for large indoor environments.

Relative position can be estimated by measuring the distance to objects in the environment from onboard sensors, typically small onboard laser range finders (LRFs) or RGBD camera systems such as the Kinect. Well-known SLAM techniques, borrowing LRF-based techniques similar to those developed for mobile ground robots over the last decade, have been applied to quadrotors [14] . However, LRFs provide only a cross section of the 3-D environment and this scan plane tilts as the vehicle maneuvers, resulting in apparent changes to the distance of walls, and, in extreme cases, the scan plane can intersect the floor or ceiling. LRFs are heavy and power hungry, which prevents their application to the next generation of much smaller quadcopters.

Vision has the advantage that the sensor is small, light-weight, and low power, which will become increasingly important as the size of aerial vehicles decreases. Vision can provide essential navigational competencies such as odometry, attitude estimation, mapping, place and object recognition, and collision detection. There is a long history of applying vision to aerial robotic systems [15] – [16] [17] [18] [19] for indoor and outdoor environments, and the well-known Parrot AR.Drone game device makes strong use of vision for attitude and odometry [20] . Vision can also be used for object recognition based on color, texture, and shape, as well as collision avoidance.

Vision is not without its challenges. First, vision is computationally intense and can result in a low sample rate. Since onboard computational power is limited (by SWAP consumption), most reported systems transmit the images wirelessly to a ground station, which increases system complexity, control latency, and the susceptibility to interference and dropouts. However, processor speed continues to improve, and we can also utilize the vision and control techniques used by flying insects that perform complex tasks with very limited sensing and neural capability [21] . Second, there is an ambiguity between certain rotational and translational motions, particularly, when a narrow field of view perspective camera is used. Third, the underactuated quadrotor uses the roll and pitch DoF to point the thrust vector in the direction of the desired translational motion. For a camera that is rigidly attached to the quadrotor, this attitude control motion induces a large apparent motion in the image. It is therefore necessary to estimate vehicle attitude at the instant the image was captured by the sensor to eliminate this effect. Biological systems face similar problems, and interestingly, mammals and insects have developed similar solutions: gyroscopic sensors (the vestibular sensors of the inner ear and the halteres, respectively) [22] . Finally, there exists a problem with recovering motion scale when using a single camera. Stereo is possible, but the baseline is constrained, particularly as vehicles get smaller.
Figure 5. - The innermost motor control loop, the intermediate attitude control loop, and the outer position control loop.
Figure 5.

The innermost motor control loop, the intermediate attitude control loop, and the outer position control loop.

Show All

Control

The control problem, to track smooth trajectories (R^{\ast}(t), \xi^{\ast}(t))\in {\rm SE} (3) , is challenging for several reasons. First, the system is underactuated: there are four inputs {\bf u}=(T_{2}, \tau^{\top})^{\top} , while SE(3) is six dimensional. Second, the aerodynamic model described above is only approximate. Finally, the inputs are themselves idealized. In practice, the motor controllers must overcome the drag moments to generate the required speeds and realize the input thrust (T_{\Sigma}) and moments (\tau) . The dynamics of the motors and their interactions with the drag forces on the propellers can be difficult to model, although first-order linear models are a useful approximation.

A hierarchical control approach is common for quadrotors. The lowest level, the highest bandwidth, is in control of the rotor rotational speed. The next level is in control of vehicle attitude, and the top level is in control of position along a trajectory. These levels form nested feedback loops, as shown in Figure 5 .
Controlling the Motors

Rotor speed drives the dynamic model of the vehicle according to (8) , so high-quality control of the motor speed is fundamentally important for overall control of the vehicle; high bandwidth control of the thrust T_{\Sigma} , denoted by u_{1} , and the torques (\tau_{x}, \tau_{y}, \tau_{z}) , denoted by {\bf u}_{2} , lead to high performance attitude and position control. Most quadrotor vehicles are equipped with brushless de motors that use back electromotive force (EMF) sensing for rotor commutation and high-frequency pulsewidth modulation (PWM) to control motor voltage. The simplest systems generally use a direct voltage control of the motors since steady-state motor speed is proportional to voltage; however; the dynamic response is second-order due to the mechanical and electrical dynamics. Improved performance is obtained by incorporating single-input single-output control at the motor/rotor level V_{i}=k(\varpi_{i}^{\ast} - \varpi_{i})+V_{\rm ff}(\varpi_{i}^{\ast}), \eqno{\hbox{(23)}}
View Source Right-click on figure for MathML and additional features. V_{i}=k(\varpi_{i}^{\ast} - \varpi_{i})+V_{\rm ff}(\varpi_{i}^{\ast}), \eqno{\hbox{(23)}} where V_{i} is the applied motor voltage, \varpi_{i}^{\ast} is the desired speed, and the actual motor speed \varpi_{i} can be measured from the electronic commutation in the embedded speed controller. This can help to overcome a common problem where the rotor speed for a given PWM command setting will decrease as the battery voltage reduces during flight. The significant load torque due to aerodynamic drag will lead to a tracking error that can be minimized by high proportional gain (k) and/or a feedforward term. A positive benefit of the drag torque is that the system is heavily damped, which precludes the need for derivative control. The feedforward term V_{\rm ff} (\varpi_{i}^{\ast}) compensates for the steady-state PWM associated with a given velocity set point by incorporating the best available thrust model determined using static thrust tests and possibly including battery voltage.

The performance of the motor controllers is ultimately limited by the current that can be supplied from the batteries. This may be a significant limiting factor for smaller vehicles. Overly aggressive tuning and extreme maneuvers may cause the voltage bus to drop excessively, reducing the thrust from other rotors and, in extreme cases, causing the onboard electronics to brownout. For this reason, it is common to introduce a saturation, although this destroys the linearity of the motor/rotor response during aggressive maneuvers.
Attitude Control

We first consider the design of an exponentially converging controller in SO(3). Given a desired airframe attitude R^{\star} , we want to first develop a measure of the error in rotations. We choose the measure e_{R_{\times}} = {1\over 2}((R^{\ast})^{\rm T}R-R^{\rm T}R^{\ast}), \eqno{\hbox{(24)}}
View Source Right-click on figure for MathML and additional features. e_{R_{\times}} = {1\over 2}((R^{\ast})^{\rm T}R-R^{\rm T}R^{\ast}), \eqno{\hbox{(24)}} which yields a skew-symmetric matrix representing the axis of rotation required to go from R to R^{\ast} and whose magnitude is equal to the sine of the angle of rotation.

To derive linear controllers, we linearize the dynamics about the nominal hover position at which the roll (\phi) and pitch (\theta) are close to zero and the angular velocities are close to zero. If we write R={}^{A}R_{B} as a product of the yaw rotation {}^{A} R_{E}(\psi) and {}^{E} R_{B}(\phi, \theta) , which is a composition of the roll and pitch, we can linearize the rotation about (\psi, \phi, \theta)=(\psi_{0},0,0) \eqalign{ {}^{A}R_{B}&={}^{A} R_{E}(\psi_{0}+\Delta\psi){}^{E}R_{B} (\Delta\phi, \Delta\theta)\cr &=\left(\matrix{ \cos\psi & -\sin\psi & \Delta\theta\cos\psi+\Delta\phi \sin\psi\cr \sin\psi & \cos\psi & \Delta\theta\sin\psi-\Delta\phi \cos\psi\cr -\Delta\theta & \Delta\phi & 1 }\right),}
View Source Right-click on figure for MathML and additional features. \eqalign{ {}^{A}R_{B}&={}^{A} R_{E}(\psi_{0}+\Delta\psi){}^{E}R_{B} (\Delta\phi, \Delta\theta)\cr &=\left(\matrix{ \cos\psi & -\sin\psi & \Delta\theta\cos\psi+\Delta\phi \sin\psi\cr \sin\psi & \cos\psi & \Delta\theta\sin\psi-\Delta\phi \cos\psi\cr -\Delta\theta & \Delta\phi & 1 }\right),} where \psi=\psi_{0}+\Delta\psi . If R^{\star}={}^{A}R_{B}(\psi_{0}+\Delta\psi, \Delta\phi, \Delta\theta) and R={}^{A}R_{B}(\psi_{0},0,0) , (24) gives e_{R_{\times}}= \left(\matrix{ 0 & \Delta\psi & -\Delta\theta\cr -\Delta\phi & 0 & \Delta\phi\cr \Delta\theta & -\Delta\phi & 0}\right), \eqno{\hbox{(25)}}
View Source Right-click on figure for MathML and additional features. e_{R_{\times}}= \left(\matrix{ 0 & \Delta\psi & -\Delta\theta\cr -\Delta\phi & 0 & \Delta\phi\cr \Delta\theta & -\Delta\phi & 0}\right), \eqno{\hbox{(25)}} which, as we expect, corresponds to the error vector e_{R}=(\Delta\phi, \Delta\theta, \Delta\psi)^{\top},
View Source Right-click on figure for MathML and additional features. e_{R}=(\Delta\phi, \Delta\theta, \Delta\psi)^{\top}, with components in the body-fixed frame. If the desired angular velocity vector is zero, we can compute the proportional and derivative error to obtain the PD control law {\bf u}_{2}=-k_{R}e_{R}-k_{\Omega}e_{\Omega}, \eqno{\hbox{(26)}}
View Source Right-click on figure for MathML and additional features. {\bf u}_{2}=-k_{R}e_{R}-k_{\Omega}e_{\Omega}, \eqno{\hbox{(26)}} where k_{R} and k_{\Omega} are positive definite gain matrices. This controller guarantees stability for small deviations from the hover position.

To obtain convergence for larger deviations from the hover position, it is necessary to revert back to (24) without linearization. This allows us to directly compute the error on SO(3). By compensating for the nonlinear inertial terms and by including the correct error term, we obtain {\bf u}_{2}=J(-k_{R}e_{R}-k_{\Omega}e_{\Omega}) + \Omega\times J \Omega-J(\Omega_{\times}R^{T} R^{\star}\Omega^{\star}-R^{T}R^{\star}\dot{\Omega}^{\star}).\eqno{\hbox{(27)}}
View Source Right-click on figure for MathML and additional features. {\bf u}_{2}=J(-k_{R}e_{R}-k_{\Omega}e_{\Omega}) + \Omega\times J \Omega-J(\Omega_{\times}R^{T} R^{\star}\Omega^{\star}-R^{T}R^{\star}\dot{\Omega}^{\star}).\eqno{\hbox{(27)}} This controller is guaranteed to be exponentially stable for almost any rotation [23] . From a practical standpoint, it is possible to neglect the last three terms in the controller and achieve satisfactory performance, but the correct calculation of the error term is important [24] .

Trajectory Control

We now turn our attention to the control of the trajectory along a specified trajectory \xi^{\star}(t) . As before, we first consider linear controllers by linearizing the dynamics about =\xi^{\star}(t), \theta=\phi=0, \psi=\psi^{\star}(t), \xi=0 , and \dot{\phi}=\dot{\theta}=\dot{\psi}=0 , with the nominal input given by u_{1}=mg, {\bf u}_{2}=0 . Linearizing (1a) , we get \eqalignno{ &\ddot{\xi}_{1} = g(\Delta\theta\cos\psi^{\star}+\Delta\phi\sin\psi^{\star}),\cr &\ddot{\xi}_{2}=g(\Delta\theta\sin\psi^{\star}-\Delta\phi\cos\psi^{\star}),\cr &\ddot{\xi}_{3}={1\over m}u_{1}-g. &\hbox{(28)}}
View Source Right-click on figure for MathML and additional features. \eqalignno{ &\ddot{\xi}_{1} = g(\Delta\theta\cos\psi^{\star}+\Delta\phi\sin\psi^{\star}),\cr &\ddot{\xi}_{2}=g(\Delta\theta\sin\psi^{\star}-\Delta\phi\cos\psi^{\star}),\cr &\ddot{\xi}_{3}={1\over m}u_{1}-g. &\hbox{(28)}} To exponentially drive all three components of error, we want to command the acceleration vector \ddot{\xi}^{{\rm com}} to satisfy (\ddot{\xi}^{\ast}(t)-\ddot{\xi}^{\rm com}) + K_{d}(\dot{\xi}^{\ast}(t)-\dot{\xi})+K_{p}(\xi^{\ast}(t)-\xi)=0.
View Source Right-click on figure for MathML and additional features. (\ddot{\xi}^{\ast}(t)-\ddot{\xi}^{\rm com}) + K_{d}(\dot{\xi}^{\ast}(t)-\dot{\xi})+K_{p}(\xi^{\ast}(t)-\xi)=0. From (28) , we can immediately write u_{1}=m \left(g+\ddot{\xi}_{3}^{\ast}+k_{d,z}(\dot{\xi}_{3}^{\ast}-\dot{\xi}_{3})+k_{p,z}(\xi_{3}^{\ast}-\xi_{3})\right), \eqno{\hbox{(29)}}
View Source Right-click on figure for MathML and additional features. u_{1}=m \left(g+\ddot{\xi}_{3}^{\ast}+k_{d,z}(\dot{\xi}_{3}^{\ast}-\dot{\xi}_{3})+k_{p,z}(\xi_{3}^{\ast}-\xi_{3})\right), \eqno{\hbox{(29)}} to guarantee (\xi_{3}(t)-\xi_{3}^{\star}(t))\rightarrow 0 . Similarly, for the other two components, we choose to command the appropriate \theta^{\star} and \phi^{\star} to guarantee exponential convergence \eqalignno{ &\phi^{\star}={1 \over g}(\ddot{\xi}_{1}^{\rm com} \sin\psi^{\star}(t)-\ddot{\xi}_{2}^{{\rm com}}\cos\psi^{\star}(t)), &\hbox{(30a)}\cr &\theta^{\star}={1 \over g}(\ddot{\xi}_{1}^{{\rm com}}\cos\psi^{\star}(t) + \ddot{\xi}_{2}^{{\rm com}}\sin\psi^{\star}(t)), &\hbox{(30b)}}
View Source Right-click on figure for MathML and additional features. \eqalignno{ &\phi^{\star}={1 \over g}(\ddot{\xi}_{1}^{\rm com} \sin\psi^{\star}(t)-\ddot{\xi}_{2}^{{\rm com}}\cos\psi^{\star}(t)), &\hbox{(30a)}\cr &\theta^{\star}={1 \over g}(\ddot{\xi}_{1}^{{\rm com}}\cos\psi^{\star}(t) + \ddot{\xi}_{2}^{{\rm com}}\sin\psi^{\star}(t)), &\hbox{(30b)}}

where the above equations are obtained by replacing \Delta\theta by \theta^{\star} and \Delta\phi by \phi^{\star} in (28) . Finally, (\psi^{\star}, \phi^{\star}, \theta^{\star}) are provided as set points to the attitude controller discussed in the previous section. Thus, as shown in Figure 5 , the control problem is addressed by decoupling the position control and attitude control subproblems, and the position control loop provides the attitude set points for the attitude controller. The position controller can also be obtained without linearization. This is done by projecting the position error (and its derivatives) along {\bf b}_{3} and applying the input u_{1} that cancels the gravitational force and provides the appropriate proportional plus derivative feedback u_{1}=m \vec{{\bf b}}_{3}^{\top}\left(\ddot{\xi}^{\ast} + K_{d}(\dot{\xi}^{\ast}-\dot{\xi})+K_{p}(\xi^{\ast}-\xi)+g\vec{{\bf a}}_{3}\right). \eqno{\hbox{(31)}}
View Source Right-click on figure for MathML and additional features. u_{1}=m \vec{{\bf b}}_{3}^{\top}\left(\ddot{\xi}^{\ast} + K_{d}(\dot{\xi}^{\ast}-\dot{\xi})+K_{p}(\xi^{\ast}-\xi)+g\vec{{\bf a}}_{3}\right). \eqno{\hbox{(31)}} Note that the projection operation is a nonlinear function of the roll and pitch angles, and, thus, this is a nonlinear controller. In [23] , it is shown that the two nonlinear controllers (27) and (31) result in exponential stability and allow the robot to track trajectories in SE(3).

Trajectory Planning

The quadrotor is underactuated, and this makes it difficult to plan trajectories in 12-dimensional state space (6 DoF position and velocity). However, the problem is considerably simplified if we use the fact that the quadrotor dynamics are differentially flat [25] . To see this, we consider the output position \xi and the yaw angle \psi . We show that we can write all state variables and inputs as functions of the outputs (\xi, \psi) and their derivatives. Derivatives of \xi yield the velocity v and the acceleration, \dot{\nu}={1\over m} u_{1}\vec{{\bf b}}_{3}+g\vec{{\bf a}}_{3}.
View Source Right-click on figure for MathML and additional features. \dot{\nu}={1\over m} u_{1}\vec{{\bf b}}_{3}+g\vec{{\bf a}}_{3}. From Figure 3 we see that \vec{{\bf e}}_{1}=[\cos\psi, \sin\psi, 0]^{\rm T},
View Source Right-click on figure for MathML and additional features. \vec{{\bf e}}_{1}=[\cos\psi, \sin\psi, 0]^{\rm T}, and the unit vectors for the body-fixed frame can be written in terms of the variables \psi and \dot{v} as \vec{{\bf b}}_{3} = {\dot{v}-g\vec{{\bf a}}_{3}\over \Vert\dot{v}-g\vec{{\bf a}}_{3}\Vert},\ \vec{{\bf b}}_{2} = {\vec{{\bf b}}_{3}\times\vec{{\bf e}}_{1}\over \left\Vert\vec{{\bf b}}_{3}\times \vec{{\bf e}}_{1}\right\Vert},\ \vec{{\bf b}}_{1} = \vec{{\bf b}}_{2} \times\vec{{\bf b}}_{3}
View Source Right-click on figure for MathML and additional features. \vec{{\bf b}}_{3} = {\dot{v}-g\vec{{\bf a}}_{3}\over \Vert\dot{v}-g\vec{{\bf a}}_{3}\Vert},\ \vec{{\bf b}}_{2} = {\vec{{\bf b}}_{3}\times\vec{{\bf e}}_{1}\over \left\Vert\vec{{\bf b}}_{3}\times \vec{{\bf e}}_{1}\right\Vert},\ \vec{{\bf b}}_{1} = \vec{{\bf b}}_{2} \times\vec{{\bf b}}_{3} provided \vec{{\bf b}}_{3}\times\vec{{\bf e}}_{1} \neq 0 . This defines the rotation matrix {}^{A}R_{B} as a function of \dot{v} (the second derivative of \xi ) and \psi . In this way, we write the angular velocity and the four inputs as functions of position, velocity, acceleration, jerk (\gamma) , and snap, or the derivative of jerk (\sigma) . From these equations, it is possible to verify that there is a diffeomorphism between the 18\times 1 vector \left(\xi^{\rm T}, \nu^{\rm T}, a^{\rm T}, \gamma^{\rm T}, \sigma^{\rm T}, \psi^{\rm T},\dot{\psi}^{\rm T},\ddot{\psi}\right)^{\rm T}
View Source Right-click on figure for MathML and additional features. \left(\xi^{\rm T}, \nu^{\rm T}, a^{\rm T}, \gamma^{\rm T}, \sigma^{\rm T}, \psi^{\rm T},\dot{\psi}^{\rm T},\ddot{\psi}\right)^{\rm T} and R\times \left(\xi^{\rm T},\dot{\xi}^{\rm T}, \Omega^{\rm T}, u_{1},\dot{u}_{1},\ddot{u}_{1},{\bf u}_{2}^{\rm T}\right)^{\rm T}.
View Source Right-click on figure for MathML and additional features. R\times \left(\xi^{\rm T},\dot{\xi}^{\rm T}, \Omega^{\rm T}, u_{1},\dot{u}_{1},\ddot{u}_{1},{\bf u}_{2}^{\rm T}\right)^{\rm T}. This property of differential flatness makes it easy to design trajectories that respect the dynamics of the underactuated system. Any four-times-differentiable trajectory in the space of flat outputs, (\xi^{\top}(t), \psi(t))^{\top} , corresponds to a feasible trajectory-one that satisfies the equations of motion. All inequality constraints of states and inputs can be expressed as functions of the flat outputs and their derivatives. This mapping to the space of flat outputs can be used to generate trajectories that minimize a cost functional formed by a weighted combination of the different flat outputs and their derivatives: \eqalignno{ \min_{\xi(t),\psi(t)} \int_{0}^{\rm T} &L(\xi,\dot{\xi},\ddot{\xi}, \dddot{\xi}, \dddot{\xi},\psi,\dot{\psi},\ddot{\psi})dt,\cr &g(\xi(t), \psi(t))\leq 0. &\hbox{(32)}}
View Source Right-click on figure for MathML and additional features. \eqalignno{ \min_{\xi(t),\psi(t)} \int_{0}^{\rm T} &L(\xi,\dot{\xi},\ddot{\xi}, \dddot{\xi}, \dddot{\xi},\psi,\dot{\psi},\ddot{\psi})dt,\cr &g(\xi(t), \psi(t))\leq 0. &\hbox{(32)}} In [24] , minimum snap trajectories were generated by minimizing a cost functional derived from the snap and the angular yaw acceleration with L(\xi,\dot{\xi},\ddot{\xi},\dddot{\xi}, \dddot{\xi}\psi,\dot{\psi},\ddot{\psi})=(1-\gamma)(\dddot{\xi})^{4} + \gamma(\ddot{\psi})^{2}.
View Source Right-click on figure for MathML and additional features. L(\xi,\dot{\xi},\ddot{\xi},\dddot{\xi}, \dddot{\xi}\psi,\dot{\psi},\ddot{\psi})=(1-\gamma)(\dddot{\xi})^{4} + \gamma(\ddot{\psi})^{2}. By suitable parameterizing trajectories with basis functions in the flat space and by considering linear inequalities in the flat space to model constraints on states and inputs (e.g., u_{1}\geq 0 ), it is possible to turn this optimization into a quadratic program that can be solved in real time for planning.

Finally, as shown in [11] , it is possible to combine this controller with attitude-only controllers to fly through vertical windows or land on inclined perches with close to zero normal velocity. A trajectory controller is used by the robot to build up momentum, while the attitude controller enables reorientation while coasting with the generated momentum.
Vision-Based Perception and Control

There are two approaches to the question of controlling an aerial vehicle based on visual information. The first is to use classical robotic SLAM techniques, although with the caveat that the environment and state estimation are inherently 3-D. There are many researchers currently working on this problem, and we will not attempt to discuss this approach further, except to say that should a good-quality environmental estimation and localization algorithm be developed, the control techniques discussed above can be applied. The second approach is direct sensor-based control [26] , the most commonly referred to case, being that of image-based visual servo control [27] – [28] [29] .

The motion of a point in an image is a function of its coordinate (u, v) and the camera motion \left(\matrix{ \dot{u}\cr \dot{v}}\right)=J(u, v, Z))v, \eqno{\hbox{(33)}}
View Source Right-click on figure for MathML and additional features. \left(\matrix{ \dot{u}\cr \dot{v}}\right)=J(u, v, Z))v, \eqno{\hbox{(33)}} where Z is the point depth, v=(v_{x}, v_{y}, v_{z}, \omega_{x}, \omega_{y}, \omega_{z})^{\top} is the spatial velocity of the camera (and vehicle), and J(\cdot) is the visual Jacobian or interaction matrix. J can be formulated for a perspective camera [30] , where (u, v) are pixel coordinates; or a spherical camera [31] where (u, v) are latitude and longitude angles.

The pitch and roll motion of the vehicle are controlled by the attitude subsystem to maintain a position or to follow a path in space, and this causes image motion. We partition the equations as \left(\matrix{ \dot{u}\cr \dot{v} }\right)=J_{1}(u, v)(v_{x}, v_{y}, v_{z}, \omega_{z})^{\top} + J_{2}(u, v)\left(\matrix{ \omega_{x}\cr \omega_{y} }\right), \eqno{\hbox{(34)}}
View Source Right-click on figure for MathML and additional features. \left(\matrix{ \dot{u}\cr \dot{v} }\right)=J_{1}(u, v)(v_{x}, v_{y}, v_{z}, \omega_{z})^{\top} + J_{2}(u, v)\left(\matrix{ \omega_{x}\cr \omega_{y} }\right), \eqno{\hbox{(34)}} where the right-most term describes the image motion due to the exogenous roll and pitch motion. Rearranging we can write \eqalignno{ \left(\matrix{ \dot{u}^{\prime}\cr \dot{v}^{\prime} }\right)&=\left(\matrix{ \dot{u}\cr \dot{v} }\right)^{\top}-J_{2}(u, v)\left(\matrix{ \omega_{x}\cr \omega_{y} }\right) &\hbox{(35)}\cr &=J_{1}(u, v)(v_{x}, v_{y}, v_{z}, \omega_{z})^{\top}, &\hbox{(36)}}
View Source Right-click on figure for MathML and additional features. \eqalignno{ \left(\matrix{ \dot{u}^{\prime}\cr \dot{v}^{\prime} }\right)&=\left(\matrix{ \dot{u}\cr \dot{v} }\right)^{\top}-J_{2}(u, v)\left(\matrix{ \omega_{x}\cr \omega_{y} }\right) &\hbox{(35)}\cr &=J_{1}(u, v)(v_{x}, v_{y}, v_{z}, \omega_{z})^{\top}, &\hbox{(36)}} where (u^{\prime}, v^{\prime}) represent image points for which the roll and pitch motion has been removed based on the knowledge of \omega_{x} and \omega_{y} , which can be obtained from gyroscopes.

Now consider a point in the image (u_{i}^{\prime}, v_{i}^{\prime}) and its desired location in the image (u_{i}^{\ast}, v_{i}^{\ast}) . This desired position might come from a snapshot of the scene taken when the vehicle was at the desired pose that we wish to return to. The desired image motion is therefore (\dot{u}_{i}^{\ast},\dot{v}_{i}^{\ast})= \lambda(u_{i}^{\ast}\ominus u_{i}^{\prime}, v_{i}^{\ast}\ominus v_{i}^{\prime}) , where the operator \ominus represents the difference on image plane or sphere. For N points, we can write \eqalignno{ &\lambda\left(\left(\matrix{ \dot{u}_{1}^{\ast}\cr \dot{v}_{1}^{\ast}\cr \vdots \cr \dot{u}_{N}^{\ast}\cr \dot{v}_{N}^{\ast} }\right)-\left(\matrix{ J_{1}(u_{1},v_{1})\cr \vdots\cr y_{1}(u_{N},v_{N}) }\right)\left(\matrix{ \omega_{x}\cr \omega_{y} }\right)\right)\cr &\qquad\qquad\qquad\qquad\qquad=\underbrace{\left(\matrix{ J_{2}(u_{1},v_{1})\cr \vdots\cr J_{2}(u_{N},v_{N}) }\right)}_{B}\left(\matrix{ v_{x}\cr v_{y}\cr v_{z}\cr \omega_{z} }\right). &\hbox{(37)}}
View Source Right-click on figure for MathML and additional features. \eqalignno{ &\lambda\left(\left(\matrix{ \dot{u}_{1}^{\ast}\cr \dot{v}_{1}^{\ast}\cr \vdots \cr \dot{u}_{N}^{\ast}\cr \dot{v}_{N}^{\ast} }\right)-\left(\matrix{ J_{1}(u_{1},v_{1})\cr \vdots\cr y_{1}(u_{N},v_{N}) }\right)\left(\matrix{ \omega_{x}\cr \omega_{y} }\right)\right)\cr &\qquad\qquad\qquad\qquad\qquad=\underbrace{\left(\matrix{ J_{2}(u_{1},v_{1})\cr \vdots\cr J_{2}(u_{N},v_{N}) }\right)}_{B}\left(\matrix{ v_{x}\cr v_{y}\cr v_{z}\cr \omega_{z} }\right). &\hbox{(37)}} If N > 2 and the matrix B is nonsingular, we can solve for the required translational and yaw velocity to move the vehicle to a pose where the feature points have the desired image coordinates (u_{i}^{\ast}, v_{i}^{\ast}) . The desired velocity is input to a control system as discussed earlier. This is an example of image-based visual servoing for an underactuated vehicle, and the technique can be applied to a wider variety of problems, such as holding station, path following, obstacle avoidance, and landing.

Conclusions

In this article, we have provided a tutorial introduction to modeling, estimation, and control for multirotor aerial vehicles, with a particular focus on the most common form-the quadrotor. The dynamic model includes the rigid body motion of the vehicle in SE(3), the simple aerodynamics associated with hover, and the extension to the case of forward motion where blade flapping becomes important. State estimation based on accelerometers, gyroscopes, and magnetometers was discussed for attitude and translational velocity, and GPS, motion-capture systems, and cameras for position estimation. A hierarchy of control techniques was discussed, from the individual rotors through attitude control, aggressive trajectory following, and image-based visual control. The future possibilities of highly agile small-scale vehicles were laid with a discussion on dimensional scaling for which vision will be an important sensing modality.
ACKNOWLEDGMENT

This research was partly supported by the Australian Research Council through Future Fellowship FT0991771 Foundations of Vision Based Control of Robotic Vehicles, the U.S. Army Research Laboratory Grant W911NF-OS-2-0004, and the U.S. Office of Naval Research Grants N00014-07-1-0S29, N00014-09-1-10S1, and N00014-08-1-0696.

Authors
Figures
References
Citations
Keywords
Metrics
More Like This
Cooperative Aerial-Ground Multi-Robot System for Automated Construction Tasks

IEEE Robotics and Automation Letters

Published: 2020
Implementation of an IoT Architecture based on MQTT for a Multi-Robot System

2018 IEEE Third Ecuador Technical Chapters Meeting (ETCM)

Published: 2018
Show More
References
1. P. I. Corke, Robotics Vision & Control: Fundamental Algorithms in MATLAB., Springer- Verlag, 2011.
Show in Context Google Scholar
2. T. Hamel, R. Mahony, R. Lozano and J. Ostrowski, "Dynamic modelling and configuration stabilization for an X4-flyer", Proc. Int. Federation of Automatic Control Symp. (IFAC) , pp. 6, 2002.
Show in Context Google Scholar
3. S. Bouabdallah, P. Murrieri and R. Siegwart, "Design and control of an indoor micro quadrotor", Proc. IEEE Int. Conf. Robotics and Automation (ICRA) , vol. 5, pp. 4393-4398, 2004-Apr.-26.
Show in Context CrossRef Google Scholar
4. R. W. Prouty, Helicopter Performance Stability and Control., Krieger, 1995.
Show in Context Google Scholar
5. J. Leishman, Principles of Helicopter Aerodynamics , 2000, [online] Available: http://books.google.com.au/books?id=nMV-TkaX-9cC.
Show in Context Google Scholar
6. H. Huang, G. Hoffmann, S. Waslander and C. Tomlin, "Aerodynamics and control of autonomous quadrotor helicopters in aggressive maneuvering", Proc. IEEE Int. Conf. Robotics and Automation (ICRA) , pp. 3277-3282, 2009-May.
Show in Context View Article Full Text: PDF (1757) Google Scholar
7. P. Martin and E. Salaun, "The true role of accelerometer feedback in quadrotor control", Proc. IEEE Int. Conf. Robotics and Automation , pp. 1623-1629, 2010-May.
Show in Context CrossRef Google Scholar
8. P. Corke, Robotics toolbox for MATLAB , 2012, [online] Available: http://www.petercorke.comlrobot.
Show in Context Google Scholar
9. C. H. Wolowicz, J. S. Bowman and W. P. Gilbert, "Similitude requirements and scaling relationships as applied to model testing", NASA Tech. Rep. 1435 , Aug. 1979.
Show in Context Google Scholar
10. S. Shen, N. Michael and V. Kumar, "3D estimation and control for autonomous flight with constrained computation", Proc. IEEE Int. Conf. Robotics and Automation , pp. 6, 2011-May.
Show in Context Google Scholar
11. D. Mellinger, N. Michael and V. Kumar, "Trajectory generation and control for precise aggressive maneuvers with quadrotors", Int. J. Robot. Res. , vol. 31, no. 5, pp. 664-674, Apr. 2012.
Show in Context CrossRef Google Scholar
12. R. Mahony, T. Hamel and J.-M. Pflimlin, "Non-linear complementary filters on the special orthogonal group", IEEE Trans. Automat. Contr. , vol. 53, no. 5, pp. 1203-1218, June 2008.
Show in Context View Article Full Text: PDF (941) Google Scholar
13. S. Bonnabel, P. Martin and P. Rouchon, "Non-linear symmetry-preserving observers on lie groups", IEEE Trans. Automat. Contr. , vol. 54, no. 7, pp. 1709-1713, 2009.
Show in Context View Article Full Text: PDF (216) Google Scholar
14. A. Bachrach, S. Prentice, R. He and N. Roy, "Range-robust autonomous navigation in GPS-denied environments", J. Field Robot. , vol. 28, no. 5, pp. 644-666, 2011.
Show in Context CrossRef Google Scholar
15. O. Amidi, T. Kanade and R. Miller, "Vision-based autonomous helicopter research at Carnegie Mellon Robotics Institute", Proc. Heli Japan , vol. 98, pp. 6, 1998.
Show in Context Google Scholar
16. P. Corke, "An inertial and visual sensing system for a small autonomous helicopter", J. Robot. Syst. , vol. 21, no. 2, pp. 43-51, Feb. 2004.
Show in Context CrossRef Google Scholar
17. L. Meier, P. Tanskanen, F. Fraundorfer and M. Pollefeys, "Pixhawk: A system for autonomous flight using onboard computer", Proc. ICRA , pp. 6, 2011.
Show in Context View Article Full Text: PDF (1468) Google Scholar
18. C. Kemp, Visual control of a miniature quad rotor helicopter , 2006.
Show in Context Google Scholar
19. M. Achtelik, A. Bachrach, R. He, S. Prentice and N. Roy, "Stereo vision and laser odometry for autonomous helicopters in GPS-denied indoor environments", Proc. SPIE Unmanned Systems Technology XI. , vol. 7332, pp. 10, 2009.
Show in Context Google Scholar
20. P. Bristeau, F. Callou, D. Vissiere and N. Petit, "The navigation and control technology inside the AR. drone micro UAV", Proc. World Congress , vol. 18, no. 1, pp. 1477-1484, 2011.
Show in Context Google Scholar
21. V. Srinivasan and S. Venkatesh, From Living Eyes to Seeing Machines., Oxford Univ. Press, 1997.
Show in Context Google Scholar
22. P. Corke, J. Lobo and J. Dias, "An introduction to inertial and visual sensing", Int. J. Robot. Res. , vol. 26, no. 6, pp. 519-536, June 2007.
Show in Context CrossRef Google Scholar
23. T. Lee, M. Leok and N. McClamroch, Proc. IEEE Conf. Decision and Control , pp. 6, 2010.
Show in Context Google Scholar
24. D. Mellinger and V. Kumar, "Minimum snap trajectory generation and control for quadrotors", Proc. Int. Conf. Robotics and Automation (ICRA) , pp. 6, 2011-May.
Show in Context View Article Full Text: PDF (1980) Google Scholar
25. M. J. V. Nieuwstadt and R. M. Murray, "Real-time trajectory generation for differentially flat systems", Int. J. Robust and Nonlinear Control , vol. 8, no. 11, pp. 995-1020, 1998.
Show in Context CrossRef Google Scholar
26. C. Samson, M. Le Borgne and B. Espiau, Robot Control: The Task Function Approach (The Oxford Engineering Science Series), Oxford Univ. Press, 1991.
Show in Context Google Scholar
27. T. Hamel and R. Mahony, "Visual servoing of an under-actuated dynamic rigid-body system: An image based approach", IEEE Trans. Robot. Automat. , vol. 18, no. 2, pp. 187-198, Apr. 2002.
Show in Context View Article Full Text: PDF (378) Google Scholar
28. N. Guenard, T. Hamel and R. Mahony, "A practical visual servo control for a unmanned aerial vehicle", IEEE Trans. Robot. , vol. 24, no. 2, pp. 331-341, Apr. 2008.
Show in Context View Article Full Text: PDF (870) Google Scholar
29. R. Mahony, P. Corke and T. Hamel, "Dynamic image-based visual servo control using centroid and optic flow features", J. Dynamic. Syst. Meas. Contr. , vol. 130, no. 1, pp. 12, Jan. 2008.
Show in Context CrossRef Google Scholar
30. S. Hutchinson, G. Hager and P. Corke, "A tutorial on visual servo control", IEEE Trans. Robot. Autom. , vol. 12, no. 5, pp. 651-670, Oct. 1996.
Show in Context View Article Full Text: PDF (2395) Google Scholar
31. P. I. Corke, "Spherical image-based visual servo and structure estimation", Proc. IEEE Int. Conf. Robotics and Automation , pp. 5550-5555, 2010-May.
Show in Context CrossRef Google Scholar
IEEE Personal Account

    Change username/password 

Purchase Details

    Payment Options
    View Purchased Documents 

Profile Information

    Communications Preferences
    Profession and Education
    Technical interests 

Need Help?

    US & Canada: +1 800 678 4333
    Worldwide: +1 732 981 0060
    Contact & Support 

Follow

About IEEE Xplore | Contact Us | Help | Accessibility | Terms of Use | Nondiscrimination Policy | IEEE Ethics Reporting | Sitemap | Privacy & Opting Out of Cookies

A not-for-profit organization, IEEE is the world's largest technical professional organization dedicated to advancing technology for the benefit of humanity.

© Copyright 2022 IEEE - All rights reserved.
